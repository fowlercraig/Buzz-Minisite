!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){"use strict";function t(e){p.Plugins[e].initialized||(p.Plugins[e].methods._setup.call(document),p.Plugins[e].initialized=!0)}function n(e,t,n,a){var i,r={raw:{}};a=a||{};for(i in a)a.hasOwnProperty(i)&&("classes"===e?(r.raw[a[i]]=t+"-"+a[i],r[a[i]]="."+t+"-"+a[i]):(r.raw[i]=a[i],r[i]=a[i]+"."+t));for(i in n)n.hasOwnProperty(i)&&("classes"===e?(r.raw[i]=n[i].replace(/{ns}/g,t),r[i]=n[i].replace(/{ns}/g,"."+t)):(r.raw[i]=n[i].replace(/.{ns}/g,""),r[i]=n[i].replace(/{ns}/g,t)));return r}function a(){var e,t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"},n=["transition","-webkit-transition"],a={transform:"transform",MozTransform:"-moz-transform",OTransform:"-o-transform",msTransform:"-ms-transform",webkitTransform:"-webkit-transform"},i="transitionend",r="",o="",s=document.createElement("div");for(e in t)if(t.hasOwnProperty(e)&&e in s.style){i=t[e],p.support.transition=!0;break}g.transitionEnd=i+".{ns}";for(e in n)if(n.hasOwnProperty(e)&&n[e]in s.style){r=n[e];break}p.transition=r;for(e in a)if(a.hasOwnProperty(e)&&a[e]in s.style){p.support.transform=!0,o=a[e];break}p.transform=o}function i(){p.windowWidth=p.$window.width(),p.windowHeight=p.$window.height(),m=d.startTimer(m,v,r)}function r(){for(var e in p.ResizeHandlers)p.ResizeHandlers.hasOwnProperty(e)&&p.ResizeHandlers[e].callback.call(window,p.windowWidth,p.windowHeight)}function o(){if(p.support.raf){p.window.requestAnimationFrame(o);for(var e in p.RAFHandlers)p.RAFHandlers.hasOwnProperty(e)&&p.RAFHandlers[e].callback.call(window)}}function s(e,t){return parseInt(e.priority)-parseInt(t.priority)}var l="undefined"!=typeof window?window:this,c=l.document,u=function(){this.Version="1.1.1",this.Plugins={},this.DontConflict=!1,this.Conflicts={fn:{}},this.ResizeHandlers=[],this.RAFHandlers=[],this.window=l,this.$window=e(l),this.document=c,this.$document=e(c),this.$body=null,this.windowWidth=0,this.windowHeight=0,this.fallbackWidth=1024,this.fallbackHeight=768,this.userAgent=window.navigator.userAgent||window.navigator.vendor||window.opera,this.isFirefox=/Firefox/i.test(this.userAgent),this.isChrome=/Chrome/i.test(this.userAgent),this.isSafari=/Safari/i.test(this.userAgent)&&!this.isChrome,this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(this.userAgent),this.isIEMobile=/IEMobile/i.test(this.userAgent),this.isFirefoxMobile=this.isFirefox&&this.isMobile,this.transform=null,this.transition=null,this.support={file:!!(window.File&&window.FileList&&window.FileReader),history:!!(window.history&&window.history.pushState&&window.history.replaceState),matchMedia:!(!window.matchMedia&&!window.msMatchMedia),pointer:!!window.PointerEvent,raf:!(!window.requestAnimationFrame||!window.cancelAnimationFrame),touch:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),transition:!1,transform:!1}},d={killEvent:function(e,t){try{e.preventDefault(),e.stopPropagation(),t&&e.stopImmediatePropagation()}catch(n){}},startTimer:function(e,t,n,a){return d.clearTimer(e),a?setInterval(n,t):setTimeout(n,t)},clearTimer:function(e,t){e&&(t?clearInterval(e):clearTimeout(e),e=null)},sortAsc:function(e,t){return parseInt(e,10)-parseInt(t,10)},sortDesc:function(e,t){return parseInt(t,10)-parseInt(e,10)},decodeEntities:function(e){var t=p.document.createElement("textarea");return t.innerHTML=e,t.value},parseQueryString:function(e){for(var t={},n=e.slice(e.indexOf("?")+1).split("&"),a=0;a<n.length;a++){var i=n[a].split("=");t[i[0]]=i[1]}return t}},p=new u,f=e.Deferred(),h={base:"{ns}",element:"{ns}-element"},g={namespace:".{ns}",beforeUnload:"beforeunload.{ns}",blur:"blur.{ns}",change:"change.{ns}",click:"click.{ns}",dblClick:"dblclick.{ns}",drag:"drag.{ns}",dragEnd:"dragend.{ns}",dragEnter:"dragenter.{ns}",dragLeave:"dragleave.{ns}",dragOver:"dragover.{ns}",dragStart:"dragstart.{ns}",drop:"drop.{ns}",error:"error.{ns}",focus:"focus.{ns}",focusIn:"focusin.{ns}",focusOut:"focusout.{ns}",input:"input.{ns}",keyDown:"keydown.{ns}",keyPress:"keypress.{ns}",keyUp:"keyup.{ns}",load:"load.{ns}",mouseDown:"mousedown.{ns}",mouseEnter:"mouseenter.{ns}",mouseLeave:"mouseleave.{ns}",mouseMove:"mousemove.{ns}",mouseOut:"mouseout.{ns}",mouseOver:"mouseover.{ns}",mouseUp:"mouseup.{ns}",panStart:"panstart.{ns}",pan:"pan.{ns}",panEnd:"panend.{ns}",resize:"resize.{ns}",scaleStart:"scalestart.{ns}",scaleEnd:"scaleend.{ns}",scale:"scale.{ns}",scroll:"scroll.{ns}",select:"select.{ns}",swipe:"swipe.{ns}",touchCancel:"touchcancel.{ns}",touchEnd:"touchend.{ns}",touchLeave:"touchleave.{ns}",touchMove:"touchmove.{ns}",touchStart:"touchstart.{ns}"};u.prototype.NoConflict=function(){p.DontConflict=!0;for(var t in p.Plugins)p.Plugins.hasOwnProperty(t)&&(e[t]=p.Conflicts[t],e.fn[t]=p.Conflicts.fn[t])},u.prototype.Plugin=function(a,i){return p.Plugins[a]=function(t,a){function i(n){var i,r,s,l="object"===e.type(n),c=this,u=e();for(n=e.extend(!0,{},a.defaults||{},l?n:{}),r=0,s=c.length;s>r;r++)if(i=c.eq(r),!o(i)){var d="__"+a.guid++,p=a.classes.raw.base+d,f=i.data(t+"-options"),h=e.extend(!0,{$el:i,guid:d,rawGuid:p,dotGuid:"."+p},n,"object"===e.type(f)?f:{});i.addClass(a.classes.raw.element).data(v,h),a.methods._construct.apply(i,[h].concat(Array.prototype.slice.call(arguments,l?1:0))),u=u.add(i)}for(r=0,s=u.length;s>r;r++)i=u.eq(r),a.methods._postConstruct.apply(i,[o(i)]);return c}function r(e){a.functions.iterate.apply(this,[a.methods._destruct].concat(Array.prototype.slice.call(arguments,1))),this.removeClass(a.classes.raw.element).removeData(v)}function o(e){return e.data(v)}function l(t){if(this instanceof e){var n=a.methods[t];return"object"!==e.type(t)&&t?n&&0!==t.indexOf("_")?a.functions.iterate.apply(this,[n].concat(Array.prototype.slice.call(arguments,1))):this:i.apply(this,arguments)}}function c(t){var n=a.utilities[t]||a.utilities._initialize||!1;return n?n.apply(window,Array.prototype.slice.call(arguments,"object"===e.type(t)?0:1)):void 0}function u(t){a.defaults=e.extend(!0,a.defaults,t||{})}function f(t){for(var n=this,a=0,i=n.length;i>a;a++){var r=n.eq(a),s=o(r)||{};"undefined"!==e.type(s.$el)&&t.apply(r,[s].concat(Array.prototype.slice.call(arguments,1)))}return n}var m="fs-"+t,v="fs"+t.replace(/(^|\s)([a-z])/g,function(e,t,n){return t+n.toUpperCase()});return a.initialized=!1,a.priority=a.priority||10,a.classes=n("classes",m,h,a.classes),a.events=n("events",t,g,a.events),a.functions=e.extend({getData:o,iterate:f},d,a.functions),a.methods=e.extend(!0,{_setup:e.noop,_construct:e.noop,_postConstruct:e.noop,_destruct:e.noop,_resize:!1,destroy:r},a.methods),a.utilities=e.extend(!0,{_initialize:!1,_delegate:!1,defaults:u},a.utilities),a.widget&&(p.Conflicts.fn[t]=e.fn[t],e.fn[v]=l,p.DontConflict||(e.fn[t]=e.fn[v])),p.Conflicts[t]=e[t],e[v]=a.utilities._delegate||c,p.DontConflict||(e[t]=e[v]),a.namespace=t,a.namespaceClean=v,a.guid=0,a.methods._resize&&(p.ResizeHandlers.push({namespace:t,priority:a.priority,callback:a.methods._resize}),p.ResizeHandlers.sort(s)),a.methods._raf&&(p.RAFHandlers.push({namespace:t,priority:a.priority,callback:a.methods._raf}),p.RAFHandlers.sort(s)),a}(a,i),f.then(function(){t(a)}),p.Plugins[a]};var m=null,v=20;return p.$window.on("resize.fs",i),i(),o(),e(function(){p.$body=e("body"),f.resolve(),p.support.nativeMatchMedia=p.support.matchMedia&&!e("html").hasClass("no-matchmedia")}),g.clickTouchStart=g.click+" "+g.touchStart,a(),window.Formstone=p,p}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./core"],e):e(jQuery,Formstone)}(function(e,t){"use strict";function n(e){if(e.touches=[],e.touching=!1,this.on(m.dragStart,v.killEvent),e.swipe&&(e.pan=!0),e.scale&&(e.axis=!1),e.axisX="x"===e.axis,e.axisY="y"===e.axis,t.support.pointer){var n="";!e.axis||e.axisX&&e.axisY?n="none":(e.axisX&&(n+=" pan-y"),e.axisY&&(n+=" pan-x")),f(this,n),this.on(m.pointerDown,e,i)}else this.on(m.touchStart,e,i).on(m.mouseDown,e,r)}function a(e){this.off(m.namespace),f(this,"")}function i(e){e.preventManipulation&&e.preventManipulation();var t=e.data,n=e.originalEvent;if(n.type.match(/(up|end|cancel)$/i))return void c(e);if(n.pointerId){var a=!1;for(var i in t.touches)t.touches[i].id===n.pointerId&&(a=!0,t.touches[i].pageX=n.pageX,t.touches[i].pageY=n.pageY);a||t.touches.push({id:n.pointerId,pageX:n.pageX,pageY:n.pageY})}else t.touches=n.touches;n.type.match(/(down|start)$/i)?r(e):n.type.match(/move$/i)&&o(e)}function r(n){var a=n.data,r="undefined"!==e.type(a.touches)?a.touches[0]:null;a.touching||(a.startE=n.originalEvent,a.startX=r?r.pageX:n.pageX,a.startY=r?r.pageY:n.pageY,a.startT=(new Date).getTime(),a.scaleD=1,a.passed=!1),a.$links&&a.$links.off(m.click);var s=u(a.scale?m.scaleStart:m.panStart,n,a.startX,a.startY,a.scaleD,0,0,"","");if(a.scale&&a.touches&&a.touches.length>=2){var l=a.touches;a.pinch={startX:d(l[0].pageX,l[1].pageX),startY:d(l[0].pageY,l[1].pageY),startD:p(l[1].pageX-l[0].pageX,l[1].pageY-l[0].pageY)},s.pageX=a.startX=a.pinch.startX,s.pageY=a.startY=a.pinch.startY}a.touching||(a.touching=!0,a.pan&&y.on(m.mouseMove,a,o).on(m.mouseUp,a,c),t.support.pointer?y.on([m.pointerMove,m.pointerUp,m.pointerCancel].join(" "),a,i):y.on([m.touchMove,m.touchEnd,m.touchCancel].join(" "),a,i),a.$el.trigger(s))}function o(t){var n=t.data,a="undefined"!==e.type(n.touches)?n.touches[0]:null,i=a?a.pageX:t.pageX,r=a?a.pageY:t.pageY,o=i-n.startX,s=r-n.startY,l=o>0?"right":"left",f=s>0?"down":"up",h=Math.abs(o)>b,g=Math.abs(s)>b;if(!n.passed&&n.axis&&(n.axisX&&g||n.axisY&&h))c(t);else{!n.passed&&(!n.axis||n.axis&&n.axisX&&h||n.axisY&&g)&&(n.passed=!0),n.passed&&(v.killEvent(t),v.killEvent(n.startE));var y=!0,w=u(n.scale?m.scale:m.pan,t,i,r,n.scaleD,o,s,l,f);if(n.scale)if(n.touches&&n.touches.length>=2){var C=n.touches;n.pinch.endX=d(C[0].pageX,C[1].pageX),n.pinch.endY=d(C[0].pageY,C[1].pageY),n.pinch.endD=p(C[1].pageX-C[0].pageX,C[1].pageY-C[0].pageY),n.scaleD=n.pinch.endD/n.pinch.startD,w.pageX=n.pinch.endX,w.pageY=n.pinch.endY,w.scale=n.scaleD,w.deltaX=n.pinch.endX-n.pinch.startX,w.deltaY=n.pinch.endY-n.pinch.startY}else n.pan||(y=!1);y&&n.$el.trigger(w)}}function s(t,n){t.on(m.click,n,l);var a=e._data(t[0],"events").click;a.unshift(a.pop())}function l(e){v.killEvent(e,!0),e.data.$links.off(m.click)}function c(t){var n=t.data,a="undefined"!==e.type(n.touches)?n.touches[0]:null,i=a?a.pageX:t.pageX,r=a?a.pageY:t.pageY,o=i-n.startX,l=r-n.startY,c=(new Date).getTime(),d=n.scale?m.scaleEnd:m.panEnd,p=o>0?"right":"left",f=l>0?"down":"up",h=Math.abs(o)>1,g=Math.abs(l)>1;if(n.swipe&&Math.abs(o)>b&&c-n.startT<w&&(d=m.swipe),n.axis&&(n.axisX&&g||n.axisY&&h)||h||g){n.$links=n.$el.find("a");for(var v=0,C=n.$links.length;C>v;v++)s(n.$links.eq(v),n)}var S=u(d,t,i,r,n.scaleD,o,l,p,f);y.off([m.touchMove,m.touchEnd,m.touchCancel,m.mouseMove,m.mouseUp,m.pointerMove,m.pointerUp,m.pointerCancel].join(" ")),n.$el.trigger(S),n.touches=[],n.scale,n.touching=!1}function u(t,n,a,i,r,o,s,l,c){return e.Event(t,{originalEvent:n,bubbles:!0,pageX:a,pageY:i,scale:r,deltaX:o,deltaY:s,directionX:l,directionY:c})}function d(e,t){return(e+t)/2}function p(e,t){return Math.sqrt(e*e+t*t)}function f(e,t){e.css({"-ms-touch-action":t,"touch-action":t})}var h=!t.window.PointerEvent,g=t.Plugin("touch",{widget:!0,defaults:{axis:!1,pan:!1,scale:!1,swipe:!1},methods:{_construct:n,_destruct:a},events:{pointerDown:h?"MSPointerDown":"pointerdown",pointerUp:h?"MSPointerUp":"pointerup",pointerMove:h?"MSPointerMove":"pointermove",pointerCancel:h?"MSPointerCancel":"pointercancel"}}),m=g.events,v=g.functions,y=t.$window,b=10,w=50;m.pan="pan",m.panStart="panstart",m.panEnd="panend",m.scale="scale",m.scaleStart="scalestart",m.scaleEnd="scaleend",m.swipe="swipe"}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./core"],e):e(jQuery,Formstone)}(function(e,t){"use strict";function n(e,n){if(n){e.$target=this.find(e.target),e.$check=e.target?e.$target:this,e.callback=n,e.styles=s(e.$check),e.timer=null;var a=e.$check.css(t.transition+"-duration"),r=parseFloat(a);t.support.transition&&a&&r?this.on(u.transitionEnd,e,i):e.timer=d.startTimer(e.timer,50,function(){o(e)},!0)}}function a(e){d.clearTimer(e.timer,!0),this.off(u.namespace)}function i(t){t.stopPropagation(),t.preventDefault();var n=t.data,a=t.originalEvent,i=n.target?n.$target:n.$el;n.property&&a.propertyName!==n.property||!e(a.target).is(i)||r(n)}function r(e){e.always||e.$el[c.namespaceClean]("destroy"),e.callback.apply(e.$el)}function o(e){var t=s(e.$check);l(e.styles,t)||r(e),e.styles=t}function s(t){var n,a,i,r={};if(t instanceof e&&(t=t[0]),p.getComputedStyle){n=p.getComputedStyle(t,null);for(var o=0,s=n.length;s>o;o++)a=n[o],i=n.getPropertyValue(a),r[a]=i}else if(t.currentStyle){n=t.currentStyle;for(a in n)n[a]&&(r[a]=n[a])}return r}function l(t,n){if(e.type(t)!==e.type(n))return!1;for(var a in t){if(!t.hasOwnProperty(a))return!1;if(!t.hasOwnProperty(a)||!n.hasOwnProperty(a)||t[a]!==n[a])return!1}return!0}var c=t.Plugin("transition",{widget:!0,defaults:{always:!1,property:null,target:null},methods:{_construct:n,_destruct:a,resolve:r}}),u=c.events,d=c.functions,p=t.window}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./core"],e):e(jQuery,Formstone)}(function(e,t){"use strict";function n(t){t=t||{};for(var n in b)b.hasOwnProperty(n)&&(d[n]=t[n]?e.merge(t[n],d[n]):d[n]);d=e.extend(d,t),d.minWidth.sort(g.sortDesc),d.maxWidth.sort(g.sortAsc),d.minHeight.sort(g.sortDesc),d.maxHeight.sort(g.sortAsc);for(var a in b)if(b.hasOwnProperty(a)){y[a]={};for(var i in d[a])if(d[a].hasOwnProperty(i)){var r=window.matchMedia("("+b[a]+": "+(d[a][i]===1/0?1e5:d[a][i])+d.unit+")");r.addListener(o),y[a][d[a][i]]=r}}o()}function a(e,t,n){var a=h.matchMedia(t),i=l(a.media);v[i]||(v[i]={mq:a,active:!0,enter:{},leave:{}},v[i].mq.addListener(s));for(var r in n)n.hasOwnProperty(r)&&v[i].hasOwnProperty(r)&&(v[i][r][e]=n[r]);var o=v[i],c=a.matches;c&&o[p.enter].hasOwnProperty(e)?(o[p.enter][e].apply(a),o.active=!0):!c&&o[p.leave].hasOwnProperty(e)&&(o[p.leave][e].apply(a),o.active=!1)}function i(e,t){if(e)if(t){var n=l(t);v[n]&&(v[n].enter[e]&&delete v[n].enter[e],v[n].leave[e]&&delete v[n].leave[e])}else for(var a in v)v.hasOwnProperty(a)&&(v[a].enter[e]&&delete v[a].enter[e],v[a].leave[e]&&delete v[a].leave[e])}function r(){m={unit:d.unit};for(var e in b)if(b.hasOwnProperty(e))for(var n in y[e])if(y[e].hasOwnProperty(n)){var a="Infinity"===n?1/0:parseInt(n,10),i=b[e].indexOf("width")>-1?t.fallbackWidth:t.fallbackHeight,r=e.indexOf("max")>-1;t.support.nativeMatchMedia?y[e][n].matches&&(r?(!m[e]||a<m[e])&&(m[e]=a):(!m[e]||a>m[e])&&(m[e]=a)):r?!m[e]&&a>i&&(m[e]=a):(!m[e]&&0!==m[e]||a>m[e]&&i>a)&&(m[e]=a)}}function o(){r(),f.trigger(p.mqChange,[m])}function s(e){var t=l(e.media),n=v[t],a=e.matches,i=a?p.enter:p.leave;if(n&&(n.active||!n.active&&a)){for(var r in n[i])n[i].hasOwnProperty(r)&&n[i][r].apply(n.mq);n.active=!0}}function l(e){return e.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"").replace(/^\s+|\s+$/g,"")}function c(){return m}var u=t.Plugin("mediaquery",{utilities:{_initialize:n,state:c,bind:a,unbind:i},events:{mqChange:"mqchange"}}),d={minWidth:[0],maxWidth:[1/0],minHeight:[0],maxHeight:[1/0],unit:"px"},p=e.extend(u.events,{enter:"enter",leave:"leave"}),f=t.$window,h=f[0],g=u.functions,m=null,v=[],y={},b={minWidth:"min-width",maxWidth:"max-width",minHeight:"min-height",maxHeight:"max-height"}}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./mediaquery"],e):e(jQuery,Formstone)}(function(e,t){"use strict";function n(t){t.enabled=!1,t.active=!1,t.classes=e.extend(!0,{},p,t.classes),t.target=this.data(d+"-target"),t.$target=e(t.target).addClass(t.classes.raw.target),t.mq="(max-width:"+(t.maxWidth===1/0?"100000px":t.maxWidth)+")";var n=this.data(d+"-linked");t.linked=n?"[data-"+d+'-linked="'+n+'"]':!1;var a=this.data(d+"-group");t.group=a?"[data-"+d+'-group="'+a+'"]':!1,t.$swaps=e().add(this).add(t.$target),this.on(f.click+t.dotGuid,t,c)}function a(t){t.collapse||!t.group||e(t.group).filter("[data-"+d+"-active]").length||e(t.group).eq(0).attr("data-"+d+"-active","true"),t.onEnable=this.data(d+"-active")||!1,e.fsMediaquery("bind",t.rawGuid,t.mq,{enter:function(){s.call(t.$el,t,!0)},leave:function(){l.call(t.$el,t,!0)}})}function i(t){e.fsMediaquery("unbind",t.rawGuid),t.$swaps.removeClass([t.classes.raw.enabled,t.classes.raw.active].join(" ")).off(f.namespace)}function r(t,n){if(t.enabled&&!t.active){t.group&&!n&&e(t.group).not(t.$el).not(t.linked)[u.namespaceClean]("deactivate",!0);var a=t.group?e(t.group).index(t.$el):null;t.$swaps.addClass(t.classes.raw.active),n||t.linked&&e(t.linked).not(t.$el)[u.namespaceClean]("activate",!0),this.trigger(f.activate,[a]),t.active=!0}}function o(t,n){t.enabled&&t.active&&(t.$swaps.removeClass(t.classes.raw.active),n||t.linked&&e(t.linked).not(t.$el)[u.namespaceClean]("deactivate",!0),this.trigger(f.deactivate),t.active=!1)}function s(t,n){t.enabled||(t.enabled=!0,t.$swaps.addClass(t.classes.raw.enabled),n||e(t.linked).not(t.$el)[u.namespaceClean]("enable"),this.trigger(f.enable),t.onEnable?(t.active=!1,r.call(this,t)):(t.active=!0,o.call(this,t)))}function l(t,n){t.enabled&&(t.enabled=!1,t.$swaps.removeClass([t.classes.raw.enabled,t.classes.raw.active].join(" ")),n||e(t.linked).not(t.$el)[u.namespaceClean]("disable"),this.trigger(f.disable))}function c(e){h.killEvent(e);var t=e.data;t.active&&t.collapse?o.call(t.$el,t):r.call(t.$el,t)}var u=t.Plugin("swap",{widget:!0,defaults:{collapse:!0,maxWidth:1/0},classes:["target","enabled","active"],events:{activate:"activate",deactivate:"deactivate",enable:"enable",disable:"disable"},methods:{_construct:n,_postConstruct:a,_destruct:i,activate:r,deactivate:o,enable:s,disable:l}}),d=u.namespace,p=u.classes,f=u.events,h=u.functions}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./core"],e):e(jQuery,Formstone)}(function(e,t){"use strict";function n(t){var n=this.closest("label"),a=n.length?n.eq(0):e("label[for="+this.attr("id")+"]"),i=[g.base,t.theme,t.customClass].join(" "),r="";t.radio="radio"===this.attr("type"),t.group=this.attr("name"),r+='<div class="'+g.marker+'" aria-hidden="true">',r+='<div class="'+g.flag+'"></div>',t.toggle&&(i+=" "+g.toggle,r+='<span class="'+[g.state,g.state_on].join(" ")+'">'+t.labels.on+"</span>",r+='<span class="'+[g.state,g.state_off].join(" ")+'">'+t.labels.off+"</span>"),t.radio&&(i+=" "+g.radio),r+="</div>",a.length?a.addClass(g.label).wrap('<div class="'+i+'"></div>').before(r):this.before('<div class=" '+i+'">'+r+"</div>"),t.$checkbox=a.length?a.parents(h.base):this.prev(h.base),t.$marker=t.$checkbox.find(h.marker),t.$states=t.$checkbox.find(h.state),t.$label=a,this.is(":checked")&&t.$checkbox.addClass(g.checked),(this.is(":disabled")||this.is("[readonly]"))&&t.$checkbox.addClass(g.disabled),this.wrap('<div class="'+g.element_wrapper+'"></div>'),this.on(m.focus,t,d).on(m.blur,t,p).on(m.change,t,l).on(m.click,t,s).on(m.deselect,t,u),t.$checkbox.on(m.click,t,s)}function a(e){e.$checkbox.off(m.namespace),e.$marker.remove(),e.$states.remove(),e.$label.unwrap().removeClass(g.label),this.unwrap().off(m.namespace)}function i(e){this.prop("disabled",!1),e.$checkbox.removeClass(g.disabled)}function r(e){this.prop("disabled",!0),e.$checkbox.addClass(g.disabled)}function o(e){var t=e.$el.is(":disabled")||e.$el.is("[readonly]"),n=e.$el.is(":checked");t||(n?c({data:e}):u({data:e}))}function s(t){t.stopPropagation();var n=t.data;e(t.target).is(n.$el)||(t.preventDefault(),n.$el.trigger("click"))}function l(e){var t=e.data,n=t.$el.is(":disabled")||t.$el.is("[readonly]"),a=t.$el.is(":checked");n||(t.radio?a&&c(e):a?c(e):u(e))}function c(t){t.data.radio&&e('input[name="'+t.data.group+'"]').not(t.data.$el).trigger("deselect"),t.data.$el.trigger(m.focus),t.data.$checkbox.addClass(g.checked)}function u(e){e.data.$el.trigger(m.focus),e.data.$checkbox.removeClass(g.checked)}function d(e){e.data.$checkbox.addClass(g.focus)}function p(e){e.data.$checkbox.removeClass(g.focus)}var f=t.Plugin("checkbox",{widget:!0,defaults:{customClass:"",toggle:!1,labels:{on:"ON",off:"OFF"},theme:"fs-light"},classes:["element_wrapper","label","marker","flag","radio","focus","checked","disabled","toggle","state","state_on","state_off"],methods:{_construct:n,_destruct:a,enable:i,disable:r,update:o},events:{deselect:"deselect"}}),h=f.classes,g=h.raw,m=f.events;f.functions}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./mediaquery","./touch"],e):e(jQuery,Formstone)}(function(e,t){"use strict";function n(e){Y.iterate.call(R,l)}function a(){R=e(D.base)}function i(n){var i;n.carouselClasses=[F.base,n.theme,n.customClass,n.rtl?F.rtl:F.ltr],n.maxWidth=n.maxWidth===1/0?"100000px":n.maxWidth,n.mq="(min-width:"+n.minWidth+") and (max-width:"+n.maxWidth+")",n.customControls="object"===e.type(n.controls)&&n.controls.previous&&n.controls.next,n.id=this.attr("id"),n.id?n.ariaID=n.id:(n.ariaID=n.rawGuid,this.attr("id",n.ariaID)),t.support.transform||(n.useMargin=!0);var r="",l="",u=[F.control,F.control_previous].join(" "),d=[F.control,F.control_next].join(" ");n.controls&&!n.customControls&&(r+='<div class="'+F.controls+'" aria-label="carousel controls" aria-controls="'+n.ariaID+'">',r+='<button type="button" class="'+u+'" aria-label="'+n.labels.previous+'">'+n.labels.previous+"</button>",r+='<button type="button" class="'+d+'" aria-label="'+n.labels.next+'">'+n.labels.next+"</button>",r+="</div>"),n.pagination&&(l+='<div class="'+F.pagination+'" aria-label="carousel pagination" aria-controls="'+n.ariaID+'" role="navigation">',l+="</div>"),n.autoHeight&&n.carouselClasses.push(F.auto_height),n.contained&&n.carouselClasses.push(F.contained),n.single&&n.carouselClasses.push(F.single),this.addClass(n.carouselClasses.join(" ")).wrapInner('<div class="'+F.wrapper+'" aria-live="polite"><div class="'+F.container+'"><div class="'+F.canister+'"></div></div></div>').append(r).wrapInner('<div class="'+F.viewport+'"></div>').append(l),n.$viewport=this.find(D.viewport).eq(0),n.$container=this.find(D.container).eq(0),n.$canister=this.find(D.canister).eq(0),n.$pagination=this.find(D.pagination).eq(0),n.$paginationItems=n.$pagination.find(D.page),n.$controlPrevious=n.$controlNext=e(""),n.customControls?(n.$controls=e(n.controls.container).addClass([F.controls,F.controls_custom].join(" ")),n.$controlPrevious=e(n.controls.previous).addClass(u),n.$controlNext=e(n.controls.next).addClass(d)):(n.$controls=this.find(D.controls).eq(0),n.$controlPrevious=n.$controls.find(D.control_previous),n.$controlNext=n.$controls.find(D.control_next)),n.$controlItems=n.$controlPrevious.add(n.$controlNext),n.index=0,n.enabled=!1,n.leftPosition=0,n.autoTimer=null,n.resizeTimer=null;var p=this.data(q+"-linked");n.linked=p?"[data-"+q+'-linked="'+p+'"]':!1,n.linked&&(n.paged=!0);var f=this.data(q+"-controller-for")||"";if(n.$subordinate=e(f),n.$subordinate.length&&(n.controller=!0),"object"===e.type(n.show)){var h=n.show,g=[],m=[];for(i in h)h.hasOwnProperty(i)&&m.push(i);m.sort(Y.sortAsc);for(i in m)m.hasOwnProperty(i)&&g.push({width:parseInt(m[i]),count:h[m[i]],mq:window.matchMedia("(min-width: "+parseInt(m[i])+"px)")});n.show=g}c(n),e.fsMediaquery("bind",n.rawGuid,n.mq,{enter:function(){s.call(n.$el,n)},leave:function(){o.call(n.$el,n)}}),a(),n.carouselClasses.push(F.enabled),n.carouselClasses.push(F.animated)}function r(t){Y.clearTimer(t.autoTimer),Y.clearTimer(t.resizeTimer),o.call(this,t),e.fsMediaquery("unbind",t.rawGuid),t.id!==t.ariaID&&this.attr("id",""),t.$controlItems.removeClass([D.control,F.control_previous,D.control_next,D.visible].join(" ")).off(W.namespace),t.$images.off(W.namespace),t.$canister.fsTouch("destroy"),t.$items.removeClass([F.item,F.visible,D.item_previous,D.item_next].join(" ")).unwrap().unwrap().unwrap().unwrap(),t.pagination&&t.$pagination.remove(),t.controls&&!t.customControls&&t.$controls.remove(),t.customControls&&t.$controls.removeClass([F.controls,F.controls_custom,F.visible].join(" ")),this.removeClass(t.carouselClasses.join(" ")),a()}function o(e){e.enabled&&(Y.clearTimer(e.autoTimer),e.enabled=!1,e.$subordinate.off(W.update),this.removeClass([F.enabled,F.animated].join(" ")).off(W.namespace),e.$canister.fsTouch("destroy").off(W.namespace).attr("style","").css(N,"none"),e.$items.css({width:"",height:""}).removeClass([F.visible,D.item_previous,D.item_next].join(" ")),e.$images.off(W.namespace),e.$controlItems.off(W.namespace),e.$pagination.html(""),w(e),e.useMargin?e.$canister.css({marginLeft:""}):e.$canister.css(X,""),e.index=0)}function s(e){e.enabled||(e.enabled=!0,this.addClass(F.enabled).on(W.click,D.page,e,y),e.$controlItems.on(W.click,e,v),e.$items.on(W.click,e,j),e.$subordinate.on(W.update,e,A),A({data:e},0),e.$canister.fsTouch({axis:"x",pan:!0,swipe:!0}).on(W.panStart,e,I).on(W.pan,e,k).on(W.panEnd,e,T).on(W.swipe,e,M).css(N,""),c(e),e.$images.on(W.load,e,g),e.autoAdvance&&(e.autoTimer=Y.startTimer(e.autoTimer,e.autoTime,function(){m(e)},!0)),l.call(this,e))}function l(e){if(e.enabled){var t,n,a,i,r,o,s,l,c,u;if(e.count=e.$items.length,e.count<1)return w(e),void e.$canister.css({height:""});for(this.removeClass(F.animated),e.containerWidth=e.$container.outerWidth(!1),e.visible=x(e),e.perPage=e.paged?1:e.visible,e.itemMarginLeft=parseInt(e.$items.eq(0).css("marginLeft")),e.itemMarginRight=parseInt(e.$items.eq(0).css("marginRight")),e.itemMargin=e.itemMarginLeft+e.itemMarginRight,isNaN(e.itemMargin)&&(e.itemMargin=0),e.itemWidth=(e.containerWidth-e.itemMargin*(e.visible-1))/e.visible,e.itemHeight=0,e.pageWidth=e.paged?e.itemWidth:e.containerWidth,e.pageCount=Math.ceil(e.count/e.perPage),e.canisterWidth=e.single?e.containerWidth:(e.pageWidth+e.itemMargin)*e.pageCount,e.$canister.css({width:e.matchWidth?e.canisterWidth:1e6,height:""}),e.$items.css({width:e.matchWidth?e.itemWidth:"",height:""}).removeClass([F.visible,F.item_previous,F.item_next].join(" ")),e.pages=[],n=0,a=0;n<e.count;n+=e.perPage){for(o=e.$items.slice(n,n+e.perPage),l=0,c=0,o.length<e.perPage&&(o=0===n?e.$items:e.$items.slice(e.$items.length-e.perPage)),s=e.rtl?o.eq(o.length-1):o.eq(0),u=s.position().left,i=0;i<o.length;i++)r=o.eq(i).outerWidth(!0),t=o.eq(i).outerHeight(),l+=r,t>c&&(c=t);e.pages.push({left:e.rtl?u-(e.canisterWidth-l):u,height:c,width:l,$items:o}),c>e.itemHeight&&(e.itemHeight=c),a++}e.paged&&(e.pageCount-=e.count%e.visible),e.pageCount<=0&&(e.pageCount=1),e.maxMove=-e.pages[e.pageCount-1].left,e.autoHeight?e.$canister.css({height:e.pages[0].height}):e.matchHeight&&e.$items.css({height:e.itemHeight});var d="";for(n=0;n<e.pageCount;n++)d+='<button type="button" class="'+F.page+'">'+(n+1)+"</button>";e.$pagination.html(d),e.pageCount<=1?w(e):C(e),e.$paginationItems=e.$el.find(D.page),b(e,e.index,!1),setTimeout(function(){e.$el.addClass(F.animated)},5)}}function c(e){e.$items=e.$canister.children().not(":hidden").addClass(F.item),e.$images=e.$canister.find("img"),e.totalImages=e.$images.length}function u(e){e.enabled&&d.call(this,e,!1)}function d(e,t){e.$images.off(W.namespace),t!==!1&&e.$canister.html(t),e.index=0,c(e),l.call(this,e)}function p(e,t,n,a,i){e.enabled&&(Y.clearTimer(e.autoTimer),"undefined"==typeof i&&(i=!0),b(e,t-1,i,n,a))}function f(e){var t=e.index-1;e.infinite&&0>t&&(t=e.pageCount-1),b(e,t)}function h(e){var t=e.index+1;e.infinite&&t>=e.pageCount&&(t=0),b(e,t)}function g(e){var t=e.data;t.resizeTimer=Y.startTimer(t.resizeTimer,20,function(){l.call(t.$el,t)})}function m(e){var t=e.index+1;t>=e.pageCount&&(t=0),b(e,t)}function v(t){Y.killEvent(t);var n=t.data,a=n.index+(e(t.currentTarget).hasClass(F.control_next)?1:-1);Y.clearTimer(n.autoTimer),b(n,a)}function y(t){Y.killEvent(t);var n=t.data,a=n.$paginationItems.index(e(t.currentTarget));Y.clearTimer(n.autoTimer),b(n,a)}function b(t,n,a,i,r){if(0>n&&(n=t.infinite?t.pageCount-1:0),n>=t.pageCount&&(n=t.infinite?0:t.pageCount-1),!(t.count<1)){t.pages[n]&&(t.leftPosition=-t.pages[n].left),t.leftPosition=z(t,t.leftPosition),t.useMargin?t.$canister.css({marginLeft:t.leftPosition}):a===!1?(t.$canister.css(N,"none").css(X,"translateX("+t.leftPosition+"px)"),setTimeout(function(){t.$canister.css(N,"")},5)):t.$canister.css(X,"translateX("+t.leftPosition+"px)"),t.$items.removeClass([F.visible,F.item_previous,F.item_next].join(" "));for(var o=0,s=t.pages.length;s>o;o++)o===n?t.pages[o].$items.addClass(F.visible).attr("aria-hidden","false"):t.pages[o].$items.not(t.pages[n].$items).addClass(n>o?F.item_previous:F.item_next).attr("aria-hidden","true");t.autoHeight&&t.$canister.css({height:t.pages[n].height}),a!==!1&&i!==!0&&n!==t.index&&(t.infinite||n>-1&&n<t.pageCount)&&t.$el.trigger(W.update,[n]),t.index=n,t.linked&&r!==!0&&e(t.linked).not(t.$el)[U]("jump",t.index+1,!0,!0),S(t)}}function w(e){e.$controls.removeClass(F.visible),e.$controlItems.removeClass(F.visible),e.$pagination.removeClass(F.visible)}function C(e){e.$controls.addClass(F.visible),e.$controlItems.addClass(F.visible),e.$pagination.addClass(F.visible)}function S(e){e.$paginationItems.removeClass(F.active).eq(e.index).addClass(F.active),e.infinite?e.$controlItems.addClass(F.visible):e.pageCount<1?e.$controlItems.removeClass(F.visible):(e.$controlItems.addClass(F.visible),e.index<=0?e.$controlPrevious.removeClass(F.visible):(e.index>=e.pageCount-1||!e.single&&e.leftPosition===e.maxMove)&&e.$controlNext.removeClass(F.visible))}function x(n){var a=1;if(n.single)return a;if("array"===e.type(n.show))for(var i in n.show)n.show.hasOwnProperty(i)&&(t.support.nativeMatchMedia?n.show[i].mq.matches&&(a=n.show[i].count):n.show[i].width<t.fallbackWidth&&(a=n.show[i].count));else a=n.show;return n.fill&&n.count<a?n.count:a}function I(t,n){var a=t.data;if(Y.clearTimer(a.autoTimer),!a.single){if(a.useMargin)a.leftPosition=parseInt(a.$canister.css("marginLeft"));else{var i=a.$canister.css(X).split(",");a.leftPosition=parseInt(i[4])}if(a.$canister.css(N,"none"),k(t),a.linked&&n!==!0){var r=t.deltaX/a.pageWidth;a.rtl&&(r*=-1),e(a.linked).not(a.$el)[U]("panStart",r)}}a.isTouching=!0}function k(t,n){var a=t.data;if(!a.single&&(a.touchLeft=z(a,a.leftPosition+t.deltaX),a.useMargin?a.$canister.css({marginLeft:a.touchLeft}):a.$canister.css(X,"translateX("+a.touchLeft+"px)"),a.linked&&n!==!0)){var i=t.deltaX/a.pageWidth;a.rtl&&(i*=-1),e(a.linked).not(a.$el)[U]("pan",i)}}function T(t,n){var a=t.data,i=Math.abs(t.deltaX),r=L(a,t),o=!1;if(a.didPan=!1,!a.single){var s,l,c=Math.abs(a.touchLeft),u=!1,d=a.rtl?"right":"left";if(t.directionX===d)for(s=0,l=a.pages.length;l>s;s++)u=a.pages[s],c>Math.abs(u.left)+20&&(o=s+1);else for(s=a.pages.length-1,l=0;s>=l;s--)u=a.pages[s],c<Math.abs(u.left)&&(o=s-1)}o===!1&&(o=50>i?a.index:a.index+r),o!==a.index&&(a.didPan=!0),a.linked&&n!==!0&&e(a.linked).not(a.$el)[U]("panEnd",o),_(a,o)}function P(e,t){if(Y.clearTimer(e.autoTimer),!e.single){if(e.rtl&&(t*=-1),e.useMargin)e.leftPosition=parseInt(e.$canister.css("marginLeft"));else{var n=e.$canister.css(X).split(",");e.leftPosition=parseInt(n[4])}e.$canister.css(N,"none");var a={data:e,deltaX:e.pageWidth*t};k(a,!0)}e.isTouching=!0}function H(e,t){if(!e.single){e.rtl&&(t*=-1);var n=e.pageWidth*t;e.touchLeft=z(e,e.leftPosition+n),e.useMargin?e.$canister.css({marginLeft:e.touchLeft}):e.$canister.css(X,"translateX("+e.touchLeft+"px)")}}function E(e,t){_(e,t,!0)}function M(t,n){var a=t.data,i=L(a,t),r=a.index+i;a.linked&&n!==!0&&e(a.linked).not(a.$el)[U]("swipe",t.directionX),_(a,r)}function O(e,t){var n={data:e,directionX:t};M(n,!0)}function _(e,t){e.$canister.css(N,""),b(e,t),e.isTouching=!1}function j(t){var n=t.data,a=e(t.currentTarget);if(!n.didPan&&(a.trigger(W.itemClick),n.controller)){var i=n.$items.index(a);A(t,i),n.$subordinate[U]("jump",i+1,!0)}}function A(e,t){var n=e.data;if(n.controller){var a=n.$items.eq(t);n.$items.removeClass(F.active),a.addClass(F.active);for(var i=0;i<n.pageCount;i++)if(n.pages[i].$items.is(a)){b(n,i,!0,!0);break}}}function z(e,t){return isNaN(t)?t=0:e.rtl?(t>e.maxMove&&(t=e.maxMove),0>t&&(t=0)):(t<e.maxMove&&(t=e.maxMove),
t>0&&(t=0)),t}function L(e,t){return e.rtl?"right"===t.directionX?1:-1:"left"===t.directionX?1:-1}var B=t.Plugin("carousel",{widget:!0,defaults:{autoAdvance:!1,autoHeight:!1,autoTime:8e3,contained:!0,controls:!0,customClass:"",fill:!1,infinite:!1,labels:{next:"Next",previous:"Previous"},matchHeight:!1,matchWidth:!0,maxWidth:1/0,minWidth:"0px",paged:!1,pagination:!0,rtl:!1,show:1,single:!1,theme:"fs-light",useMargin:!1},classes:["ltr","rtl","viewport","wrapper","container","canister","item","item_previous","item_next","controls","controls_custom","control","control_previous","control_next","pagination","page","animated","enabled","visible","active","auto_height","contained","single"],events:{itemClick:"itemClick",update:"update"},methods:{_construct:i,_destruct:r,_resize:n,disable:o,enable:s,jump:p,previous:f,next:h,reset:u,resize:l,update:d,panStart:P,pan:H,panEnd:E,swipe:O}}),q=B.namespace,U=B.namespaceClean,D=B.classes,F=D.raw,W=B.events,Y=B.functions,R=[],X=t.transform,N=t.transition}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./transition"],e):e(jQuery,Formstone)}(function(e,t){"use strict";function n(e){I.iterate.call(T,v)}function a(){T=e(C.base)}function i(t){t.youTubeGuid=0,t.$container=e('<div class="'+S.container+'"></div>').appendTo(this),t.thisClasses=[S.base,t.customClass],this.addClass(t.thisClasses.join(" "));var n=t.source;t.source=null,o(t,n,!0),a()}function r(e){e.$container.remove(),this.removeClass(e.thisClasses.join(" ")).off(x.namespace),a()}function o(t,n,a){if(n!==t.source){if(t.source=n,t.responsive=!1,t.isYouTube=!1,"object"===e.type(n)&&"string"===e.type(n.video)){var i=n.video.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i);i&&i.length>=1&&(t.isYouTube=!0,t.videoId=i[1])}var r=!t.isYouTube&&"object"===e.type(n)&&(n.hasOwnProperty("mp4")||n.hasOwnProperty("ogg")||n.hasOwnProperty("webm"));if(t.video=t.isYouTube||r,t.playing=!1,t.isYouTube)t.playerReady=!1,t.posterLoaded=!1,u(t,n,a);else if("object"===e.type(n)&&n.hasOwnProperty("poster"))c(t,n,a);else{var o=n;if("object"===e.type(n)){var d,p=[],f=[];for(d in n)n.hasOwnProperty(d)&&f.push(d);f.sort(I.sortAsc);for(d in f)f.hasOwnProperty(d)&&p.push({width:parseInt(f[d]),url:n[f[d]],mq:window.matchMedia("(min-width: "+parseInt(f[d])+"px)")});t.responsive=!0,t.sources=p,o=s(t)}l(t,o,!1,a)}}else t.$el.trigger(x.loaded)}function s(e){var n=e.source;if(e.responsive){n=e.sources[0].url;for(var a in e.sources)e.sources.hasOwnProperty(a)&&(t.support.nativeMatchMedia?e.sources[a].mq.matches&&(n=e.sources[a].url):e.sources[a].width<t.fallbackWidth&&(n=e.sources[a].url))}return n}function l(t,n,a,i){var r=[S.media,S.image,i!==!0?S.animated:""].join(" "),o=e('<div class="'+r+'" aria-hidden="true"><img alt=""></div>'),s=o.find("img"),l=n;s.one(x.load,function(){P&&o.addClass(S["native"]).css({backgroundImage:"url('"+l+"')"}),o.fsTransition({property:"opacity"},function(){a||d(t)}).css({opacity:1}),y(t),a&&!i||t.$el.trigger(x.loaded)}).attr("src",l),t.responsive&&o.addClass(S.responsive),t.$container.append(o),(s[0].complete||4===s[0].readyState)&&s.trigger(x.load),t.currentSource=l}function c(n,a,i){if(n.source&&n.source.poster&&(l(n,n.source.poster,!0,!0),i=!1),!t.isMobile){var r=[S.media,S.video,i!==!0?S.animated:""].join(" "),o='<div class="'+r+'" aria-hidden="true">';o+="<video",n.loop&&(o+=" loop"),n.mute&&(o+=" muted"),o+=">",n.source.webm&&(o+='<source src="'+n.source.webm+'" type="video/webm" />'),n.source.mp4&&(o+='<source src="'+n.source.mp4+'" type="video/mp4" />'),n.source.ogg&&(o+='<source src="'+n.source.ogg+'" type="video/ogg" />'),o+="</video>",o+="</div>";var s=e(o),c=s.find("video");c.one(x.loadedMetaData,function(e){s.fsTransition({property:"opacity"},function(){d(n)}).css({opacity:1}),y(n),n.$el.trigger(x.loaded),n.autoPlay&&h(n)}),n.$container.append(s)}}function u(n,a,i){if(!n.videoId){var r=a.match(/^.*(?:youtu.be\/|v\/|e\/|u\/\w+\/|embed\/|v=)([^#\&\?]*).*/);n.videoId=r[1]}if(n.posterLoaded||(n.source.poster||(n.source.poster="http://img.youtube.com/vi/"+n.videoId+"/0.jpg"),n.posterLoaded=!0,l(n,n.source.poster,!0,i),i=!1),!t.isMobile)if(e("script[src*='youtube.com/iframe_api']").length||e("head").append('<script src="//www.youtube.com/iframe_api"></script>'),H){var o=n.guid+"_"+n.youTubeGuid++,s=[S.media,S.embed,i!==!0?S.animated:""].join(" "),c='<div class="'+s+'" aria-hidden="true">';c+='<div id="'+o+'"></div>',c+="</div>";var u=e(c),p=e.extend(!0,{},{controls:0,rel:0,showinfo:0,wmode:"transparent",enablejsapi:1,version:3,playerapiid:o,loop:n.loop?1:0,autoplay:1,origin:k.location.protocol+"//"+k.location.host},n.youtubeOptions);p.autoplay=1,n.$container.append(u),n.player&&(n.oldPlayer=n.player,n.player=null),n.player=new k.YT.Player(o,{videoId:n.videoId,playerVars:p,events:{onReady:function(e){n.playerReady=!0,n.mute&&n.player.mute(),n.autoPlay||n.player.pauseVideo()},onStateChange:function(e){n.playing||e.data!==k.YT.PlayerState.PLAYING?n.loop&&n.playing&&e.data===k.YT.PlayerState.ENDED&&n.player.playVideo():(n.playing=!0,u.fsTransition({property:"opacity"},function(){d(n)}).css({opacity:1}),y(n),n.$el.trigger(x.loaded)),n.$el.find(C.embed).addClass(S.ready)},onPlaybackQualityChange:function(e){},onPlaybackRateChange:function(e){},onError:function(e){},onApiChange:function(e){}}}),y(n)}else E.push({data:n,source:a})}function d(e){var t=e.$container.find(C.media);t.length>=1&&(t.not(":last").remove(),e.oldPlayer=null)}function p(e){var t=e.$container.find(C.media);t.length>=1&&t.fsTransition({property:"opacity"},function(){t.remove(),delete e.source}).css({opacity:0})}function f(e){if(e.video&&e.playing){if(e.isYouTube)e.playerReady?e.player.pauseVideo():e.autoPlay=!1;else{var t=e.$container.find("video");t.length&&t[0].pause()}e.playing=!1}}function h(e){if(e.video&&!e.playing)if(e.isYouTube)e.playerReady?e.player.playVideo():e.autoPlay=!0;else{var t=e.$container.find("video");t.length&&t[0].play(),e.playing=!0}}function g(e){if(e.video)if(e.isYouTube&&e.playerReady)e.player.mute();else{var t=e.$container.find("video");t.length&&(t[0].muted=!0)}e.mute=!0}function m(e){if(e.video){if(e.isYouTube&&e.playerReady)e.player.unMute();else{var t=e.$container.find("video");t.length&&(t[0].muted=!1)}e.playing=!0}e.mute=!1}function v(e){if(e.responsive){var t=s(e);t!==e.currentSource?l(e,t,!1,!0):y(e)}else y(e)}function y(e){for(var t=e.$container.find(C.media),n=0,a=t.length;a>n;n++){var i=t.eq(n),r=e.isYouTube?"iframe":i.find("video").length?"video":"img",o=i.find(r);if(o.length&&("img"!==r||!P)){var s=e.$el.outerWidth(),l=e.$el.outerHeight(),c=b(e,o);e.width=c.width,e.height=c.height,e.left=0,e.top=0;var u=e.isYouTube?e.embedRatio:e.width/e.height;e.height=l,e.width=e.height*u,e.width<s&&(e.width=s,e.height=e.width/u),e.left=-(e.width-s)/2,e.top=-(e.height-l)/2,i.css({height:e.height,width:e.width,left:e.left,top:e.top})}}}function b(t,n){if(t.isYouTube)return{height:500,width:500/t.embedRatio};if(n.is("img")){var a=n[0];if("undefined"!==e.type(a.naturalHeight))return{height:a.naturalHeight,width:a.naturalWidth};var i=new Image;return i.src=a.src,{height:i.height,width:i.width}}return{height:n[0].videoHeight,width:n[0].videoWidth}}var w=t.Plugin("background",{widget:!0,defaults:{autoPlay:!0,customClass:"",embedRatio:1.777777,loop:!0,mute:!0,source:null,youtubeOptions:{}},classes:["container","media","animated","responsive","native","fixed","ready"],events:{loaded:"loaded",ready:"ready",loadedMetaData:"loadedmetadata"},methods:{_construct:i,_destruct:r,_resize:n,play:h,pause:f,mute:g,unmute:m,resize:y,load:o,unload:p}}),C=w.classes,S=C.raw,x=w.events,I=w.functions,k=t.window,T=[],P="backgroundSize"in t.document.documentElement.style,H=!1,E=[];k.onYouTubeIframeAPIReady=function(){H=!0;for(var e in E)E.hasOwnProperty(e)&&u(E[e].data,E[e].source);E=[]}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):window.jQuery||window.Zepto)}(function(e){var t,n,a,i,r,o,s,l="Close",c="BeforeClose",u="AfterClose",d="BeforeAppend",p="MarkupParse",f="Open",h="Change",g="mfp",m="."+g,v="mfp-ready",y="mfp-removing",b="mfp-prevent-close",w=function(){},C=!!window.jQuery,S=e(window),x=function(e,n){t.ev.on(g+e+m,n)},I=function(t,n,a,i){var r=document.createElement("div");return r.className="mfp-"+t,a&&(r.innerHTML=a),i?n&&n.appendChild(r):(r=e(r),n&&r.appendTo(n)),r},k=function(n,a){t.ev.triggerHandler(g+n,a),t.st.callbacks&&(n=n.charAt(0).toLowerCase()+n.slice(1),t.st.callbacks[n]&&t.st.callbacks[n].apply(t,e.isArray(a)?a:[a]))},T=function(n){return n===s&&t.currTemplate.closeBtn||(t.currTemplate.closeBtn=e(t.st.closeMarkup.replace("%title%",t.st.tClose)),s=n),t.currTemplate.closeBtn},P=function(){e.magnificPopup.instance||(t=new w,t.init(),e.magnificPopup.instance=t)},H=function(){var e=document.createElement("p").style,t=["ms","O","Moz","Webkit"];if(void 0!==e.transition)return!0;for(;t.length;)if(t.pop()+"Transition"in e)return!0;return!1};w.prototype={constructor:w,init:function(){var n=navigator.appVersion;t.isIE7=-1!==n.indexOf("MSIE 7."),t.isIE8=-1!==n.indexOf("MSIE 8."),t.isLowIE=t.isIE7||t.isIE8,t.isAndroid=/android/gi.test(n),t.isIOS=/iphone|ipad|ipod/gi.test(n),t.supportsTransition=H(),t.probablyMobile=t.isAndroid||t.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),i=e(document),t.popupsCache={}},open:function(n){a||(a=e(document.body));var r;if(n.isObj===!1){t.items=n.items.toArray(),t.index=0;var s,l=n.items;for(r=0;l.length>r;r++)if(s=l[r],s.parsed&&(s=s.el[0]),s===n.el[0]){t.index=r;break}}else t.items=e.isArray(n.items)?n.items:[n.items],t.index=n.index||0;if(t.isOpen)return void t.updateItemHTML();t.types=[],o="",t.ev=n.mainEl&&n.mainEl.length?n.mainEl.eq(0):i,n.key?(t.popupsCache[n.key]||(t.popupsCache[n.key]={}),t.currTemplate=t.popupsCache[n.key]):t.currTemplate={},t.st=e.extend(!0,{},e.magnificPopup.defaults,n),t.fixedContentPos="auto"===t.st.fixedContentPos?!t.probablyMobile:t.st.fixedContentPos,t.st.modal&&(t.st.closeOnContentClick=!1,t.st.closeOnBgClick=!1,t.st.showCloseBtn=!1,t.st.enableEscapeKey=!1),t.bgOverlay||(t.bgOverlay=I("bg").on("click"+m,function(){t.close()}),t.wrap=I("wrap").attr("tabindex",-1).on("click"+m,function(e){t._checkIfClose(e.target)&&t.close()}),t.container=I("container",t.wrap)),t.contentContainer=I("content"),t.st.preloader&&(t.preloader=I("preloader",t.container,t.st.tLoading));var c=e.magnificPopup.modules;for(r=0;c.length>r;r++){var u=c[r];u=u.charAt(0).toUpperCase()+u.slice(1),t["init"+u].call(t)}k("BeforeOpen"),t.st.showCloseBtn&&(t.st.closeBtnInside?(x(p,function(e,t,n,a){n.close_replaceWith=T(a.type)}),o+=" mfp-close-btn-in"):t.wrap.append(T())),t.st.alignTop&&(o+=" mfp-align-top"),t.fixedContentPos?t.wrap.css({overflow:t.st.overflowY,overflowX:"hidden",overflowY:t.st.overflowY}):t.wrap.css({top:S.scrollTop(),position:"absolute"}),(t.st.fixedBgPos===!1||"auto"===t.st.fixedBgPos&&!t.fixedContentPos)&&t.bgOverlay.css({height:i.height(),position:"absolute"}),t.st.enableEscapeKey&&i.on("keyup"+m,function(e){27===e.keyCode&&t.close()}),S.on("resize"+m,function(){t.updateSize()}),t.st.closeOnContentClick||(o+=" mfp-auto-cursor"),o&&t.wrap.addClass(o);var d=t.wH=S.height(),h={};if(t.fixedContentPos&&t._hasScrollBar(d)){var g=t._getScrollbarSize();g&&(h.marginRight=g)}t.fixedContentPos&&(t.isIE7?e("body, html").css("overflow","hidden"):h.overflow="hidden");var y=t.st.mainClass;return t.isIE7&&(y+=" mfp-ie7"),y&&t._addClassToMFP(y),t.updateItemHTML(),k("BuildControls"),e("html").css(h),t.bgOverlay.add(t.wrap).prependTo(t.st.prependTo||a),t._lastFocusedEl=document.activeElement,setTimeout(function(){t.content?(t._addClassToMFP(v),t._setFocus()):t.bgOverlay.addClass(v),i.on("focusin"+m,t._onFocusIn)},16),t.isOpen=!0,t.updateSize(d),k(f),n},close:function(){t.isOpen&&(k(c),t.isOpen=!1,t.st.removalDelay&&!t.isLowIE&&t.supportsTransition?(t._addClassToMFP(y),setTimeout(function(){t._close()},t.st.removalDelay)):t._close())},_close:function(){k(l);var n=y+" "+v+" ";if(t.bgOverlay.detach(),t.wrap.detach(),t.container.empty(),t.st.mainClass&&(n+=t.st.mainClass+" "),t._removeClassFromMFP(n),t.fixedContentPos){var a={marginRight:""};t.isIE7?e("body, html").css("overflow",""):a.overflow="",e("html").css(a)}i.off("keyup"+m+" focusin"+m),t.ev.off(m),t.wrap.attr("class","mfp-wrap").removeAttr("style"),t.bgOverlay.attr("class","mfp-bg"),t.container.attr("class","mfp-container"),!t.st.showCloseBtn||t.st.closeBtnInside&&t.currTemplate[t.currItem.type]!==!0||t.currTemplate.closeBtn&&t.currTemplate.closeBtn.detach(),t._lastFocusedEl&&e(t._lastFocusedEl).focus(),t.currItem=null,t.content=null,t.currTemplate=null,t.prevHeight=0,k(u)},updateSize:function(e){if(t.isIOS){var n=document.documentElement.clientWidth/window.innerWidth,a=window.innerHeight*n;t.wrap.css("height",a),t.wH=a}else t.wH=e||S.height();t.fixedContentPos||t.wrap.css("height",t.wH),k("Resize")},updateItemHTML:function(){var n=t.items[t.index];t.contentContainer.detach(),t.content&&t.content.detach(),n.parsed||(n=t.parseEl(t.index));var a=n.type;if(k("BeforeChange",[t.currItem?t.currItem.type:"",a]),t.currItem=n,!t.currTemplate[a]){var i=t.st[a]?t.st[a].markup:!1;k("FirstMarkupParse",i),t.currTemplate[a]=i?e(i):!0}r&&r!==n.type&&t.container.removeClass("mfp-"+r+"-holder");var o=t["get"+a.charAt(0).toUpperCase()+a.slice(1)](n,t.currTemplate[a]);t.appendContent(o,a),n.preloaded=!0,k(h,n),r=n.type,t.container.prepend(t.contentContainer),k("AfterChange")},appendContent:function(e,n){t.content=e,e?t.st.showCloseBtn&&t.st.closeBtnInside&&t.currTemplate[n]===!0?t.content.find(".mfp-close").length||t.content.append(T()):t.content=e:t.content="",k(d),t.container.addClass("mfp-"+n+"-holder"),t.contentContainer.append(t.content)},parseEl:function(n){var a,i=t.items[n];if(i.tagName?i={el:e(i)}:(a=i.type,i={data:i,src:i.src}),i.el){for(var r=t.types,o=0;r.length>o;o++)if(i.el.hasClass("mfp-"+r[o])){a=r[o];break}i.src=i.el.attr("data-mfp-src"),i.src||(i.src=i.el.attr("href"))}return i.type=a||t.st.type||"inline",i.index=n,i.parsed=!0,t.items[n]=i,k("ElementParse",i),t.items[n]},addGroup:function(e,n){var a=function(a){a.mfpEl=this,t._openClick(a,e,n)};n||(n={});var i="click.magnificPopup";n.mainEl=e,n.items?(n.isObj=!0,e.off(i).on(i,a)):(n.isObj=!1,n.delegate?e.off(i).on(i,n.delegate,a):(n.items=e,e.off(i).on(i,a)))},_openClick:function(n,a,i){var r=void 0!==i.midClick?i.midClick:e.magnificPopup.defaults.midClick;if(r||2!==n.which&&!n.ctrlKey&&!n.metaKey){var o=void 0!==i.disableOn?i.disableOn:e.magnificPopup.defaults.disableOn;if(o)if(e.isFunction(o)){if(!o.call(t))return!0}else if(o>S.width())return!0;n.type&&(n.preventDefault(),t.isOpen&&n.stopPropagation()),i.el=e(n.mfpEl),i.delegate&&(i.items=a.find(i.delegate)),t.open(i)}},updateStatus:function(e,a){if(t.preloader){n!==e&&t.container.removeClass("mfp-s-"+n),a||"loading"!==e||(a=t.st.tLoading);var i={status:e,text:a};k("UpdateStatus",i),e=i.status,a=i.text,t.preloader.html(a),t.preloader.find("a").on("click",function(e){e.stopImmediatePropagation()}),t.container.addClass("mfp-s-"+e),n=e}},_checkIfClose:function(n){if(!e(n).hasClass(b)){var a=t.st.closeOnContentClick,i=t.st.closeOnBgClick;if(a&&i)return!0;if(!t.content||e(n).hasClass("mfp-close")||t.preloader&&n===t.preloader[0])return!0;if(n===t.content[0]||e.contains(t.content[0],n)){if(a)return!0}else if(i&&e.contains(document,n))return!0;return!1}},_addClassToMFP:function(e){t.bgOverlay.addClass(e),t.wrap.addClass(e)},_removeClassFromMFP:function(e){this.bgOverlay.removeClass(e),t.wrap.removeClass(e)},_hasScrollBar:function(e){return(t.isIE7?i.height():document.body.scrollHeight)>(e||S.height())},_setFocus:function(){(t.st.focus?t.content.find(t.st.focus).eq(0):t.wrap).focus()},_onFocusIn:function(n){return n.target===t.wrap[0]||e.contains(t.wrap[0],n.target)?void 0:(t._setFocus(),!1)},_parseMarkup:function(t,n,a){var i;a.data&&(n=e.extend(a.data,n)),k(p,[t,n,a]),e.each(n,function(e,n){if(void 0===n||n===!1)return!0;if(i=e.split("_"),i.length>1){var a=t.find(m+"-"+i[0]);if(a.length>0){var r=i[1];"replaceWith"===r?a[0]!==n[0]&&a.replaceWith(n):"img"===r?a.is("img")?a.attr("src",n):a.replaceWith('<img src="'+n+'" class="'+a.attr("class")+'" />'):a.attr(i[1],n)}}else t.find(m+"-"+e).html(n)})},_getScrollbarSize:function(){if(void 0===t.scrollbarSize){var e=document.createElement("div");e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e),t.scrollbarSize=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return t.scrollbarSize}},e.magnificPopup={instance:null,proto:w.prototype,modules:[],open:function(t,n){return P(),t=t?e.extend(!0,{},t):{},t.isObj=!0,t.index=n||0,this.instance.open(t)},close:function(){return e.magnificPopup.instance&&e.magnificPopup.instance.close()},registerModule:function(t,n){n.options&&(e.magnificPopup.defaults[t]=n.options),e.extend(this.proto,n.proto),this.modules.push(t)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},e.fn.magnificPopup=function(n){P();var a=e(this);if("string"==typeof n)if("open"===n){var i,r=C?a.data("magnificPopup"):a[0].magnificPopup,o=parseInt(arguments[1],10)||0;r.items?i=r.items[o]:(i=a,r.delegate&&(i=i.find(r.delegate)),i=i.eq(o)),t._openClick({mfpEl:i},a,r)}else t.isOpen&&t[n].apply(t,Array.prototype.slice.call(arguments,1));else n=e.extend(!0,{},n),C?a.data("magnificPopup",n):a[0].magnificPopup=n,t.addGroup(a,n);return a};var E,M,O,_="inline",j=function(){O&&(M.after(O.addClass(E)).detach(),O=null)};e.magnificPopup.registerModule(_,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){t.types.push(_),x(l+"."+_,function(){j()})},getInline:function(n,a){if(j(),n.src){var i=t.st.inline,r=e(n.src);if(r.length){var o=r[0].parentNode;o&&o.tagName&&(M||(E=i.hiddenClass,M=I(E),E="mfp-"+E),O=r.after(M).detach().removeClass(E)),t.updateStatus("ready")}else t.updateStatus("error",i.tNotFound),r=e("<div>");return n.inlineElement=r,r}return t.updateStatus("ready"),t._parseMarkup(a,{},n),a}}});var A,z="ajax",L=function(){A&&a.removeClass(A)},B=function(){L(),t.req&&t.req.abort()};e.magnificPopup.registerModule(z,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){t.types.push(z),A=t.st.ajax.cursor,x(l+"."+z,B),x("BeforeChange."+z,B)},getAjax:function(n){A&&a.addClass(A),t.updateStatus("loading");var i=e.extend({url:n.src,success:function(a,i,r){var o={data:a,xhr:r};k("ParseAjax",o),t.appendContent(e(o.data),z),n.finished=!0,L(),t._setFocus(),setTimeout(function(){t.wrap.addClass(v)},16),t.updateStatus("ready"),k("AjaxContentAdded")},error:function(){L(),n.finished=n.loadError=!0,t.updateStatus("error",t.st.ajax.tError.replace("%url%",n.src))}},t.st.ajax.settings);return t.req=e.ajax(i),""}}});var q,U=function(n){if(n.data&&void 0!==n.data.title)return n.data.title;var a=t.st.image.titleSrc;if(a){if(e.isFunction(a))return a.call(t,n);if(n.el)return n.el.attr(a)||""}return""};e.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var e=t.st.image,n=".image";t.types.push("image"),x(f+n,function(){"image"===t.currItem.type&&e.cursor&&a.addClass(e.cursor)}),x(l+n,function(){e.cursor&&a.removeClass(e.cursor),S.off("resize"+m)}),x("Resize"+n,t.resizeImage),t.isLowIE&&x("AfterChange",t.resizeImage)},resizeImage:function(){var e=t.currItem;if(e&&e.img&&t.st.image.verticalFit){var n=0;t.isLowIE&&(n=parseInt(e.img.css("padding-top"),10)+parseInt(e.img.css("padding-bottom"),10)),e.img.css("max-height",t.wH-n)}},_onImageHasSize:function(e){e.img&&(e.hasSize=!0,q&&clearInterval(q),e.isCheckingImgSize=!1,k("ImageHasSize",e),e.imgHidden&&(t.content&&t.content.removeClass("mfp-loading"),e.imgHidden=!1))},findImageSize:function(e){var n=0,a=e.img[0],i=function(r){q&&clearInterval(q),q=setInterval(function(){return a.naturalWidth>0?void t._onImageHasSize(e):(n>200&&clearInterval(q),n++,void(3===n?i(10):40===n?i(50):100===n&&i(500)))},r)};i(1)},getImage:function(n,a){var i=0,r=function(){n&&(n.img[0].complete?(n.img.off(".mfploader"),n===t.currItem&&(t._onImageHasSize(n),t.updateStatus("ready")),n.hasSize=!0,n.loaded=!0,k("ImageLoadComplete")):(i++,200>i?setTimeout(r,100):o()))},o=function(){n&&(n.img.off(".mfploader"),n===t.currItem&&(t._onImageHasSize(n),t.updateStatus("error",s.tError.replace("%url%",n.src))),n.hasSize=!0,n.loaded=!0,n.loadError=!0)},s=t.st.image,l=a.find(".mfp-img");if(l.length){var c=document.createElement("img");c.className="mfp-img",n.el&&n.el.find("img").length&&(c.alt=n.el.find("img").attr("alt")),n.img=e(c).on("load.mfploader",r).on("error.mfploader",o),c.src=n.src,l.is("img")&&(n.img=n.img.clone()),c=n.img[0],c.naturalWidth>0?n.hasSize=!0:c.width||(n.hasSize=!1)}return t._parseMarkup(a,{title:U(n),img_replaceWith:n.img},n),t.resizeImage(),n.hasSize?(q&&clearInterval(q),n.loadError?(a.addClass("mfp-loading"),t.updateStatus("error",s.tError.replace("%url%",n.src))):(a.removeClass("mfp-loading"),t.updateStatus("ready")),a):(t.updateStatus("loading"),n.loading=!0,n.hasSize||(n.imgHidden=!0,a.addClass("mfp-loading"),t.findImageSize(n)),a)}}});var D,F=function(){return void 0===D&&(D=void 0!==document.createElement("p").style.MozTransform),D};e.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(e){return e.is("img")?e:e.find("img")}},proto:{initZoom:function(){var e,n=t.st.zoom,a=".zoom";if(n.enabled&&t.supportsTransition){var i,r,o=n.duration,s=function(e){var t=e.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),a="all "+n.duration/1e3+"s "+n.easing,i={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},r="transition";return i["-webkit-"+r]=i["-moz-"+r]=i["-o-"+r]=i[r]=a,t.css(i),t},u=function(){t.content.css("visibility","visible")};x("BuildControls"+a,function(){if(t._allowZoom()){if(clearTimeout(i),t.content.css("visibility","hidden"),e=t._getItemToZoom(),!e)return void u();r=s(e),r.css(t._getOffset()),t.wrap.append(r),i=setTimeout(function(){r.css(t._getOffset(!0)),i=setTimeout(function(){u(),setTimeout(function(){r.remove(),e=r=null,k("ZoomAnimationEnded")},16)},o)},16)}}),x(c+a,function(){if(t._allowZoom()){if(clearTimeout(i),t.st.removalDelay=o,!e){if(e=t._getItemToZoom(),!e)return;r=s(e)}r.css(t._getOffset(!0)),t.wrap.append(r),t.content.css("visibility","hidden"),setTimeout(function(){r.css(t._getOffset())},16)}}),x(l+a,function(){t._allowZoom()&&(u(),r&&r.remove(),e=null)})}},_allowZoom:function(){return"image"===t.currItem.type},_getItemToZoom:function(){return t.currItem.hasSize?t.currItem.img:!1},_getOffset:function(n){var a;a=n?t.currItem.img:t.st.zoom.opener(t.currItem.el||t.currItem);var i=a.offset(),r=parseInt(a.css("padding-top"),10),o=parseInt(a.css("padding-bottom"),10);i.top-=e(window).scrollTop()-r;var s={width:a.width(),height:(C?a.innerHeight():a[0].offsetHeight)-o-r};return F()?s["-moz-transform"]=s.transform="translate("+i.left+"px,"+i.top+"px)":(s.left=i.left,s.top=i.top),s}}});var W="iframe",Y="//about:blank",R=function(e){if(t.currTemplate[W]){var n=t.currTemplate[W].find("iframe");n.length&&(e||(n[0].src=Y),t.isIE8&&n.css("display",e?"block":"none"))}};e.magnificPopup.registerModule(W,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){t.types.push(W),x("BeforeChange",function(e,t,n){t!==n&&(t===W?R():n===W&&R(!0))}),x(l+"."+W,function(){R()})},getIframe:function(n,a){var i=n.src,r=t.st.iframe;e.each(r.patterns,function(){return i.indexOf(this.index)>-1?(this.id&&(i="string"==typeof this.id?i.substr(i.lastIndexOf(this.id)+this.id.length,i.length):this.id.call(this,i)),i=this.src.replace("%id%",i),!1):void 0});var o={};return r.srcAction&&(o[r.srcAction]=i),t._parseMarkup(a,o,n),t.updateStatus("ready"),a}}});var X=function(e){var n=t.items.length;return e>n-1?e-n:0>e?n+e:e},N=function(e,t,n){return e.replace(/%curr%/gi,t+1).replace(/%total%/gi,n)};e.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var n=t.st.gallery,a=".mfp-gallery",r=Boolean(e.fn.mfpFastClick);return t.direction=!0,n&&n.enabled?(o+=" mfp-gallery",x(f+a,function(){n.navigateByImgClick&&t.wrap.on("click"+a,".mfp-img",function(){return t.items.length>1?(t.next(),!1):void 0}),i.on("keydown"+a,function(e){37===e.keyCode?t.prev():39===e.keyCode&&t.next()})}),x("UpdateStatus"+a,function(e,n){n.text&&(n.text=N(n.text,t.currItem.index,t.items.length))}),x(p+a,function(e,a,i,r){var o=t.items.length;i.counter=o>1?N(n.tCounter,r.index,o):""}),x("BuildControls"+a,function(){if(t.items.length>1&&n.arrows&&!t.arrowLeft){var a=n.arrowMarkup,i=t.arrowLeft=e(a.replace(/%title%/gi,n.tPrev).replace(/%dir%/gi,"left")).addClass(b),o=t.arrowRight=e(a.replace(/%title%/gi,n.tNext).replace(/%dir%/gi,"right")).addClass(b),s=r?"mfpFastClick":"click";i[s](function(){t.prev()}),o[s](function(){t.next()}),t.isIE7&&(I("b",i[0],!1,!0),I("a",i[0],!1,!0),I("b",o[0],!1,!0),I("a",o[0],!1,!0)),t.container.append(i.add(o))}}),x(h+a,function(){t._preloadTimeout&&clearTimeout(t._preloadTimeout),t._preloadTimeout=setTimeout(function(){t.preloadNearbyImages(),t._preloadTimeout=null},16)}),void x(l+a,function(){i.off(a),t.wrap.off("click"+a),t.arrowLeft&&r&&t.arrowLeft.add(t.arrowRight).destroyMfpFastClick(),t.arrowRight=t.arrowLeft=null})):!1},next:function(){t.direction=!0,t.index=X(t.index+1),t.updateItemHTML()},prev:function(){t.direction=!1,t.index=X(t.index-1),t.updateItemHTML()},goTo:function(e){t.direction=e>=t.index,t.index=e,t.updateItemHTML()},preloadNearbyImages:function(){var e,n=t.st.gallery.preload,a=Math.min(n[0],t.items.length),i=Math.min(n[1],t.items.length);for(e=1;(t.direction?i:a)>=e;e++)t._preloadItem(t.index+e);for(e=1;(t.direction?a:i)>=e;e++)t._preloadItem(t.index-e)},_preloadItem:function(n){if(n=X(n),!t.items[n].preloaded){var a=t.items[n];a.parsed||(a=t.parseEl(n)),k("LazyLoad",a),"image"===a.type&&(a.img=e('<img class="mfp-img" />').on("load.mfploader",function(){a.hasSize=!0}).on("error.mfploader",function(){a.hasSize=!0,a.loadError=!0,k("LazyLoadError",a)}).attr("src",a.src)),a.preloaded=!0}}}});var Q="retina";e.magnificPopup.registerModule(Q,{options:{replaceSrc:function(e){return e.src.replace(/\.\w+$/,function(e){return"@2x"+e})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var e=t.st.retina,n=e.ratio;n=isNaN(n)?n():n,n>1&&(x("ImageHasSize."+Q,function(e,t){t.img.css({"max-width":t.img[0].naturalWidth/n,width:"100%"})}),x("ElementParse."+Q,function(t,a){a.src=e.replaceSrc(a,n)}))}}}}),function(){var t=1e3,n="ontouchstart"in window,a=function(){S.off("touchmove"+r+" touchend"+r)},i="mfpFastClick",r="."+i;e.fn.mfpFastClick=function(i){return e(this).each(function(){var o,s=e(this);if(n){var l,c,u,d,p,f;s.on("touchstart"+r,function(e){d=!1,f=1,p=e.originalEvent?e.originalEvent.touches[0]:e.touches[0],c=p.clientX,u=p.clientY,S.on("touchmove"+r,function(e){p=e.originalEvent?e.originalEvent.touches:e.touches,f=p.length,p=p[0],(Math.abs(p.clientX-c)>10||Math.abs(p.clientY-u)>10)&&(d=!0,a())}).on("touchend"+r,function(e){a(),d||f>1||(o=!0,e.preventDefault(),clearTimeout(l),l=setTimeout(function(){o=!1},t),i())})})}s.on("click"+r,function(){o||i()})})},e.fn.destroyMfpFastClick=function(){e(this).off("touchstart"+r+" click"+r),n&&S.off("touchmove"+r+" touchend"+r)}}(),P()}),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,a,i,r,o=gap,s,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,n=0;r>n;n+=1)s[n]=str(n,l)||"null";return i=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+o+"]":"["+s.join(",")+"]",gap=o,i}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;r>n;n+=1)"string"==typeof rep[n]&&(a=rep[n],i=str(a,l),i&&s.push(quote(a)+(gap?": ":":")+i));else for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(i=str(a,l),i&&s.push(quote(a)+(gap?": ":":")+i));return i=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+o+"}":"{"+s.join(",")+"}",gap=o,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var a;if(gap="",indent="","number"==typeof n)for(a=0;n>a;a+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,!t||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return str("",{"":e});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,a,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(a=walk(i,n),void 0!==a?i[n]=a:delete i[n]);return reviver.call(e,t,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e,t){"use strict";var n=e.History=e.History||{},a=e.jQuery;if("undefined"!=typeof n.Adapter)throw new Error("History.js Adapter has already been loaded...");n.Adapter={bind:function(e,t,n){
a(e).bind(t,n)},trigger:function(e,t,n){a(e).trigger(t,n)},extractEventData:function(e,n,a){var i=n&&n.originalEvent&&n.originalEvent[e]||a&&a[e]||t;return i},onDomLoad:function(e){a(e)}},"undefined"!=typeof n.init&&n.init()}(window),function(e,t){"use strict";var n=e.document,a=e.setTimeout||a,i=e.clearTimeout||i,r=e.setInterval||r,o=e.History=e.History||{};if("undefined"!=typeof o.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");o.initHtml4=function(){return"undefined"!=typeof o.initHtml4.initialized?!1:(o.initHtml4.initialized=!0,o.enabled=!0,o.savedHashes=[],o.isLastHash=function(e){var t=o.getHashByIndex(),n;return n=e===t},o.isHashEqual=function(e,t){return e=encodeURIComponent(e).replace(/%25/g,"%"),t=encodeURIComponent(t).replace(/%25/g,"%"),e===t},o.saveHash=function(e){return o.isLastHash(e)?!1:(o.savedHashes.push(e),!0)},o.getHashByIndex=function(e){var t=null;return t="undefined"==typeof e?o.savedHashes[o.savedHashes.length-1]:0>e?o.savedHashes[o.savedHashes.length+e]:o.savedHashes[e]},o.discardedHashes={},o.discardedStates={},o.discardState=function(e,t,n){var a=o.getHashByState(e),i;return i={discardedState:e,backState:n,forwardState:t},o.discardedStates[a]=i,!0},o.discardHash=function(e,t,n){var a={discardedHash:e,backState:n,forwardState:t};return o.discardedHashes[e]=a,!0},o.discardedState=function(e){var t=o.getHashByState(e),n;return n=o.discardedStates[t]||!1},o.discardedHash=function(e){var t=o.discardedHashes[e]||!1;return t},o.recycleState=function(e){var t=o.getHashByState(e);return o.discardedState(e)&&delete o.discardedStates[t],!0},o.emulated.hashChange&&(o.hashChangeInit=function(){o.checkerFunction=null;var t="",a,i,s,l,c=Boolean(o.getHash());return o.isInternetExplorer()?(a="historyjs-iframe",i=n.createElement("iframe"),i.setAttribute("id",a),i.setAttribute("src","#"),i.style.display="none",n.body.appendChild(i),i.contentWindow.document.open(),i.contentWindow.document.close(),s="",l=!1,o.checkerFunction=function(){if(l)return!1;l=!0;var n=o.getHash(),a=o.getHash(i.contentWindow.document);return n!==t?(t=n,a!==n&&(s=a=n,i.contentWindow.document.open(),i.contentWindow.document.close(),i.contentWindow.document.location.hash=o.escapeHash(n)),o.Adapter.trigger(e,"hashchange")):a!==s&&(s=a,c&&""===a?o.back():o.setHash(a,!1)),l=!1,!0}):o.checkerFunction=function(){var n=o.getHash()||"";return n!==t&&(t=n,o.Adapter.trigger(e,"hashchange")),!0},o.intervalList.push(r(o.checkerFunction,o.options.hashChangeInterval)),!0},o.Adapter.onDomLoad(o.hashChangeInit)),o.emulated.pushState&&(o.onHashChange=function(t){var n=t&&t.newURL||o.getLocationHref(),a=o.getHashByUrl(n),i=null,r=null,s=null,l;return o.isLastHash(a)?(o.busy(!1),!1):(o.doubleCheckComplete(),o.saveHash(a),a&&o.isTraditionalAnchor(a)?(o.Adapter.trigger(e,"anchorchange"),o.busy(!1),!1):(i=o.extractState(o.getFullUrl(a||o.getLocationHref()),!0),o.isLastSavedState(i)?(o.busy(!1),!1):(r=o.getHashByState(i),l=o.discardedState(i),l?(o.getHashByIndex(-2)===o.getHashByState(l.forwardState)?o.back(!1):o.forward(!1),!1):(o.pushState(i.data,i.title,encodeURI(i.url),!1),!0))))},o.Adapter.bind(e,"hashchange",o.onHashChange),o.pushState=function(t,n,a,i){if(a=encodeURI(a).replace(/%25/g,"%"),o.getHashByUrl(a))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(i!==!1&&o.busy())return o.pushQueue({scope:o,callback:o.pushState,args:arguments,queue:i}),!1;o.busy(!0);var r=o.createStateObject(t,n,a),s=o.getHashByState(r),l=o.getState(!1),c=o.getHashByState(l),u=o.getHash(),d=o.expectedStateId==r.id;return o.storeState(r),o.expectedStateId=r.id,o.recycleState(r),o.setTitle(r),s===c?(o.busy(!1),!1):(o.saveState(r),d||o.Adapter.trigger(e,"statechange"),!o.isHashEqual(s,u)&&!o.isHashEqual(s,o.getShortUrl(o.getLocationHref()))&&o.setHash(s,!1),o.busy(!1),!0)},o.replaceState=function(t,n,a,i){if(a=encodeURI(a).replace(/%25/g,"%"),o.getHashByUrl(a))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(i!==!1&&o.busy())return o.pushQueue({scope:o,callback:o.replaceState,args:arguments,queue:i}),!1;o.busy(!0);var r=o.createStateObject(t,n,a),s=o.getHashByState(r),l=o.getState(!1),c=o.getHashByState(l),u=o.getStateByIndex(-2);return o.discardState(l,r,u),s===c?(o.storeState(r),o.expectedStateId=r.id,o.recycleState(r),o.setTitle(r),o.saveState(r),o.Adapter.trigger(e,"statechange"),o.busy(!1)):o.pushState(r.data,r.title,r.url,!1),!0}),o.emulated.pushState&&o.getHash()&&!o.emulated.hashChange&&o.Adapter.onDomLoad(function(){o.Adapter.trigger(e,"hashchange")}),void 0)},"undefined"!=typeof o.init&&o.init()}(window),function(e,t){"use strict";var n=e.console||t,a=e.document,i=e.navigator,r=e.sessionStorage||!1,o=e.setTimeout,s=e.clearTimeout,l=e.setInterval,c=e.clearInterval,u=e.JSON,d=e.alert,p=e.History=e.History||{},f=e.history;try{r.setItem("TEST","1"),r.removeItem("TEST")}catch(h){r=!1}if(u.stringify=u.stringify||u.encode,u.parse=u.parse||u.decode,"undefined"!=typeof p.init)throw new Error("History.js Core has already been loaded...");p.init=function(e){return"undefined"==typeof p.Adapter?!1:("undefined"!=typeof p.initCore&&p.initCore(),"undefined"!=typeof p.initHtml4&&p.initHtml4(),!0)},p.initCore=function(h){if("undefined"!=typeof p.initCore.initialized)return!1;if(p.initCore.initialized=!0,p.options=p.options||{},p.options.hashChangeInterval=p.options.hashChangeInterval||100,p.options.safariPollInterval=p.options.safariPollInterval||500,p.options.doubleCheckInterval=p.options.doubleCheckInterval||500,p.options.disableSuid=p.options.disableSuid||!1,p.options.storeInterval=p.options.storeInterval||1e3,p.options.busyDelay=p.options.busyDelay||250,p.options.debug=p.options.debug||!1,p.options.initialTitle=p.options.initialTitle||a.title,p.options.html4Mode=p.options.html4Mode||!1,p.options.delayInit=p.options.delayInit||!1,p.intervalList=[],p.clearAllIntervals=function(){var e,t=p.intervalList;if("undefined"!=typeof t&&null!==t){for(e=0;e<t.length;e++)c(t[e]);p.intervalList=null}},p.debug=function(){(p.options.debug||!1)&&p.log.apply(p,arguments)},p.log=function(){var e="undefined"!=typeof n&&"undefined"!=typeof n.log&&"undefined"!=typeof n.log.apply,t=a.getElementById("log"),i,r,o,s,l;for(e?(s=Array.prototype.slice.call(arguments),i=s.shift(),"undefined"!=typeof n.debug?n.debug.apply(n,[i,s]):n.log.apply(n,[i,s])):i="\n"+arguments[0]+"\n",r=1,o=arguments.length;o>r;++r){if(l=arguments[r],"object"==typeof l&&"undefined"!=typeof u)try{l=u.stringify(l)}catch(c){}i+="\n"+l+"\n"}return t?(t.value+=i+"\n-----\n",t.scrollTop=t.scrollHeight-t.clientHeight):e||d(i),!0},p.getInternetExplorerMajorVersion=function(){var e=p.getInternetExplorerMajorVersion.cached="undefined"!=typeof p.getInternetExplorerMajorVersion.cached?p.getInternetExplorerMajorVersion.cached:function(){for(var e=3,t=a.createElement("div"),n=t.getElementsByTagName("i");(t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->")&&n[0];);return e>4?e:!1}();return e},p.isInternetExplorer=function(){var e=p.isInternetExplorer.cached="undefined"!=typeof p.isInternetExplorer.cached?p.isInternetExplorer.cached:Boolean(p.getInternetExplorerMajorVersion());return e},p.options.html4Mode?p.emulated={pushState:!0,hashChange:!0}:p.emulated={pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(i.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(i.userAgent)),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in a)||p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<8)},p.enabled=!p.emulated.pushState,p.bugs={setHash:Boolean(!p.emulated.pushState&&"Apple Computer, Inc."===i.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),safariPoll:Boolean(!p.emulated.pushState&&"Apple Computer, Inc."===i.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),ieDoubleCheck:Boolean(p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<7)},p.isEmptyObject=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},p.cloneObject=function(e){var t,n;return e?(t=u.stringify(e),n=u.parse(t)):n={},n},p.getRootUrl=function(){var e=a.location.protocol+"//"+(a.location.hostname||a.location.host);return a.location.port&&(e+=":"+a.location.port),e+="/"},p.getBaseHref=function(){var e=a.getElementsByTagName("base"),t=null,n="";return 1===e.length&&(t=e[0],n=t.href.replace(/[^\/]+$/,"")),n=n.replace(/\/+$/,""),n&&(n+="/"),n},p.getBaseUrl=function(){var e=p.getBaseHref()||p.getBasePageUrl()||p.getRootUrl();return e},p.getPageUrl=function(){var e=p.getState(!1,!1),t=(e||{}).url||p.getLocationHref(),n;return n=t.replace(/\/+$/,"").replace(/[^\/]+$/,function(e,t,n){return/\./.test(e)?e:e+"/"})},p.getBasePageUrl=function(){var e=p.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e,t,n){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/";return e},p.getFullUrl=function(e,t){var n=e,a=e.substring(0,1);return t="undefined"==typeof t?!0:t,/[a-z]+\:\/\//.test(e)||(n="/"===a?p.getRootUrl()+e.replace(/^\/+/,""):"#"===a?p.getPageUrl().replace(/#.*/,"")+e:"?"===a?p.getPageUrl().replace(/[\?#].*/,"")+e:t?p.getBaseUrl()+e.replace(/^(\.\/)+/,""):p.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},p.getShortUrl=function(e){var t=e,n=p.getBaseUrl(),a=p.getRootUrl();return p.emulated.pushState&&(t=t.replace(n,"")),t=t.replace(a,"/"),p.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},p.getLocationHref=function(e){return e=e||a,e.URL===e.location.href?e.location.href:e.location.href===decodeURIComponent(e.URL)?e.URL:e.location.hash&&decodeURIComponent(e.location.href.replace(/^[^#]+/,""))===e.location.hash?e.location.href:-1==e.URL.indexOf("#")&&-1!=e.location.href.indexOf("#")?e.location.href:e.URL||e.location.href},p.store={},p.idToState=p.idToState||{},p.stateToId=p.stateToId||{},p.urlToId=p.urlToId||{},p.storedStates=p.storedStates||[],p.savedStates=p.savedStates||[],p.normalizeStore=function(){p.store.idToState=p.store.idToState||{},p.store.urlToId=p.store.urlToId||{},p.store.stateToId=p.store.stateToId||{}},p.getState=function(e,t){"undefined"==typeof e&&(e=!0),"undefined"==typeof t&&(t=!0);var n=p.getLastSavedState();return!n&&t&&(n=p.createStateObject()),e&&(n=p.cloneObject(n),n.url=n.cleanUrl||n.url),n},p.getIdByState=function(e){var t=p.extractId(e.url),n;if(!t)if(n=p.getStateString(e),"undefined"!=typeof p.stateToId[n])t=p.stateToId[n];else if("undefined"!=typeof p.store.stateToId[n])t=p.store.stateToId[n];else{for(;t=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"!=typeof p.idToState[t]||"undefined"!=typeof p.store.idToState[t];);p.stateToId[n]=t,p.idToState[t]=e}return t},p.normalizeState=function(e){var t,n;return e&&"object"==typeof e||(e={}),"undefined"!=typeof e.normalized?e:(e.data&&"object"==typeof e.data||(e.data={}),t={},t.normalized=!0,t.title=e.title||"",t.url=p.getFullUrl(e.url?e.url:p.getLocationHref()),t.hash=p.getShortUrl(t.url),t.data=p.cloneObject(e.data),t.id=p.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl,n=!p.isEmptyObject(t.data),(t.title||n)&&p.options.disableSuid!==!0&&(t.hash=p.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=p.getFullUrl(t.hash),(p.emulated.pushState||p.bugs.safariPoll)&&p.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t)},p.createStateObject=function(e,t,n){var a={data:e,title:t,url:n};return a=p.normalizeState(a)},p.getStateById=function(e){e=String(e);var n=p.idToState[e]||p.store.idToState[e]||t;return n},p.getStateString=function(e){var t,n,a;return t=p.normalizeState(e),n={data:t.data,title:e.title,url:e.url},a=u.stringify(n)},p.getStateId=function(e){var t,n;return t=p.normalizeState(e),n=t.id},p.getHashByState=function(e){var t,n;return t=p.normalizeState(e),n=t.hash},p.extractId=function(e){var t,n,a,i;return i=-1!=e.indexOf("#")?e.split("#")[0]:e,n=/(.*)\&_suid=([0-9]+)$/.exec(i),a=n?n[1]||e:e,t=n?String(n[2]||""):"",t||!1},p.isTraditionalAnchor=function(e){var t=!/[\/\?\.]/.test(e);return t},p.extractState=function(e,t){var n=null,a,i;return t=t||!1,a=p.extractId(e),a&&(n=p.getStateById(a)),n||(i=p.getFullUrl(e),a=p.getIdByUrl(i)||!1,a&&(n=p.getStateById(a)),!n&&t&&!p.isTraditionalAnchor(e)&&(n=p.createStateObject(null,null,i))),n},p.getIdByUrl=function(e){var n=p.urlToId[e]||p.store.urlToId[e]||t;return n},p.getLastSavedState=function(){return p.savedStates[p.savedStates.length-1]||t},p.getLastStoredState=function(){return p.storedStates[p.storedStates.length-1]||t},p.hasUrlDuplicate=function(e){var t=!1,n;return n=p.extractState(e.url),t=n&&n.id!==e.id},p.storeState=function(e){return p.urlToId[e.url]=e.id,p.storedStates.push(p.cloneObject(e)),e},p.isLastSavedState=function(e){var t=!1,n,a,i;return p.savedStates.length&&(n=e.id,a=p.getLastSavedState(),i=a.id,t=n===i),t},p.saveState=function(e){return p.isLastSavedState(e)?!1:(p.savedStates.push(p.cloneObject(e)),!0)},p.getStateByIndex=function(e){var t=null;return t="undefined"==typeof e?p.savedStates[p.savedStates.length-1]:0>e?p.savedStates[p.savedStates.length+e]:p.savedStates[e]},p.getCurrentIndex=function(){var e=null;return e=p.savedStates.length<1?0:p.savedStates.length-1},p.getHash=function(e){var t=p.getLocationHref(e),n;return n=p.getHashByUrl(t)},p.unescapeHash=function(e){var t=p.normalizeHash(e);return t=decodeURIComponent(t)},p.normalizeHash=function(e){var t=e.replace(/[^#]*#/,"").replace(/#.*/,"");return t},p.setHash=function(e,t){var n,i;return t!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.setHash,args:arguments,queue:t}),!1):(p.busy(!0),n=p.extractState(e,!0),n&&!p.emulated.pushState?p.pushState(n.data,n.title,n.url,!1):p.getHash()!==e&&(p.bugs.setHash?(i=p.getPageUrl(),p.pushState(null,null,i+"#"+e,!1)):a.location.hash=e),p)},p.escapeHash=function(t){var n=p.normalizeHash(t);return n=e.encodeURIComponent(n),p.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},p.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=p.unescapeHash(t)},p.setTitle=function(e){var t=e.title,n;t||(n=p.getStateByIndex(0),n&&n.url===e.url&&(t=n.title||p.options.initialTitle));try{a.getElementsByTagName("title")[0].innerHTML=t.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(i){}return a.title=t,p},p.queues=[],p.busy=function(e){if("undefined"!=typeof e?p.busy.flag=e:"undefined"==typeof p.busy.flag&&(p.busy.flag=!1),!p.busy.flag){s(p.busy.timeout);var t=function(){var e,n,a;if(!p.busy.flag)for(e=p.queues.length-1;e>=0;--e)n=p.queues[e],0!==n.length&&(a=n.shift(),p.fireQueueItem(a),p.busy.timeout=o(t,p.options.busyDelay))};p.busy.timeout=o(t,p.options.busyDelay)}return p.busy.flag},p.busy.flag=!1,p.fireQueueItem=function(e){return e.callback.apply(e.scope||p,e.args||[])},p.pushQueue=function(e){return p.queues[e.queue||0]=p.queues[e.queue||0]||[],p.queues[e.queue||0].push(e),p},p.queue=function(e,t){return"function"==typeof e&&(e={callback:e}),"undefined"!=typeof t&&(e.queue=t),p.busy()?p.pushQueue(e):p.fireQueueItem(e),p},p.clearQueue=function(){return p.busy.flag=!1,p.queues=[],p},p.stateChanged=!1,p.doubleChecker=!1,p.doubleCheckComplete=function(){return p.stateChanged=!0,p.doubleCheckClear(),p},p.doubleCheckClear=function(){return p.doubleChecker&&(s(p.doubleChecker),p.doubleChecker=!1),p},p.doubleCheck=function(e){return p.stateChanged=!1,p.doubleCheckClear(),p.bugs.ieDoubleCheck&&(p.doubleChecker=o(function(){return p.doubleCheckClear(),p.stateChanged||e(),!0},p.options.doubleCheckInterval)),p},p.safariStatePoll=function(){var t=p.extractState(p.getLocationHref()),n;return p.isLastSavedState(t)?void 0:(n=t,n||(n=p.createStateObject()),p.Adapter.trigger(e,"popstate"),p)},p.back=function(e){return e!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.back,args:arguments,queue:e}),!1):(p.busy(!0),p.doubleCheck(function(){p.back(!1)}),f.go(-1),!0)},p.forward=function(e){return e!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.forward,args:arguments,queue:e}),!1):(p.busy(!0),p.doubleCheck(function(){p.forward(!1)}),f.go(1),!0)},p.go=function(e,t){var n;if(e>0)for(n=1;e>=n;++n)p.forward(t);else{if(!(0>e))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=e;--n)p.back(t)}return p},p.emulated.pushState){var g=function(){};p.pushState=p.pushState||g,p.replaceState=p.replaceState||g}else p.onPopState=function(t,n){var a=!1,i=!1,r,o;return p.doubleCheckComplete(),r=p.getHash(),r?(o=p.extractState(r||p.getLocationHref(),!0),o?p.replaceState(o.data,o.title,o.url,!1):(p.Adapter.trigger(e,"anchorchange"),p.busy(!1)),p.expectedStateId=!1,!1):(a=p.Adapter.extractEventData("state",t,n)||!1,i=a?p.getStateById(a):p.expectedStateId?p.getStateById(p.expectedStateId):p.extractState(p.getLocationHref()),i||(i=p.createStateObject(null,null,p.getLocationHref())),p.expectedStateId=!1,p.isLastSavedState(i)?(p.busy(!1),!1):(p.storeState(i),p.saveState(i),p.setTitle(i),p.Adapter.trigger(e,"statechange"),p.busy(!1),!0))},p.Adapter.bind(e,"popstate",p.onPopState),p.pushState=function(t,n,a,i){if(p.getHashByUrl(a)&&p.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(i!==!1&&p.busy())return p.pushQueue({scope:p,callback:p.pushState,args:arguments,queue:i}),!1;p.busy(!0);var r=p.createStateObject(t,n,a);return p.isLastSavedState(r)?p.busy(!1):(p.storeState(r),p.expectedStateId=r.id,f.pushState(r.id,r.title,r.url),p.Adapter.trigger(e,"popstate")),!0},p.replaceState=function(t,n,a,i){if(p.getHashByUrl(a)&&p.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(i!==!1&&p.busy())return p.pushQueue({scope:p,callback:p.replaceState,args:arguments,queue:i}),!1;p.busy(!0);var r=p.createStateObject(t,n,a);return p.isLastSavedState(r)?p.busy(!1):(p.storeState(r),p.expectedStateId=r.id,f.replaceState(r.id,r.title,r.url),p.Adapter.trigger(e,"popstate")),!0};if(r){try{p.store=u.parse(r.getItem("History.store"))||{}}catch(m){p.store={}}p.normalizeStore()}else p.store={},p.normalizeStore();p.Adapter.bind(e,"unload",p.clearAllIntervals),p.saveState(p.storeState(p.extractState(p.getLocationHref(),!0))),r&&(p.onUnload=function(){var e,t,n;try{e=u.parse(r.getItem("History.store"))||{}}catch(a){e={}}e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{};for(t in p.idToState)p.idToState.hasOwnProperty(t)&&(e.idToState[t]=p.idToState[t]);for(t in p.urlToId)p.urlToId.hasOwnProperty(t)&&(e.urlToId[t]=p.urlToId[t]);for(t in p.stateToId)p.stateToId.hasOwnProperty(t)&&(e.stateToId[t]=p.stateToId[t]);p.store=e,p.normalizeStore(),n=u.stringify(e);try{r.setItem("History.store",n)}catch(i){if(i.code!==DOMException.QUOTA_EXCEEDED_ERR)throw i;r.length&&(r.removeItem("History.store"),r.setItem("History.store",n))}},p.intervalList.push(l(p.onUnload,p.options.storeInterval)),p.Adapter.bind(e,"beforeunload",p.onUnload),p.Adapter.bind(e,"unload",p.onUnload)),p.emulated.pushState||(p.bugs.safariPoll&&p.intervalList.push(l(p.safariStatePoll,p.options.safariPollInterval)),("Apple Computer, Inc."===i.vendor||"Mozilla"===(i.appCodeName||""))&&(p.Adapter.bind(e,"hashchange",function(){p.Adapter.trigger(e,"popstate")}),p.getHash()&&p.Adapter.onDomLoad(function(){p.Adapter.trigger(e,"hashchange")})))},(!p.options||!p.options.delayInit)&&p.init()}(window);