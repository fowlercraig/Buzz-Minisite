!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){"use strict";function t(e,t,i,n){var a,o={raw:{}};n=n||{};for(a in n)n.hasOwnProperty(a)&&("classes"===e?(o.raw[n[a]]=t+"-"+n[a],o[n[a]]="."+t+"-"+n[a]):(o.raw[a]=n[a],o[a]=n[a]+"."+t));for(a in i)i.hasOwnProperty(a)&&("classes"===e?(o.raw[a]=i[a].replace(/{ns}/g,t),o[a]=i[a].replace(/{ns}/g,"."+t)):(o.raw[a]=i[a].replace(/.{ns}/g,""),o[a]=i[a].replace(/{ns}/g,t)));return o}function i(){f.windowWidth=f.$window.width(),f.windowHeight=f.$window.height(),v=p.startTimer(v,y,n)}function n(){for(var e in f.ResizeHandlers)f.ResizeHandlers.hasOwnProperty(e)&&f.ResizeHandlers[e].callback.call(window,f.windowWidth,f.windowHeight)}function a(){if(f.support.raf){f.window.requestAnimationFrame(a);for(var e in f.RAFHandlers)f.RAFHandlers.hasOwnProperty(e)&&f.RAFHandlers[e].callback.call(window)}}function o(e,t){return parseInt(e.priority)-parseInt(t.priority)}var s,r,l,c="undefined"!=typeof window?window:this,d=c.document,u=function(){this.Version="@version",this.Plugins={},this.DontConflict=!1,this.Conflicts={fn:{}},this.ResizeHandlers=[],this.RAFHandlers=[],this.window=c,this.$window=e(c),this.document=d,this.$document=e(d),this.$body=null,this.windowWidth=0,this.windowHeight=0,this.fallbackWidth=1024,this.fallbackHeight=768,this.userAgent=window.navigator.userAgent||window.navigator.vendor||window.opera,this.isFirefox=/Firefox/i.test(this.userAgent),this.isChrome=/Chrome/i.test(this.userAgent),this.isSafari=/Safari/i.test(this.userAgent)&&!this.isChrome,this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(this.userAgent),this.isIEMobile=/IEMobile/i.test(this.userAgent),this.isFirefoxMobile=this.isFirefox&&this.isMobile,this.transform=null,this.transition=null,this.support={file:!!(window.File&&window.FileList&&window.FileReader),history:!!(window.history&&window.history.pushState&&window.history.replaceState),matchMedia:!(!window.matchMedia&&!window.msMatchMedia),pointer:!!window.PointerEvent,raf:!(!window.requestAnimationFrame||!window.cancelAnimationFrame),touch:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),transition:!1,transform:!1}},p={killEvent:function(e,t){try{e.preventDefault(),e.stopPropagation(),t&&e.stopImmediatePropagation()}catch(e){}},killGesture:function(e){try{e.preventDefault()}catch(e){}},lockViewport:function(t){w[t]=!0,e.isEmptyObject(w)||b||(s.length?s.attr("content",l):s=e("head").append('<meta name="viewport" content="'+l+'">'),f.$body.on(g.gestureChange,p.killGesture).on(g.gestureStart,p.killGesture).on(g.gestureEnd,p.killGesture),b=!0)},unlockViewport:function(t){"undefined"!==e.type(w[t])&&delete w[t],e.isEmptyObject(w)&&b&&(s.length&&(r?s.attr("content",r):s.remove()),f.$body.off(g.gestureChange).off(g.gestureStart).off(g.gestureEnd),b=!1)},startTimer:function(e,t,i,n){return p.clearTimer(e),n?setInterval(i,t):setTimeout(i,t)},clearTimer:function(e,t){e&&(t?clearInterval(e):clearTimeout(e),e=null)},sortAsc:function(e,t){return parseInt(e,10)-parseInt(t,10)},sortDesc:function(e,t){return parseInt(t,10)-parseInt(e,10)},decodeEntities:function(e){var t=f.document.createElement("textarea");return t.innerHTML=e,t.value},parseQueryString:function(e){for(var t={},i=e.slice(e.indexOf("?")+1).split("&"),n=0;n<i.length;n++){var a=i[n].split("=");t[a[0]]=a[1]}return t}},f=new u,h=e.Deferred(),m={base:"{ns}",element:"{ns}-element"},g={namespace:".{ns}",beforeUnload:"beforeunload.{ns}",blur:"blur.{ns}",change:"change.{ns}",click:"click.{ns}",dblClick:"dblclick.{ns}",drag:"drag.{ns}",dragEnd:"dragend.{ns}",dragEnter:"dragenter.{ns}",dragLeave:"dragleave.{ns}",dragOver:"dragover.{ns}",dragStart:"dragstart.{ns}",drop:"drop.{ns}",error:"error.{ns}",focus:"focus.{ns}",focusIn:"focusin.{ns}",focusOut:"focusout.{ns}",gestureChange:"gesturechange.{ns}",gestureStart:"gesturestart.{ns}",gestureEnd:"gestureend.{ns}",input:"input.{ns}",keyDown:"keydown.{ns}",keyPress:"keypress.{ns}",keyUp:"keyup.{ns}",load:"load.{ns}",mouseDown:"mousedown.{ns}",mouseEnter:"mouseenter.{ns}",mouseLeave:"mouseleave.{ns}",mouseMove:"mousemove.{ns}",mouseOut:"mouseout.{ns}",mouseOver:"mouseover.{ns}",mouseUp:"mouseup.{ns}",panStart:"panstart.{ns}",pan:"pan.{ns}",panEnd:"panend.{ns}",resize:"resize.{ns}",scaleStart:"scalestart.{ns}",scaleEnd:"scaleend.{ns}",scale:"scale.{ns}",scroll:"scroll.{ns}",select:"select.{ns}",swipe:"swipe.{ns}",touchCancel:"touchcancel.{ns}",touchEnd:"touchend.{ns}",touchLeave:"touchleave.{ns}",touchMove:"touchmove.{ns}",touchStart:"touchstart.{ns}"},v=null,y=20,w=[],b=!1;return u.prototype.NoConflict=function(){f.DontConflict=!0;for(var t in f.Plugins)f.Plugins.hasOwnProperty(t)&&(e[t]=f.Conflicts[t],e.fn[t]=f.Conflicts.fn[t])},u.prototype.Ready=function(e){"complete"===f.document.readyState||"loading"!==f.document.readyState&&!f.document.documentElement.doScroll?e():f.document.addEventListener("DOMContentLoaded",e)},u.prototype.Plugin=function(i,n){return f.Plugins[i]=function(i,n){function a(t){var a,o,r,c="object"===e.type(t),d=Array.prototype.slice.call(arguments,c?1:0),u=this,p=e();for(t=e.extend(!0,{},n.defaults||{},c?t:{}),o=0,r=u.length;o<r;o++)if(a=u.eq(o),!s(a)){n.guid++;var f="__"+n.guid,h=n.classes.raw.base+f,m=a.data(i+"-options"),g=e.extend(!0,{$el:a,guid:f,numGuid:n.guid,rawGuid:h,dotGuid:"."+h},t,"object"===e.type(m)?m:{});a.addClass(n.classes.raw.element).data(l,g),n.methods._construct.apply(a,[g].concat(d)),p=p.add(a)}for(o=0,r=p.length;o<r;o++)a=p.eq(o),n.methods._postConstruct.apply(a,[s(a)]);return u}function s(e){return e.data(l)}var r="fs-"+i,l="fs"+i.replace(/(^|\s)([a-z])/g,function(e,t,i){return t+i.toUpperCase()});return n.initialized=!1,n.priority=n.priority||10,n.classes=t("classes",r,m,n.classes),n.events=t("events",i,g,n.events),n.functions=e.extend({getData:s,iterate:function(t){for(var i=this,n=Array.prototype.slice.call(arguments,1),a=0,o=i.length;a<o;a++){var r=i.eq(a),l=s(r)||{};"undefined"!==e.type(l.$el)&&t.apply(r,[l].concat(n))}return i}},p,n.functions),n.methods=e.extend(!0,{_construct:e.noop,_postConstruct:e.noop,_destruct:e.noop,_resize:!1,destroy:function(e){n.functions.iterate.apply(this,[n.methods._destruct].concat(Array.prototype.slice.call(arguments,1))),this.removeClass(n.classes.raw.element).removeData(l)}},n.methods),n.utilities=e.extend(!0,{_initialize:!1,_delegate:!1,defaults:function(t){n.defaults=e.extend(!0,n.defaults,t||{})}},n.utilities),n.widget&&(f.Conflicts.fn[i]=e.fn[i],e.fn[l]=function(t){if(this instanceof e){var i=n.methods[t];if("object"===e.type(t)||!t)return a.apply(this,arguments);if(i&&0!==t.indexOf("_")){var o=[i].concat(Array.prototype.slice.call(arguments,1));return n.functions.iterate.apply(this,o)}return this}},f.DontConflict||(e.fn[i]=e.fn[l])),f.Conflicts[i]=e[i],e[l]=n.utilities._delegate||function(t){var i=n.utilities[t]||n.utilities._initialize||!1;if(i){var a=Array.prototype.slice.call(arguments,"object"===e.type(t)?0:1);return i.apply(window,a)}},f.DontConflict||(e[i]=e[l]),n.namespace=i,n.namespaceClean=l,n.guid=0,n.methods._resize&&(f.ResizeHandlers.push({namespace:i,priority:n.priority,callback:n.methods._resize}),f.ResizeHandlers.sort(o)),n.methods._raf&&(f.RAFHandlers.push({namespace:i,priority:n.priority,callback:n.methods._raf}),f.RAFHandlers.sort(o)),n}(i,n),f.Plugins[i]},f.$window.on("resize.fs",i),i(),a(),f.Ready(function(){f.$body=e("body"),e("html").addClass(f.support.touch?"touchevents":"no-touchevents"),s=e('meta[name="viewport"]'),r=!!s.length&&s.attr("content"),l="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0",h.resolve()}),g.clickTouchStart=g.click+" "+g.touchStart,function(){var e,t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"},i=["transition","-webkit-transition"],n={transform:"transform",MozTransform:"-moz-transform",OTransform:"-o-transform",msTransform:"-ms-transform",webkitTransform:"-webkit-transform"},a="transitionend",o="",s="",r=document.createElement("div");for(e in t)if(t.hasOwnProperty(e)&&e in r.style){a=t[e],f.support.transition=!0;break}g.transitionEnd=a+".{ns}";for(e in i)if(i.hasOwnProperty(e)&&i[e]in r.style){o=i[e];break}f.transition=o;for(e in n)if(n.hasOwnProperty(e)&&n[e]in r.style){f.support.transform=!0,s=n[e];break}f.transform=s}(),window.Formstone=f,f}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core"],e):e(jQuery,Formstone)}(function(e,t){"use strict";function i(e){e.preventManipulation&&e.preventManipulation();var t=e.data,i=e.originalEvent;if(i.type.match(/(up|end|cancel)$/i))o(e);else{if(i.pointerId){var s=!1;for(var r in t.touches)t.touches[r].id===i.pointerId&&(s=!0,t.touches[r].pageX=i.pageX,t.touches[r].pageY=i.pageY);s||t.touches.push({id:i.pointerId,pageX:i.pageX,pageY:i.pageY})}else t.touches=i.touches;i.type.match(/(down|start)$/i)?n(e):i.type.match(/move$/i)&&a(e)}}function n(n){var s=n.data,r="undefined"!==e.type(s.touches)&&s.touches.length?s.touches[0]:null;r&&s.$el.off(h.mouseDown),s.touching||(s.startE=n.originalEvent,s.startX=r?r.pageX:n.pageX,s.startY=r?r.pageY:n.pageY,s.startT=(new Date).getTime(),s.scaleD=1,s.passed=!1),s.$links&&s.$links.off(h.click);var u=l(s.scale?h.scaleStart:h.panStart,n,s.startX,s.startY,s.scaleD,0,0,"","");if(s.scale&&s.touches&&s.touches.length>=2){var p=s.touches;s.pinch={startX:c(p[0].pageX,p[1].pageX),startY:c(p[0].pageY,p[1].pageY),startD:d(p[1].pageX-p[0].pageX,p[1].pageY-p[0].pageY)},u.pageX=s.startX=s.pinch.startX,u.pageY=s.startY=s.pinch.startY}s.touching||(s.touching=!0,s.pan&&!r&&g.on(h.mouseMove,s,a).on(h.mouseUp,s,o),t.support.pointer?g.on([h.pointerMove,h.pointerUp,h.pointerCancel].join(" "),s,i):g.on([h.touchMove,h.touchEnd,h.touchCancel].join(" "),s,i),s.$el.trigger(u))}function a(t){var i=t.data,n="undefined"!==e.type(i.touches)&&i.touches.length?i.touches[0]:null,a=n?n.pageX:t.pageX,s=n?n.pageY:t.pageY,r=a-i.startX,u=s-i.startY,p=r>0?"right":"left",f=u>0?"down":"up",g=Math.abs(r)>v,y=Math.abs(u)>v;if(!i.passed&&i.axis&&(i.axisX&&y||i.axisY&&g))o(t);else{!i.passed&&(!i.axis||i.axis&&i.axisX&&g||i.axisY&&y)&&(i.passed=!0),i.passed&&(m.killEvent(t),m.killEvent(i.startE));var w=!0,b=l(i.scale?h.scale:h.pan,t,a,s,i.scaleD,r,u,p,f);if(i.scale)if(i.touches&&i.touches.length>=2){var C=i.touches;i.pinch.endX=c(C[0].pageX,C[1].pageX),i.pinch.endY=c(C[0].pageY,C[1].pageY),i.pinch.endD=d(C[1].pageX-C[0].pageX,C[1].pageY-C[0].pageY),i.scaleD=i.pinch.endD/i.pinch.startD,b.pageX=i.pinch.endX,b.pageY=i.pinch.endY,b.scale=i.scaleD,b.deltaX=i.pinch.endX-i.pinch.startX,b.deltaY=i.pinch.endY-i.pinch.startY}else i.pan||(w=!1);w&&i.$el.trigger(b)}}function o(t){var i=t.data,a="undefined"!==e.type(i.touches)&&i.touches.length?i.touches[0]:null,o=a?a.pageX:t.pageX,r=a?a.pageY:t.pageY,c=o-i.startX,d=r-i.startY,u=(new Date).getTime(),p=i.scale?h.scaleEnd:h.panEnd,f=c>0?"right":"left",w=d>0?"down":"up",b=Math.abs(c)>1,C=Math.abs(d)>1;if(i.swipe&&Math.abs(c)>v&&u-i.startT<y&&(p=h.swipe),i.axis&&(i.axisX&&C||i.axisY&&b)||b||C){i.$links=i.$el.find("a");for(var x=0,P=i.$links.length;x<P;x++)s(i.$links.eq(x),i)}var T=l(p,t,o,r,i.scaleD,c,d,f,w);g.off([h.touchMove,h.touchEnd,h.touchCancel,h.mouseMove,h.mouseUp,h.pointerMove,h.pointerUp,h.pointerCancel].join(" ")),i.$el.trigger(T),i.touches=[],i.scale,a&&(i.touchTimer=m.startTimer(i.touchTimer,5,function(){i.$el.on(h.mouseDown,i,n)})),i.touching=!1}function s(t,i){t.on(h.click,i,r);var n=e._data(t[0],"events").click;n.unshift(n.pop())}function r(e){m.killEvent(e,!0),e.data.$links.off(h.click)}function l(t,i,n,a,o,s,r,l,c){return e.Event(t,{originalEvent:i,bubbles:!0,pageX:n,pageY:a,scale:o,deltaX:s,deltaY:r,directionX:l,directionY:c})}function c(e,t){return(e+t)/2}function d(e,t){return Math.sqrt(e*e+t*t)}function u(e,t){e.css({"-ms-touch-action":t,"touch-action":t})}var p=!t.window.PointerEvent,f=t.Plugin("touch",{widget:!0,defaults:{axis:!1,pan:!1,scale:!1,swipe:!1},methods:{_construct:function(e){if(e.touches=[],e.touching=!1,this.on(h.dragStart,m.killEvent),e.swipe&&(e.pan=!0),e.scale&&(e.axis=!1),e.axisX="x"===e.axis,e.axisY="y"===e.axis,t.support.pointer){var a="";!e.axis||e.axisX&&e.axisY?a="none":(e.axisX&&(a+=" pan-y"),e.axisY&&(a+=" pan-x")),u(this,a),this.on(h.pointerDown,e,i)}else this.on(h.touchStart,e,i).on(h.mouseDown,e,n)},_destruct:function(e){this.off(h.namespace),u(this,"")}},events:{pointerDown:p?"MSPointerDown":"pointerdown",pointerUp:p?"MSPointerUp":"pointerup",pointerMove:p?"MSPointerMove":"pointermove",pointerCancel:p?"MSPointerCancel":"pointercancel"}}),h=f.events,m=f.functions,g=t.$window,v=10,y=50;h.pan="pan",h.panStart="panstart",h.panEnd="panend",h.scale="scale",h.scaleStart="scalestart",h.scaleEnd="scaleend",h.swipe="swipe"}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core"],e):e(jQuery,Formstone)}(function(e,t){"use strict";function i(t){t.stopPropagation(),t.preventDefault();var i=t.data,a=t.originalEvent,o=i.target?i.$target:i.$el;i.property&&a.propertyName!==i.property||!e(a.target).is(o)||n(i)}function n(e){e.always||e.$el[r.namespaceClean]("destroy"),e.callback.apply(e.$el)}function a(e){var t=o(e.$check);s(e.styles,t)||n(e),e.styles=t}function o(t){var i,n,a,o={};if(t instanceof e&&(t=t[0]),d.getComputedStyle)for(var s=0,r=(i=d.getComputedStyle(t,null)).length;s<r;s++)n=i[s],a=i.getPropertyValue(n),o[n]=a;else if(t.currentStyle){i=t.currentStyle;for(n in i)o[n]=i[n]}return o}function s(t,i){if(e.type(t)!==e.type(i))return!1;for(var n in t){if(!t.hasOwnProperty(n))return!1;if(!t.hasOwnProperty(n)||!i.hasOwnProperty(n)||t[n]!==i[n])return!1}return!0}var r=t.Plugin("transition",{widget:!0,defaults:{always:!1,property:null,target:null},methods:{_construct:function(e,n){if(n){e.$target=this.find(e.target),e.$check=e.target?e.$target:this,e.callback=n,e.styles=o(e.$check),e.timer=null;var s=e.$check.css(t.transition+"-duration"),r=parseFloat(s);t.support.transition&&s&&r?this.on(l.transitionEnd,e,i):e.timer=c.startTimer(e.timer,50,function(){a(e)},!0)}},_destruct:function(e){c.clearTimer(e.timer,!0),this.off(l.namespace)},resolve:n}}),l=r.events,c=r.functions,d=t.window}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./mediaquery"],e):e(jQuery,Formstone)}(function(e,t){"use strict";function i(){m.scrollDepth&&l()}function n(t){!C&&y&&y.length&&(C=!0,(m=e.extend(m,t||{})).autoEvents&&y.find("a").not("["+P+"]").each(o),m.scrollDepth&&(l(),v.on(b.scroll,s).one(b.load,i)),y.on(b.click,"*["+P+"]",c))}function a(){C&&y&&y.length&&(v.off(b.namespace),y.off(b.namespace),C=!1)}function o(){var t,i=e(this),n="undefined"!==e.type(i[0].href)?i[0].href:"",a=document.domain.split(".").reverse(),o=null!==n.match(a[1]+"."+a[0]);n.match(/^mailto\:/i)?t="Email, Click, "+n.replace(/^mailto\:/i,""):n.match(/^tel\:/i)?t="Telephone, Click, "+n.replace(/^tel\:/i,""):n.match(m.fileTypes)?t="File, Download:"+(/[.]/.exec(n)?/[^.]+$/.exec(n):void 0)[0]+", "+n.replace(/ /g,"-"):o||(t="ExternalLink, Click, "+n),t&&i.attr(P,t)}function s(e){w.startTimer(k,250,r)}function r(){for(var i,n=v.scrollTop()+t.windowHeight,a=1/m.scrollStops,o=a,s=1;s<=m.scrollStops;s++)i=Math.round(100*o).toString(),!T[M][i].passed&&n>T[M][i].edge&&(T[M][i].passed=!0,d(e.extend(m.scrollFields,{eventCategory:"ScrollDepth",eventAction:M,eventLabel:i,nonInteraction:!0}))),o+=a}function l(){var t,i=e.mediaquery("state"),n=y.outerHeight(),a={},o=1/m.scrollStops,s=o,r=0;i.minWidth&&(M="MinWidth:"+i.minWidth+"px");for(var l=1;l<=m.scrollStops;l++)r=parseInt(n*s),a[t=Math.round(100*s).toString()]={edge:"100"===t?r-10:r,passsed:!(!T[M]||!T[M][t])&&T[M][t].passed},s+=o;T[M]=a}function c(t){var i=e(this),n=i.attr("href"),a=i.data(x).split(",");m.eventCallback&&t.preventDefault();for(var o in a)a.hasOwnProperty(o)&&(a[o]=e.trim(a[o]));d({eventCategory:a[0],eventAction:a[1],eventLabel:a[2]||n,eventValue:a[3],nonInteraction:a[4]},i)}function d(t,i){g.location;var n=e.extend({hitType:"event"},t);if("undefined"!==e.type(i)&&!i.attr("data-analytics-stop")){var a="undefined"!==e.type(i[0].href)?i[0].href:"",o=!a.match(/^mailto\:/i)&&!a.match(/^tel\:/i)&&a.indexOf(":")<0?g.location.protocol+"//"+g.location.hostname+"/"+a:a;if(""!==o){var s=i.attr("target");s?g.open(o,s):m.eventCallback&&(n.hitCallback=function(){I&&(w.clearTimer(I),f(o))},I=w.startTimer(I,m.eventTimeout,n.hitCallback))}}p(n)}function u(t){p(e.extend({hitType:"pageview"},t))}function p(t){if("function"===e.type(g.ga)&&"function"===e.type(g.ga.getAll))for(var i=g.ga.getAll(),n=0,a=i.length;n<a;n++)g.ga(i[n].get("name")+".send",t)}function f(e){document.location=e}var h=t.Plugin("analytics",{methods:{_resize:i},utilities:{_delegate:function(){if(arguments.length&&"object"!==e.type(arguments[0]))if("destroy"===arguments[0])a.apply(this);else{var t=Array.prototype.slice.call(arguments,1);switch(arguments[0]){case"pageview":u.apply(this,t);break;case"event":d.apply(this,t)}}else n.apply(this,arguments);return null}}}),m={autoEvents:!1,fileTypes:/\.(zip|exe|dmg|pdf|doc.*|xls.*|ppt.*|mp3|txt|rar|wma|mov|avi|wmv|flv|wav)$/i,eventCallback:!1,eventTimeout:1e3,scrollDepth:!1,scrollStops:5,scrollFields:{}},g=t.window,v=t.$window,y=null,w=h.functions,b=h.events,C=!1,x="analytics-event",P="data-"+x,T={},k=null,M="Site",I=null;t.Ready(function(){y=t.$body})}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core"],e):e(jQuery,Formstone)}(function(e,t){"use strict";function i(){p={unit:r.unit};for(var e in m)if(m.hasOwnProperty(e))for(var t in h[e])if(h[e].hasOwnProperty(t)){var i="Infinity"===t?1/0:parseInt(t,10),n=e.indexOf("max")>-1;h[e][t].matches&&(n?(!p[e]||i<p[e])&&(p[e]=i):(!p[e]||i>p[e])&&(p[e]=i))}}function n(){i(),c.trigger(l.mqChange,[p])}function a(e){var t=o(e.media),i=f[t],n=e.matches,a=n?l.enter:l.leave;if(i&&(i.active||!i.active&&n)){for(var s in i[a])i[a].hasOwnProperty(s)&&i[a][s].apply(i.mq);i.active=!0}}function o(e){return e.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"").replace(/^\s+|\s+$/g,"")}var s=t.Plugin("mediaquery",{utilities:{_initialize:function(t){t=t||{};for(var i in m)m.hasOwnProperty(i)&&(r[i]=t[i]?e.merge(t[i],r[i]):r[i]);(r=e.extend(r,t)).minWidth.sort(u.sortDesc),r.maxWidth.sort(u.sortAsc),r.minHeight.sort(u.sortDesc),r.maxHeight.sort(u.sortAsc);for(var a in m)if(m.hasOwnProperty(a)){h[a]={};for(var o in r[a])if(r[a].hasOwnProperty(o)){var s=window.matchMedia("("+m[a]+": "+(r[a][o]===1/0?1e5:r[a][o])+r.unit+")");s.addListener(n),h[a][r[a][o]]=s}}n()},state:function(){return p},bind:function(e,t,i){var n=d.matchMedia(t),s=o(n.media);f[s]||(f[s]={mq:n,active:!0,enter:{},leave:{}},f[s].mq.addListener(a));for(var r in i)i.hasOwnProperty(r)&&f[s].hasOwnProperty(r)&&(f[s][r][e]=i[r]);var c=f[s],u=n.matches;u&&c[l.enter].hasOwnProperty(e)?(c[l.enter][e].apply(n),c.active=!0):!u&&c[l.leave].hasOwnProperty(e)&&(c[l.leave][e].apply(n),c.active=!1)},unbind:function(e,t){if(e)if(t){var i=o(t);f[i]&&(f[i].enter[e]&&delete f[i].enter[e],f[i].leave[e]&&delete f[i].leave[e])}else for(var n in f)f.hasOwnProperty(n)&&(f[n].enter[e]&&delete f[n].enter[e],f[n].leave[e]&&delete f[n].leave[e])}},events:{mqChange:"mqchange"}}),r={minWidth:[0],maxWidth:[1/0],minHeight:[0],maxHeight:[1/0],unit:"px"},l=e.extend(s.events,{enter:"enter",leave:"leave"}),c=t.$window,d=c[0],u=s.functions,p=null,f=[],h={},m={minWidth:"min-width",maxWidth:"max-width",minHeight:"min-height",maxHeight:"max-height"}}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./mediaquery"],e):e(jQuery,Formstone)}(function(e,t){"use strict";function i(t,i){if(t.enabled&&!t.active){t.group&&!i&&e(t.group).not(t.$el).not(t.linked)[r.namespaceClean]("deactivate",!0);var n=t.group?e(t.group).index(t.$el):null;t.$swaps.addClass(t.classes.raw.active),i||t.linked&&e(t.linked).not(t.$el)[r.namespaceClean]("activate",!0),this.trigger(d.activate,[n]),t.active=!0}}function n(t,i){t.enabled&&t.active&&(t.$swaps.removeClass(t.classes.raw.active),i||t.linked&&e(t.linked).not(t.$el)[r.namespaceClean]("deactivate",!0),this.trigger(d.deactivate),t.active=!1)}function a(t,a){t.enabled||(t.enabled=!0,t.$swaps.addClass(t.classes.raw.enabled),a||e(t.linked).not(t.$el)[r.namespaceClean]("enable"),this.trigger(d.enable),t.onEnable?(t.active=!1,i.call(this,t)):(t.active=!0,n.call(this,t)))}function o(t,i){t.enabled&&(t.enabled=!1,t.$swaps.removeClass([t.classes.raw.enabled,t.classes.raw.active].join(" ")),i||e(t.linked).not(t.$el)[r.namespaceClean]("disable"),this.trigger(d.disable))}function s(e){u.killEvent(e);var t=e.data;t.active&&t.collapse?n.call(t.$el,t):i.call(t.$el,t)}var r=t.Plugin("swap",{widget:!0,defaults:{collapse:!0,maxWidth:1/0},classes:["target","enabled","active"],events:{activate:"activate",deactivate:"deactivate",enable:"enable",disable:"disable"},methods:{_construct:function(t){t.enabled=!1,t.active=!1,t.classes=e.extend(!0,{},c,t.classes),t.target=this.data(l+"-target"),t.$target=e(t.target).addClass(t.classes.raw.target),t.mq="(max-width:"+(t.maxWidth===1/0?"100000px":t.maxWidth)+")";var i=this.data(l+"-linked");t.linked=!!i&&"[data-"+l+'-linked="'+i+'"]';var n=this.data(l+"-group");t.group=!!n&&"[data-"+l+'-group="'+n+'"]',t.$swaps=e().add(this).add(t.$target),this.on(d.click+t.dotGuid,t,s)},_postConstruct:function(t){t.collapse||!t.group||e(t.group).filter("[data-"+l+"-active]").length||e(t.group).eq(0).attr("data-"+l+"-active","true"),t.onEnable=this.data(l+"-active")||!1,e.fsMediaquery("bind",t.rawGuid,t.mq,{enter:function(){a.call(t.$el,t,!0)},leave:function(){o.call(t.$el,t,!0)}})},_destruct:function(t){e.fsMediaquery("unbind",t.rawGuid),t.$swaps.removeClass([t.classes.raw.enabled,t.classes.raw.active].join(" ")).off(d.namespace)},activate:i,deactivate:n,enable:a,disable:o}}),l=r.namespace,c=r.classes,d=r.events,u=r.functions}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./mediaquery","./touch"],e):e(jQuery,Formstone)}(function(e,t){"use strict";function i(){W=e(Y.base)}function n(e){e.enabled&&(S.clearTimer(e.autoTimer),e.enabled=!1,e.$subordinate.off(q.update),this.removeClass([X.enabled,X.animated].join(" ")).off(q.namespace),e.$canister.fsTouch("destroy").off(q.namespace).attr("style","").css(z,"none"),e.$items.css({width:"",height:""}).removeClass([X.visible,Y.item_previous,Y.item_next].join(" ")),e.$images.off(q.namespace),e.$controlItems.off(q.namespace),e.$pagination.html("").off(q.namespace),g(e),e.$canister.css(D,""),e.index=0)}function a(e){e.enabled||(e.enabled=!0,this.addClass(X.enabled),e.$controlItems.on(q.click,e,f),e.$pagination.on(q.click,Y.page,e,h),e.$items.on(q.click,e,T),e.$subordinate.on(q.update,e,M),M({data:e},0),e.$canister.fsTouch({axis:"x",pan:!0,swipe:!0}).on(q.panStart,e,w).on(q.pan,e,b).on(q.panEnd,e,C).on(q.swipe,e,x).on(q.focusIn,e,k).css(z,""),s(e),e.$images.on(q.load,e,u),e.autoAdvance&&(e.autoTimer=S.startTimer(e.autoTimer,e.autoTime,function(){p(e)},!0)),o.call(this,e))}function o(e){if(e.enabled){console.log("resize");var t,i,n,a,o,s,r;if(e.count=e.$items.length,e.count<1)return g(e),void e.$canister.css({height:""});for(this.removeClass(X.animated),e.$canister.find(Y.clone).remove(),e.containerWidth=e.$container.outerWidth(!1),e.visible=y(e),e.perPage=e.paged?1:e.visible,e.itemMarginLeft=parseInt(e.$items.eq(0).css("marginLeft")),e.itemMarginRight=parseInt(e.$items.eq(0).css("marginRight")),e.itemMargin=e.itemMarginLeft+e.itemMarginRight,isNaN(e.itemMargin)&&(e.itemMargin=0),e.itemWidth=(e.containerWidth-e.itemMargin*(e.visible-1))/e.visible,e.itemHeight=0,e.pageWidth=e.paged?e.itemWidth:e.containerWidth,e.pageCount=Math.ceil(e.count/e.perPage),e.$items.css({width:e.matchWidth?e.itemWidth:"",height:""}).removeClass([X.visible,X.item_previous,X.item_next].join(" ")),e.pages=[],i=0,0;i<e.count;i+=e.perPage){for(o=0,s=0,(a=e.$items.slice(i,i+e.perPage)).length<e.perPage&&(a=0===i?e.$items:e.$items.slice(e.$items.length-e.perPage)),n=0;n<a.length;n++)o+=a.eq(n).outerWidth(!0),(t=a.eq(n).outerHeight())>s&&(s=t);e.pages.push({height:s,width:o,$items:a}),s>e.itemHeight&&(e.itemHeight=s)}if(e.indexOffset=0,!e.single&&e.infinite){e.indexOffset=2;var l,c=e.pages.length-1,d=[],u=[];for(i=0;i<e.indexOffset;i++)l={height:e.pages[i].height,width:e.pages[i].width,$items:e.pages[i].$items.clone().addClass(X.clone)},u.push(l),l.width,e.$canister.append(l.$items);for(i=c;i>c-2;i--)l={height:e.pages[i].height,width:e.pages[i].width,$items:e.pages[i].$items.clone().addClass("carousel-clone")},d.push(l),l.width,e.$canister.prepend(l.$items);e.pages=d.concat(e.pages),e.pages=e.pages.concat(u),e.canisterWidth=e.single?e.containerWidth:(e.pageWidth+e.itemMargin)*(e.pageCount+2*e.indexOffset),e.$canister.css({width:e.matchWidth?e.canisterWidth:1e6,height:""})}for(i=0;i<e.pages.length;i++)r=(e.rtl?e.pages[i].$items.eq(e.pages[i].$items.length-1):e.pages[i].$items.eq(0)).position().left,e.pages[i].left=r;e.paged&&(e.pageCount=e.count-e.visible+1),e.pageCount<=0&&(e.pageCount=1),e.minClone=-e.pages[e.indexOffset].left,e.maxClone=-e.pages[e.pageCount+e.indexOffset-1].left,e.maxMove=-e.pages[e.pageCount+2*e.indexOffset-1].left,e.autoHeight?e.$canister.css({height:e.pages[0].height}):e.matchHeight&&e.$items.css({height:e.itemHeight});var p="";for(i=0;i<e.pageCount;i++)p+='<button type="button" class="'+X.page+'">'+(i+1)+"</button>";e.$pagination.html(p),e.pageCount<=1?g(e):v(e),e.$paginationItems=e.$pagination.find(Y.page),m(e,e.index,!1),setTimeout(function(){e.$el.addClass(X.animated)},5)}}function s(e){e.$items=e.$canister.children().not(":hidden").addClass(X.item),e.$images=e.$canister.find("img"),e.totalImages=e.$images.length}function r(e,t){e.$images.off(q.namespace),!1!==t&&e.$canister.html(t),e.index=0,s(e),o.call(this,e)}function l(e,t,i,n,a){e.enabled&&(S.clearTimer(e.autoTimer),void 0===a&&(a=!0),m(e,t-1,a,i,n))}function c(e){var t=e.index-1;e.infinite&&t<0&&(t=e.pageCount-1),m(e,t)}function d(e){var t=e.index+1;e.infinite&&t>=e.pageCount&&(t=0),m(e,t)}function u(e){var t=e.data;t.resizeTimer=S.startTimer(t.resizeTimer,1,function(){o.call(t.$el,t)})}function p(e){var t=e.index+1;t>=e.pageCount&&(t=0),m(e,t)}function f(t){S.killEvent(t);var i=t.data,n=i.index+(e(t.currentTarget).hasClass(X.control_next)?1:-1);S.clearTimer(i.autoTimer),m(i,n)}function h(t){S.killEvent(t);var i=t.data,n=i.$paginationItems.index(e(t.currentTarget));S.clearTimer(i.autoTimer),m(i,n)}function m(t,i,n,a,o){var s=!1;if(i<0&&(i=t.infinite?t.pageCount-1:0,t.infinite)&&(r=t.$canister.css(D).split(","),t.leftPosition=parseInt(r[4]),s=t.leftPosition-t.pages[t.pageCount].left),i>=t.pageCount&&(i=t.infinite?0:t.pageCount-1,t.infinite)){var r=t.$canister.css(D).split(",");t.leftPosition=parseInt(r[4]),s=t.leftPosition+t.pages[t.pageCount].left}if(t.$canister.css(z,"0s"),console.log(s),s&&(t.leftPosition=s,t.useMargin?t.$canister.css({marginLeft:t.leftPosition}):t.$canister.css(D,"translateX("+t.leftPosition+"px)")),!(t.count<1)){i+=t.indexOffset,t.pages[i]&&(t.leftPosition=-t.pages[i].left),t.leftPosition=I(t,t.leftPosition),t.animationTimeout&&(clearTimeout(t.animationTimeout),t.animationTimeout=null),t.animationTimeout=setTimeout(function(){!1!==n&&t.$canister.css(z,"0.25s"),t.$canister.css(D,"translateX("+t.leftPosition+"px)")},50),t.$items.removeClass([X.visible,X.item_previous,X.item_next].join(" "));for(var l=0,c=t.pages.length;l<c;l++)l===i?t.pages[l].$items.addClass(X.visible).attr("aria-hidden","false"):t.pages[l].$items.not(t.pages[i].$items).addClass(l<i?X.item_previous:X.item_next).attr("aria-hidden","true");t.autoHeight&&t.$canister.css({height:t.pages[i].height}),!1!==n&&!0!==a&&i!==t.index&&(t.infinite||i>-1&&i<t.pageCount)&&t.$el.trigger(q.update,[i]),t.index=i-t.indexOffset,t.linked&&!0!==o&&e(t.linked).not(t.$el)[E]("jumpPage",t.index+1,!0,!0),$(t)}}function g(e){e.$controls.removeClass(X.visible),e.$controlItems.removeClass(X.visible),e.$pagination.removeClass(X.visible)}function v(e){e.$controls.addClass(X.visible),e.$controlItems.addClass(X.visible),e.$pagination.addClass(X.visible)}function $(e){e.$paginationItems.removeClass(X.active).eq(e.index).addClass(X.active),e.infinite?e.$controlItems.addClass(X.visible):e.pageCount<1?e.$controlItems.removeClass(X.visible):(e.$controlItems.addClass(X.visible),e.index<=0?e.$controlPrevious.removeClass(X.visible):(e.index>=e.pageCount-1||!e.single&&e.leftPosition===e.maxMove)&&e.$controlNext.removeClass(X.visible))}function y(i){var n=1;if(i.single)return n;if("array"===e.type(i.show))for(var a in i.show)i.show.hasOwnProperty(a)&&(t.support.matchMedia?i.show[a].mq.matches&&(n=i.show[a].count):i.show[a].width<t.fallbackWidth&&(n=i.show[a].count));else n=i.show;return i.fill&&i.count<n?i.count:n}function w(t,i){var n=t.data;if(S.clearTimer(n.autoTimer),!n.single){var a=n.$canister.css(D).split(",");if(n.leftPosition=parseInt(a[4]),n.$canister.css(z,"").css("will-change","transform"),b(t),n.linked&&!0!==i){var o=t.deltaX/n.pageWidth;n.rtl&&(o*=-1),e(n.linked).not(n.$el)[E]("panStart",o)}}n.isTouching=!0}function b(t,i){var n=t.data;if(!n.single&&(n.touchLeft=I(n,n.leftPosition+t.deltaX),n.infinite&&(t.deltaX>0&&n.touchLeft>n.minClone&&(n.touchLeft-=n.pages[n.pageCount].left),t.deltaX<0&&n.touchLeft<n.maxClone&&(n.touchLeft+=n.pages[n.pageCount].left)),n.$canister.css(D,"translateX("+n.touchLeft+"px)"),n.linked&&!0!==i)){var a=t.deltaX/n.pageWidth;n.rtl&&(a*=-1),e(n.linked).not(n.$el)[E]("pan",a)}}function C(t,i){var n=t.data,a=Math.abs(t.deltaX),o=_(n,t),s=!1;if(n.didPan=!1,!n.single){var r,l,c=Math.abs(n.touchLeft),d=!1,u=n.rtl?"right":"left";if(t.directionX===u)for(r=0,l=n.pages.length;r<l;r++)d=n.pages[r],c>Math.abs(d.left)+20&&(s=r+1);else for(r=n.pages.length-1,l=0;r>=l;r--)d=n.pages[r],c<Math.abs(d.left)&&(s=r-1)}!1===s&&(s=a<50?n.index:n.index+o),s!==n.index&&(n.didPan=!0),s-=n.indexOffset,n.linked&&!0!==i&&e(n.linked).not(n.$el)[E]("panEnd",s),P(n,s)}function x(t,i){var n=t.data,a=_(n,t),o=n.index+a;n.linked&&!0!==i&&e(n.linked).not(n.$el)[E]("swipe",t.directionX),P(n,o)}function P(e,t){e.$canister.css(z,"").css("will-change",""),m(e,t),e.isTouching=!1}function T(t){var i=t.data,n=e(t.currentTarget);if(!i.didPan&&(n.trigger(q.itemClick),i.controller)){var a=i.$items.index(n);M(t,a),i.$subordinate[E]("jumpPage",a+1,!0)}}function k(t){var i=t.data;if(i.enabled&&!i.isTouching){S.clearTimer(i.autoTimer),i.$container.scrollLeft(0);var n,a=e(t.target);a.hasClass(X.item)?n=a:a.parents(Y.item).length&&(n=a.parents(Y.item).eq(0));for(var o=0;o<i.pageCount;o++)if(i.pages[o].$items.is(n)){m(i,o);break}}}function M(e,t){var i=e.data;if(i.controller){var n=i.$items.eq(t);i.$items.removeClass(X.active),n.addClass(X.active);for(var a=0;a<i.pageCount;a++)if(i.pages[a].$items.is(n)){m(i,a,!0,!0);break}}}function I(e,t){return isNaN(t)?t=0:e.rtl?(t>e.maxMove&&(t=e.maxMove),t<0&&(t=0)):(t<e.maxMove&&(t=e.maxMove),t>0&&(t=0)),t}function _(e,t){return e.rtl?"right"===t.directionX?1:-1:"left"===t.directionX?1:-1}var O=t.Plugin("carousel",{widget:!0,defaults:{autoAdvance:!1,autoHeight:!1,autoTime:8e3,contained:!0,controls:!0,customClass:"",fill:!1,infinite:!0,labels:{next:"Next",previous:"Previous",controls:"Carousel {guid} Controls",pagination:"Carousel {guid} Pagination"},matchHeight:!1,matchWidth:!0,maxWidth:1/0,minWidth:"0px",paged:!1,pagination:!0,rtl:!1,show:1,single:!1,theme:"fs-light"},classes:["ltr","rtl","viewport","wrapper","container","canister","item","item_previous","item_next","clone","controls","controls_custom","control","control_previous","control_next","pagination","page","animated","enabled","visible","active","auto_height","contained","single"],events:{itemClick:"itemClick",update:"update"},methods:{_construct:function(t){var o;t.didPan=!1,t.carouselClasses=[X.base,t.theme,t.customClass,t.rtl?X.rtl:X.ltr],t.maxWidth=t.maxWidth===1/0?"100000px":t.maxWidth,t.mq="(min-width:"+t.minWidth+") and (max-width:"+t.maxWidth+")",t.customControls="object"===e.type(t.controls)&&t.controls.previous&&t.controls.next,
t.customPagination="string"===e.type(t.pagination),t.id=this.attr("id"),t.id?t.ariaId=t.id:(t.ariaId=t.rawGuid,this.attr("id",t.ariaId));var r="",l="",c=[X.control,X.control_previous].join(" "),d=[X.control,X.control_next].join(" ");t.controls&&!t.customControls&&(t.labels.controls=t.labels.controls.replace("{guid}",t.numGuid),r+='<div class="'+X.controls+'" aria-label="'+t.labels.controls+'" aria-controls="'+t.ariaId+'">',r+='<button type="button" class="'+c+'" aria-label="'+t.labels.previous+'">'+t.labels.previous+"</button>",r+='<button type="button" class="'+d+'" aria-label="'+t.labels.next+'">'+t.labels.next+"</button>",r+="</div>"),t.pagination&&!t.customPagination&&(t.labels.pagination=t.labels.pagination.replace("{guid}",t.numGuid),l+='<div class="'+X.pagination+'" aria-label="'+t.labels.pagination+'" aria-controls="'+t.ariaId+'" role="navigation">',l+="</div>"),t.autoHeight&&t.carouselClasses.push(X.auto_height),t.contained&&t.carouselClasses.push(X.contained),t.single&&t.carouselClasses.push(X.single),this.addClass(t.carouselClasses.join(" ")).wrapInner('<div class="'+X.wrapper+'" aria-live="polite"><div class="'+X.container+'"><div class="'+X.canister+'"></div></div></div>').append(r).wrapInner('<div class="'+X.viewport+'"></div>').append(l),t.$viewport=this.find(Y.viewport).eq(0),t.$container=this.find(Y.container).eq(0),t.$canister=this.find(Y.canister).eq(0),t.$pagination=this.find(Y.pagination).eq(0),t.$controlPrevious=t.$controlNext=e(""),t.customControls?(t.$controls=e(t.controls.container).addClass([X.controls,X.controls_custom].join(" ")),t.$controlPrevious=e(t.controls.previous).addClass(c),t.$controlNext=e(t.controls.next).addClass(d)):(t.$controls=this.find(Y.controls).eq(0),t.$controlPrevious=t.$controls.find(Y.control_previous),t.$controlNext=t.$controls.find(Y.control_next)),t.$controlItems=t.$controlPrevious.add(t.$controlNext),t.customPagination&&(t.$pagination=e(t.pagination).addClass([X.pagination])),t.$paginationItems=t.$pagination.find(Y.page),t.index=0,t.enabled=!1,t.leftPosition=0,t.autoTimer=null,t.resizeTimer=null;var u=this.data(j+"-linked");t.linked=!!u&&"[data-"+j+'-linked="'+u+'"]',t.linked&&(t.paged=!0);var p=this.data(j+"-controller-for")||"";if(t.$subordinate=e(p),t.$subordinate.length&&(t.controller=!0),"object"===e.type(t.show)){var f=t.show,h=[],m=[];for(o in f)f.hasOwnProperty(o)&&m.push(o);m.sort(S.sortAsc);for(o in m)m.hasOwnProperty(o)&&h.push({width:parseInt(m[o]),count:f[m[o]],mq:window.matchMedia("(min-width: "+parseInt(m[o])+"px)")});t.show=h}s(t),e.fsMediaquery("bind",t.rawGuid,t.mq,{enter:function(){a.call(t.$el,t)},leave:function(){n.call(t.$el,t)}}),i(),t.carouselClasses.push(X.enabled),t.carouselClasses.push(X.animated)},_destruct:function(t){S.clearTimer(t.autoTimer),S.clearTimer(t.resizeTimer),n.call(this,t),e.fsMediaquery("unbind",t.rawGuid),t.id!==t.ariaId&&this.removeAttr("id"),t.$controlItems.removeClass([Y.control,X.control_previous,Y.control_next,Y.visible].join(" ")).off(q.namespace),t.$images.off(q.namespace),t.$canister.fsTouch("destroy"),t.$items.removeClass([X.item,X.visible,Y.item_previous,Y.item_next].join(" ")).unwrap().unwrap().unwrap().unwrap(),t.controls&&!t.customControls&&t.$controls.remove(),t.customControls&&t.$controls.removeClass([X.controls,X.controls_custom,X.visible].join(" ")),t.pagination&&!t.customPagination&&t.$pagination.remove(),t.customPagination&&t.$pagination.html("").removeClass([X.pagination,X.visible].join(" ")),this.removeClass(t.carouselClasses.join(" ")),i()},_resize:function(e){S.iterate.call(W,o)},disable:n,enable:a,jump:l,previous:c,next:d,jumpPage:l,previousPage:c,nextPage:d,jumpItem:function(e,t,i,n,a){if(e.enabled){S.clearTimer(e.autoTimer);var o=e.$items.eq(t-1);void 0===a&&(a=!0);for(var s=0;s<e.pageCount;s++)if(e.pages[s].$items.is(o)){m(e,s,a,i,n);break}}},reset:function(e){e.enabled&&r.call(this,e,!1)},resize:o,update:r,panStart:function(e,t){if(S.clearTimer(e.autoTimer),!e.single){e.rtl&&(t*=-1);var i=e.$canister.css(D).split(",");e.leftPosition=parseInt(i[4]),e.$canister.css(z,"none"),b({data:e,deltaX:e.pageWidth*t},!0)}e.isTouching=!0},pan:function(e,t){if(!e.single){e.rtl&&(t*=-1);var i=e.pageWidth*t;e.touchLeft=I(e,e.leftPosition+i),e.$canister.css(D,"translateX("+e.touchLeft+"px)")}},panEnd:function(e,t){P(e,t)},swipe:function(e,t){x({data:e,directionX:t},!0)}}}),j=O.namespace,E=O.namespaceClean,Y=O.classes,X=Y.raw,q=O.events,S=O.functions,W=[],D=t.transform,z=t.transition}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./transition"],e):e(jQuery,Formstone)}(function(e,t){"use strict";function i(){(T=P.scrollTop()+t.windowHeight)<0&&(T=0),x.iterate.call(M,g)}function n(){k=e(w.base),M=e(w.lazy),x.iterate.call(M,m)}function a(e){if(e.visible){var t=e.source;e.source=null,o(e,t,!0)}}function o(t,i,n){if(i!==t.source&&t.visible){if(t.source=i,t.responsive=!1,t.isYouTube=!1,"object"===e.type(i)&&"string"===e.type(i.video)){var a=i.video.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i);a&&a.length>=1&&(t.isYouTube=!0,t.videoId=a[1])}var o=!t.isYouTube&&"object"===e.type(i)&&(i.hasOwnProperty("mp4")||i.hasOwnProperty("ogg")||i.hasOwnProperty("webm"));if(t.video=t.isYouTube||o,t.playing=!1,t.isYouTube)t.playerReady=!1,t.posterLoaded=!1,c(t,i,n);else if("object"===e.type(i)&&i.hasOwnProperty("poster"))l(t,i,n);else{var d=i;if("object"===e.type(i)){var u,p=[],f=[];for(u in i)i.hasOwnProperty(u)&&f.push(u);f.sort(x.sortAsc);for(u in f)f.hasOwnProperty(u)&&p.push({width:parseInt(f[u]),url:i[f[u]],mq:$.matchMedia("(min-width: "+parseInt(f[u])+"px)")});t.responsive=!0,t.sources=p,d=s(t)}r(t,d,!1,n)}}else t.$el.trigger(C.loaded)}function s(e){var i=e.source;if(e.responsive){i=e.sources[0].url;for(var n in e.sources)e.sources.hasOwnProperty(n)&&(t.support.matchMedia?e.sources[n].mq.matches&&(i=e.sources[n].url):e.sources[n].width<t.fallbackWidth&&(i=e.sources[n].url))}return i}function r(t,i,n,a){var o=[b.media,b.image,!0!==a?b.animated:""].join(" "),s=e('<div class="'+o+'" aria-hidden="true"><img alt="'+t.alt+'"></div>'),r=s.find("img"),l=i;r.one(C.load,function(){I&&s.addClass(b.native).css({backgroundImage:"url('"+l+"')"}),s.fsTransition({property:"opacity"},function(){n||d(t)}).css({opacity:1}),h(t),n&&!a||t.$el.trigger(C.loaded)}).one(C.error,t,u).attr("src",l),t.responsive&&s.addClass(b.responsive),t.$container.append(s),(r[0].complete||4===r[0].readyState)&&r.trigger(C.load),t.currentSource=l}function l(i,n,a){if(i.source&&i.source.poster&&(r(i,i.source.poster,!0,!0),a=!1),!t.isMobile){var o='<div class="'+[b.media,b.video,!0!==a?b.animated:""].join(" ")+'" aria-hidden="true">';o+="<video",i.loop&&(o+=" loop"),i.mute&&(o+=" muted"),o+=">",i.source.webm&&(o+='<source src="'+i.source.webm+'" type="video/webm" />'),i.source.mp4&&(o+='<source src="'+i.source.mp4+'" type="video/mp4" />'),i.source.ogg&&(o+='<source src="'+i.source.ogg+'" type="video/ogg" />'),o+="</video>";var s=e(o+="</div>");s.find("video").one(C.loadedMetaData,function(e){s.fsTransition({property:"opacity"},function(){d(i)}).css({opacity:1}),h(i),i.$el.trigger(C.loaded),i.autoPlay&&p(i)}),i.$container.append(s)}}function c(i,n,a){if(!i.videoId){var o=n.match(/^.*(?:youtu.be\/|v\/|e\/|u\/\w+\/|embed\/|v=)([^#\&\?]*).*/);i.videoId=o[1]}if(i.posterLoaded||(i.source.poster||(i.source.poster="//img.youtube.com/vi/"+i.videoId+"/0.jpg"),i.posterLoaded=!0,r(i,i.source.poster,!0,a),a=!1),!t.isMobile)if(e("script[src*='youtube.com/iframe_api']").length||e("head").append('<script src="//www.youtube.com/iframe_api"></script>'),_){var s=i.guid+"_"+i.youTubeGuid++,l='<div class="'+[b.media,b.embed,!0!==a?b.animated:""].join(" ")+'" aria-hidden="true">';l+='<div id="'+s+'"></div>';var c=e(l+="</div>"),p=e.extend(!0,{},{controls:0,rel:0,showinfo:0,wmode:"transparent",enablejsapi:1,version:3,playerapiid:s,loop:i.loop?1:0,autoplay:1,origin:$.location.protocol+"//"+$.location.host},i.youtubeOptions);p.autoplay=1,i.$container.append(c),i.player&&(i.oldPlayer=i.player,i.player=null),i.player=new $.YT.Player(s,{videoId:i.videoId,playerVars:p,events:{onReady:function(e){i.playerReady=!0,i.mute&&i.player.mute(),i.autoPlay||i.player.pauseVideo()},onStateChange:function(e){i.playing||e.data!==$.YT.PlayerState.PLAYING?i.loop&&i.playing&&e.data===$.YT.PlayerState.ENDED&&i.player.playVideo():(i.playing=!0,c.fsTransition({property:"opacity"},function(){d(i)}).css({opacity:1}),h(i),i.$el.trigger(C.loaded)),i.$el.find(w.embed).addClass(b.ready)},onPlaybackQualityChange:function(e){},onPlaybackRateChange:function(e){},onError:function(e){u({data:i})},onApiChange:function(e){}}}),h(i)}else O.push({data:i,source:n})}function d(e){var t=e.$container.find(w.media);t.length>=1&&(t.not(":last").remove(),e.oldPlayer=null)}function u(e){e.data.$el.trigger(C.error)}function p(e){if(e.video&&!e.playing)if(e.isYouTube)e.playerReady?e.player.playVideo():e.autoPlay=!0;else{var t=e.$container.find("video");t.length&&t[0].play(),e.playing=!0}}function f(e){if(e.visible)if(e.responsive){var t=s(e);t!==e.currentSource?r(e,t,!1,!0):h(e)}else h(e)}function h(e){for(var t=e.$container.find(w.media),i=0,n=t.length;i<n;i++){var a=t.eq(i),o=e.isYouTube?"iframe":a.find("video").length?"video":"img",s=a.find(o);if(s.length&&("img"!==o||!I)){var r=e.$el.outerWidth(),l=e.$el.outerHeight(),c=v(e,s);e.width=c.width,e.height=c.height,e.left=0,e.top=0;var d=e.isYouTube?e.embedRatio:e.width/e.height;e.height=l,e.width=e.height*d,e.width<r&&(e.width=r,e.height=e.width/d),e.left=-(e.width-r)/2,e.top=-(e.height-l)/2,a.css({height:e.height,width:e.width,left:e.left,top:e.top})}}}function m(e){e.scrollTop=e.$el.offset().top}function g(e){!e.visible&&e.scrollTop<T+e.lazyEdge&&(e.visible=!0,a(e))}function v(t,i){if(t.isYouTube)return{height:500,width:500/t.embedRatio};if(i.is("img")){var n=i[0];if("undefined"!==e.type(n.naturalHeight))return{height:n.naturalHeight,width:n.naturalWidth};var a=new Image;return a.src=n.src,{height:a.height,width:a.width}}return{height:i[0].videoHeight,width:i[0].videoWidth}}var y=t.Plugin("background",{widget:!0,defaults:{alt:"",autoPlay:!0,customClass:"",embedRatio:1.777777,lazy:!1,lazyEdge:100,loop:!0,mute:!0,source:null,youtubeOptions:{}},classes:["container","media","animated","responsive","native","fixed","ready","lazy"],events:{loaded:"loaded",ready:"ready",loadedMetaData:"loadedmetadata"},methods:{_construct:function(t){t.youTubeGuid=0,t.$container=e('<div class="'+b.container+'"></div>').appendTo(this),t.thisClasses=[b.base,t.customClass],t.visible=!0,t.lazy&&(t.visible=!1,t.thisClasses.push(b.lazy)),this.addClass(t.thisClasses.join(" ")),n(),t.lazy?(m(t),g(t)):a(t)},_destruct:function(e){e.$container.remove(),this.removeClass(e.thisClasses.join(" ")).off(C.namespace),n()},_resize:function(){x.iterate.call(k,f),x.iterate.call(M,m),x.iterate.call(M,g)},play:p,pause:function(e){if(e.video&&e.playing){if(e.isYouTube)e.playerReady?e.player.pauseVideo():e.autoPlay=!1;else{var t=e.$container.find("video");t.length&&t[0].pause()}e.playing=!1}},mute:function(e){if(e.video)if(e.isYouTube&&e.playerReady)e.player.mute();else{var t=e.$container.find("video");t.length&&(t[0].muted=!0)}e.mute=!0},unmute:function(e){if(e.video){if(e.isYouTube&&e.playerReady)e.player.unMute();else{var t=e.$container.find("video");t.length&&(t[0].muted=!1)}e.playing=!0}e.mute=!1},resize:h,load:o,unload:function(e){var t=e.$container.find(w.media);t.length>=1&&t.fsTransition({property:"opacity"},function(){t.remove(),delete e.source}).css({opacity:0})}}}),w=y.classes,b=w.raw,C=y.events,x=y.functions,$=t.window,P=t.$window,T=0,k=[],M=[],I="backgroundSize"in t.document.documentElement.style,_=!1,O=[];t.Ready(function(){i(),P.on("scroll",i)}),$.onYouTubeIframeAPIReady=function(){_=!0;for(var e in O)O.hasOwnProperty(e)&&c(O[e].data,O[e].source);O=[]}});