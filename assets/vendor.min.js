!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){"use strict";function t(e,t,n,i){var a,o={raw:{}};i=i||{};for(a in i)i.hasOwnProperty(a)&&("classes"===e?(o.raw[i[a]]=t+"-"+i[a],o[i[a]]="."+t+"-"+i[a]):(o.raw[a]=i[a],o[a]=i[a]+"."+t));for(a in n)n.hasOwnProperty(a)&&("classes"===e?(o.raw[a]=n[a].replace(/{ns}/g,t),o[a]=n[a].replace(/{ns}/g,"."+t)):(o.raw[a]=n[a].replace(/.{ns}/g,""),o[a]=n[a].replace(/{ns}/g,t)));return o}function n(){f.windowWidth=f.$window.width(),f.windowHeight=f.$window.height(),v=p.startTimer(v,y,i)}function i(){for(var e in f.ResizeHandlers)f.ResizeHandlers.hasOwnProperty(e)&&f.ResizeHandlers[e].callback.call(window,f.windowWidth,f.windowHeight)}function a(){if(f.support.raf){f.window.requestAnimationFrame(a);for(var e in f.RAFHandlers)f.RAFHandlers.hasOwnProperty(e)&&f.RAFHandlers[e].callback.call(window)}}function o(e,t){return parseInt(e.priority)-parseInt(t.priority)}var s,r,l,c="undefined"!=typeof window?window:this,d=c.document,u=function(){this.Version="@version",this.Plugins={},this.DontConflict=!1,this.Conflicts={fn:{}},this.ResizeHandlers=[],this.RAFHandlers=[],this.window=c,this.$window=e(c),this.document=d,this.$document=e(d),this.$body=null,this.windowWidth=0,this.windowHeight=0,this.fallbackWidth=1024,this.fallbackHeight=768,this.userAgent=window.navigator.userAgent||window.navigator.vendor||window.opera,this.isFirefox=/Firefox/i.test(this.userAgent),this.isChrome=/Chrome/i.test(this.userAgent),this.isSafari=/Safari/i.test(this.userAgent)&&!this.isChrome,this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(this.userAgent),this.isIEMobile=/IEMobile/i.test(this.userAgent),this.isFirefoxMobile=this.isFirefox&&this.isMobile,this.transform=null,this.transition=null,this.support={file:!!(window.File&&window.FileList&&window.FileReader),history:!!(window.history&&window.history.pushState&&window.history.replaceState),matchMedia:!(!window.matchMedia&&!window.msMatchMedia),pointer:!!window.PointerEvent,raf:!(!window.requestAnimationFrame||!window.cancelAnimationFrame),touch:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),transition:!1,transform:!1}},p={killEvent:function(e,t){try{e.preventDefault(),e.stopPropagation(),t&&e.stopImmediatePropagation()}catch(e){}},killGesture:function(e){try{e.preventDefault()}catch(e){}},lockViewport:function(t){w[t]=!0,e.isEmptyObject(w)||b||(s.length?s.attr("content",l):s=e("head").append('<meta name="viewport" content="'+l+'">'),f.$body.on(m.gestureChange,p.killGesture).on(m.gestureStart,p.killGesture).on(m.gestureEnd,p.killGesture),b=!0)},unlockViewport:function(t){"undefined"!==e.type(w[t])&&delete w[t],e.isEmptyObject(w)&&b&&(s.length&&(r?s.attr("content",r):s.remove()),f.$body.off(m.gestureChange).off(m.gestureStart).off(m.gestureEnd),b=!1)},startTimer:function(e,t,n,i){return p.clearTimer(e),i?setInterval(n,t):setTimeout(n,t)},clearTimer:function(e,t){e&&(t?clearInterval(e):clearTimeout(e),e=null)},sortAsc:function(e,t){return parseInt(e,10)-parseInt(t,10)},sortDesc:function(e,t){return parseInt(t,10)-parseInt(e,10)},decodeEntities:function(e){var t=f.document.createElement("textarea");return t.innerHTML=e,t.value},parseQueryString:function(e){for(var t={},n=e.slice(e.indexOf("?")+1).split("&"),i=0;i<n.length;i++){var a=n[i].split("=");t[a[0]]=a[1]}return t}},f=new u,h=e.Deferred(),g={base:"{ns}",element:"{ns}-element"},m={namespace:".{ns}",beforeUnload:"beforeunload.{ns}",blur:"blur.{ns}",change:"change.{ns}",click:"click.{ns}",dblClick:"dblclick.{ns}",drag:"drag.{ns}",dragEnd:"dragend.{ns}",dragEnter:"dragenter.{ns}",dragLeave:"dragleave.{ns}",dragOver:"dragover.{ns}",dragStart:"dragstart.{ns}",drop:"drop.{ns}",error:"error.{ns}",focus:"focus.{ns}",focusIn:"focusin.{ns}",focusOut:"focusout.{ns}",gestureChange:"gesturechange.{ns}",gestureStart:"gesturestart.{ns}",gestureEnd:"gestureend.{ns}",input:"input.{ns}",keyDown:"keydown.{ns}",keyPress:"keypress.{ns}",keyUp:"keyup.{ns}",load:"load.{ns}",mouseDown:"mousedown.{ns}",mouseEnter:"mouseenter.{ns}",mouseLeave:"mouseleave.{ns}",mouseMove:"mousemove.{ns}",mouseOut:"mouseout.{ns}",mouseOver:"mouseover.{ns}",mouseUp:"mouseup.{ns}",panStart:"panstart.{ns}",pan:"pan.{ns}",panEnd:"panend.{ns}",resize:"resize.{ns}",scaleStart:"scalestart.{ns}",scaleEnd:"scaleend.{ns}",scale:"scale.{ns}",scroll:"scroll.{ns}",select:"select.{ns}",swipe:"swipe.{ns}",touchCancel:"touchcancel.{ns}",touchEnd:"touchend.{ns}",touchLeave:"touchleave.{ns}",touchMove:"touchmove.{ns}",touchStart:"touchstart.{ns}"},v=null,y=20,w=[],b=!1;return u.prototype.NoConflict=function(){f.DontConflict=!0;for(var t in f.Plugins)f.Plugins.hasOwnProperty(t)&&(e[t]=f.Conflicts[t],e.fn[t]=f.Conflicts.fn[t])},u.prototype.Ready=function(e){"complete"===f.document.readyState||"loading"!==f.document.readyState&&!f.document.documentElement.doScroll?e():f.document.addEventListener("DOMContentLoaded",e)},u.prototype.Plugin=function(n,i){return f.Plugins[n]=function(n,i){function a(t){var a,o,r,c="object"===e.type(t),d=Array.prototype.slice.call(arguments,c?1:0),u=this,p=e();for(t=e.extend(!0,{},i.defaults||{},c?t:{}),o=0,r=u.length;o<r;o++)if(a=u.eq(o),!s(a)){i.guid++;var f="__"+i.guid,h=i.classes.raw.base+f,g=a.data(n+"-options"),m=e.extend(!0,{$el:a,guid:f,numGuid:i.guid,rawGuid:h,dotGuid:"."+h},t,"object"===e.type(g)?g:{});a.addClass(i.classes.raw.element).data(l,m),i.methods._construct.apply(a,[m].concat(d)),p=p.add(a)}for(o=0,r=p.length;o<r;o++)a=p.eq(o),i.methods._postConstruct.apply(a,[s(a)]);return u}function s(e){return e.data(l)}var r="fs-"+n,l="fs"+n.replace(/(^|\s)([a-z])/g,function(e,t,n){return t+n.toUpperCase()});return i.initialized=!1,i.priority=i.priority||10,i.classes=t("classes",r,g,i.classes),i.events=t("events",n,m,i.events),i.functions=e.extend({getData:s,iterate:function(t){for(var n=this,i=Array.prototype.slice.call(arguments,1),a=0,o=n.length;a<o;a++){var r=n.eq(a),l=s(r)||{};"undefined"!==e.type(l.$el)&&t.apply(r,[l].concat(i))}return n}},p,i.functions),i.methods=e.extend(!0,{_construct:e.noop,_postConstruct:e.noop,_destruct:e.noop,_resize:!1,destroy:function(e){i.functions.iterate.apply(this,[i.methods._destruct].concat(Array.prototype.slice.call(arguments,1))),this.removeClass(i.classes.raw.element).removeData(l)}},i.methods),i.utilities=e.extend(!0,{_initialize:!1,_delegate:!1,defaults:function(t){i.defaults=e.extend(!0,i.defaults,t||{})}},i.utilities),i.widget&&(f.Conflicts.fn[n]=e.fn[n],e.fn[l]=function(t){if(this instanceof e){var n=i.methods[t];if("object"===e.type(t)||!t)return a.apply(this,arguments);if(n&&0!==t.indexOf("_")){var o=[n].concat(Array.prototype.slice.call(arguments,1));return i.functions.iterate.apply(this,o)}return this}},f.DontConflict||(e.fn[n]=e.fn[l])),f.Conflicts[n]=e[n],e[l]=i.utilities._delegate||function(t){var n=i.utilities[t]||i.utilities._initialize||!1;if(n){var a=Array.prototype.slice.call(arguments,"object"===e.type(t)?0:1);return n.apply(window,a)}},f.DontConflict||(e[n]=e[l]),i.namespace=n,i.namespaceClean=l,i.guid=0,i.methods._resize&&(f.ResizeHandlers.push({namespace:n,priority:i.priority,callback:i.methods._resize}),f.ResizeHandlers.sort(o)),i.methods._raf&&(f.RAFHandlers.push({namespace:n,priority:i.priority,callback:i.methods._raf}),f.RAFHandlers.sort(o)),i}(n,i),f.Plugins[n]},f.$window.on("resize.fs",n),n(),a(),f.Ready(function(){f.$body=e("body"),e("html").addClass(f.support.touch?"touchevents":"no-touchevents"),s=e('meta[name="viewport"]'),r=!!s.length&&s.attr("content"),l="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0",h.resolve()}),m.clickTouchStart=m.click+" "+m.touchStart,function(){var e,t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"},n=["transition","-webkit-transition"],i={transform:"transform",MozTransform:"-moz-transform",OTransform:"-o-transform",msTransform:"-ms-transform",webkitTransform:"-webkit-transform"},a="transitionend",o="",s="",r=document.createElement("div");for(e in t)if(t.hasOwnProperty(e)&&e in r.style){a=t[e],f.support.transition=!0;break}m.transitionEnd=a+".{ns}";for(e in n)if(n.hasOwnProperty(e)&&n[e]in r.style){o=n[e];break}f.transition=o;for(e in i)if(i.hasOwnProperty(e)&&i[e]in r.style){f.support.transform=!0,s=i[e];break}f.transform=s}(),window.Formstone=f,f}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core"],e):e(jQuery,Formstone)}(function(e,t){"use strict";function n(e){e.preventManipulation&&e.preventManipulation();var t=e.data,n=e.originalEvent;if(n.type.match(/(up|end|cancel)$/i))o(e);else{if(n.pointerId){var s=!1;for(var r in t.touches)t.touches[r].id===n.pointerId&&(s=!0,t.touches[r].pageX=n.pageX,t.touches[r].pageY=n.pageY);s||t.touches.push({id:n.pointerId,pageX:n.pageX,pageY:n.pageY})}else t.touches=n.touches;n.type.match(/(down|start)$/i)?i(e):n.type.match(/move$/i)&&a(e)}}function i(i){var s=i.data,r="undefined"!==e.type(s.touches)&&s.touches.length?s.touches[0]:null;r&&s.$el.off(h.mouseDown),s.touching||(s.startE=i.originalEvent,s.startX=r?r.pageX:i.pageX,s.startY=r?r.pageY:i.pageY,s.startT=(new Date).getTime(),s.scaleD=1,s.passed=!1),s.$links&&s.$links.off(h.click);var u=l(s.scale?h.scaleStart:h.panStart,i,s.startX,s.startY,s.scaleD,0,0,"","");if(s.scale&&s.touches&&s.touches.length>=2){var p=s.touches;s.pinch={startX:c(p[0].pageX,p[1].pageX),startY:c(p[0].pageY,p[1].pageY),startD:d(p[1].pageX-p[0].pageX,p[1].pageY-p[0].pageY)},u.pageX=s.startX=s.pinch.startX,u.pageY=s.startY=s.pinch.startY}s.touching||(s.touching=!0,s.pan&&!r&&m.on(h.mouseMove,s,a).on(h.mouseUp,s,o),t.support.pointer?m.on([h.pointerMove,h.pointerUp,h.pointerCancel].join(" "),s,n):m.on([h.touchMove,h.touchEnd,h.touchCancel].join(" "),s,n),s.$el.trigger(u))}function a(t){var n=t.data,i="undefined"!==e.type(n.touches)&&n.touches.length?n.touches[0]:null,a=i?i.pageX:t.pageX,s=i?i.pageY:t.pageY,r=a-n.startX,u=s-n.startY,p=r>0?"right":"left",f=u>0?"down":"up",m=Math.abs(r)>v,y=Math.abs(u)>v;if(!n.passed&&n.axis&&(n.axisX&&y||n.axisY&&m))o(t);else{!n.passed&&(!n.axis||n.axis&&n.axisX&&m||n.axisY&&y)&&(n.passed=!0),n.passed&&(g.killEvent(t),g.killEvent(n.startE));var w=!0,b=l(n.scale?h.scale:h.pan,t,a,s,n.scaleD,r,u,p,f);if(n.scale)if(n.touches&&n.touches.length>=2){var C=n.touches;n.pinch.endX=c(C[0].pageX,C[1].pageX),n.pinch.endY=c(C[0].pageY,C[1].pageY),n.pinch.endD=d(C[1].pageX-C[0].pageX,C[1].pageY-C[0].pageY),n.scaleD=n.pinch.endD/n.pinch.startD,b.pageX=n.pinch.endX,b.pageY=n.pinch.endY,b.scale=n.scaleD,b.deltaX=n.pinch.endX-n.pinch.startX,b.deltaY=n.pinch.endY-n.pinch.startY}else n.pan||(w=!1);w&&n.$el.trigger(b)}}function o(t){var n=t.data,a="undefined"!==e.type(n.touches)&&n.touches.length?n.touches[0]:null,o=a?a.pageX:t.pageX,r=a?a.pageY:t.pageY,c=o-n.startX,d=r-n.startY,u=(new Date).getTime(),p=n.scale?h.scaleEnd:h.panEnd,f=c>0?"right":"left",w=d>0?"down":"up",b=Math.abs(c)>1,C=Math.abs(d)>1;if(n.swipe&&Math.abs(c)>v&&u-n.startT<y&&(p=h.swipe),n.axis&&(n.axisX&&C||n.axisY&&b)||b||C){n.$links=n.$el.find("a");for(var x=0,P=n.$links.length;x<P;x++)s(n.$links.eq(x),n)}var T=l(p,t,o,r,n.scaleD,c,d,f,w);m.off([h.touchMove,h.touchEnd,h.touchCancel,h.mouseMove,h.mouseUp,h.pointerMove,h.pointerUp,h.pointerCancel].join(" ")),n.$el.trigger(T),n.touches=[],n.scale,a&&(n.touchTimer=g.startTimer(n.touchTimer,5,function(){n.$el.on(h.mouseDown,n,i)})),n.touching=!1}function s(t,n){t.on(h.click,n,r);var i=e._data(t[0],"events").click;i.unshift(i.pop())}function r(e){g.killEvent(e,!0),e.data.$links.off(h.click)}function l(t,n,i,a,o,s,r,l,c){return e.Event(t,{originalEvent:n,bubbles:!0,pageX:i,pageY:a,scale:o,deltaX:s,deltaY:r,directionX:l,directionY:c})}function c(e,t){return(e+t)/2}function d(e,t){return Math.sqrt(e*e+t*t)}function u(e,t){e.css({"-ms-touch-action":t,"touch-action":t})}var p=!t.window.PointerEvent,f=t.Plugin("touch",{widget:!0,defaults:{axis:!1,pan:!1,scale:!1,swipe:!1},methods:{_construct:function(e){if(e.touches=[],e.touching=!1,this.on(h.dragStart,g.killEvent),e.swipe&&(e.pan=!0),e.scale&&(e.axis=!1),e.axisX="x"===e.axis,e.axisY="y"===e.axis,t.support.pointer){var a="";!e.axis||e.axisX&&e.axisY?a="none":(e.axisX&&(a+=" pan-y"),e.axisY&&(a+=" pan-x")),u(this,a),this.on(h.pointerDown,e,n)}else this.on(h.touchStart,e,n).on(h.mouseDown,e,i)},_destruct:function(e){this.off(h.namespace),u(this,"")}},events:{pointerDown:p?"MSPointerDown":"pointerdown",pointerUp:p?"MSPointerUp":"pointerup",pointerMove:p?"MSPointerMove":"pointermove",pointerCancel:p?"MSPointerCancel":"pointercancel"}}),h=f.events,g=f.functions,m=t.$window,v=10,y=50;h.pan="pan",h.panStart="panstart",h.panEnd="panend",h.scale="scale",h.scaleStart="scalestart",h.scaleEnd="scaleend",h.swipe="swipe"}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core"],e):e(jQuery,Formstone)}(function(e,t){"use strict";function n(t){t.stopPropagation(),t.preventDefault();var n=t.data,a=t.originalEvent,o=n.target?n.$target:n.$el;n.property&&a.propertyName!==n.property||!e(a.target).is(o)||i(n)}function i(e){e.always||e.$el[r.namespaceClean]("destroy"),e.callback.apply(e.$el)}function a(e){var t=o(e.$check);s(e.styles,t)||i(e),e.styles=t}function o(t){var n,i,a,o={};if(t instanceof e&&(t=t[0]),d.getComputedStyle)for(var s=0,r=(n=d.getComputedStyle(t,null)).length;s<r;s++)i=n[s],a=n.getPropertyValue(i),o[i]=a;else if(t.currentStyle){n=t.currentStyle;for(i in n)o[i]=n[i]}return o}function s(t,n){if(e.type(t)!==e.type(n))return!1;for(var i in t){if(!t.hasOwnProperty(i))return!1;if(!t.hasOwnProperty(i)||!n.hasOwnProperty(i)||t[i]!==n[i])return!1}return!0}var r=t.Plugin("transition",{widget:!0,defaults:{always:!1,property:null,target:null},methods:{_construct:function(e,i){if(i){e.$target=this.find(e.target),e.$check=e.target?e.$target:this,e.callback=i,e.styles=o(e.$check),e.timer=null;var s=e.$check.css(t.transition+"-duration"),r=parseFloat(s);t.support.transition&&s&&r?this.on(l.transitionEnd,e,n):e.timer=c.startTimer(e.timer,50,function(){a(e)},!0)}},_destruct:function(e){c.clearTimer(e.timer,!0),this.off(l.namespace)},resolve:i}}),l=r.events,c=r.functions,d=t.window}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./mediaquery"],e):e(jQuery,Formstone)}(function(e,t){"use strict";function n(){g.scrollDepth&&l()}function i(t){!C&&y&&y.length&&(C=!0,(g=e.extend(g,t||{})).autoEvents&&y.find("a").not("["+P+"]").each(o),g.scrollDepth&&(l(),v.on(b.scroll,s).one(b.load,n)),y.on(b.click,"*["+P+"]",c))}function a(){C&&y&&y.length&&(v.off(b.namespace),y.off(b.namespace),C=!1)}function o(){var t,n=e(this),i="undefined"!==e.type(n[0].href)?n[0].href:"",a=document.domain.split(".").reverse(),o=null!==i.match(a[1]+"."+a[0]);i.match(/^mailto\:/i)?t="Email, Click, "+i.replace(/^mailto\:/i,""):i.match(/^tel\:/i)?t="Telephone, Click, "+i.replace(/^tel\:/i,""):i.match(g.fileTypes)?t="File, Download:"+(/[.]/.exec(i)?/[^.]+$/.exec(i):void 0)[0]+", "+i.replace(/ /g,"-"):o||(t="ExternalLink, Click, "+i),t&&n.attr(P,t)}function s(e){w.startTimer(k,250,r)}function r(){for(var n,i=v.scrollTop()+t.windowHeight,a=1/g.scrollStops,o=a,s=1;s<=g.scrollStops;s++)n=Math.round(100*o).toString(),!T[M][n].passed&&i>T[M][n].edge&&(T[M][n].passed=!0,d(e.extend(g.scrollFields,{eventCategory:"ScrollDepth",eventAction:M,eventLabel:n,nonInteraction:!0}))),o+=a}function l(){var t,n=e.mediaquery("state"),i=y.outerHeight(),a={},o=1/g.scrollStops,s=o,r=0;n.minWidth&&(M="MinWidth:"+n.minWidth+"px");for(var l=1;l<=g.scrollStops;l++)r=parseInt(i*s),a[t=Math.round(100*s).toString()]={edge:"100"===t?r-10:r,passsed:!(!T[M]||!T[M][t])&&T[M][t].passed},s+=o;T[M]=a}function c(t){var n=e(this),i=n.attr("href"),a=n.data(x).split(",");g.eventCallback&&t.preventDefault();for(var o in a)a.hasOwnProperty(o)&&(a[o]=e.trim(a[o]));d({eventCategory:a[0],eventAction:a[1],eventLabel:a[2]||i,eventValue:a[3],nonInteraction:a[4]},n)}function d(t,n){m.location;var i=e.extend({hitType:"event"},t);if("undefined"!==e.type(n)&&!n.attr("data-analytics-stop")){var a="undefined"!==e.type(n[0].href)?n[0].href:"",o=!a.match(/^mailto\:/i)&&!a.match(/^tel\:/i)&&a.indexOf(":")<0?m.location.protocol+"//"+m.location.hostname+"/"+a:a;if(""!==o){var s=n.attr("target");s?m.open(o,s):g.eventCallback&&(i.hitCallback=function(){O&&(w.clearTimer(O),f(o))},O=w.startTimer(O,g.eventTimeout,i.hitCallback))}}p(i)}function u(t){p(e.extend({hitType:"pageview"},t))}function p(t){if("function"===e.type(m.ga)&&"function"===e.type(m.ga.getAll))for(var n=m.ga.getAll(),i=0,a=n.length;i<a;i++)m.ga(n[i].get("name")+".send",t)}function f(e){document.location=e}var h=t.Plugin("analytics",{methods:{_resize:n},utilities:{_delegate:function(){if(arguments.length&&"object"!==e.type(arguments[0]))if("destroy"===arguments[0])a.apply(this);else{var t=Array.prototype.slice.call(arguments,1);switch(arguments[0]){case"pageview":u.apply(this,t);break;case"event":d.apply(this,t)}}else i.apply(this,arguments);return null}}}),g={autoEvents:!1,fileTypes:/\.(zip|exe|dmg|pdf|doc.*|xls.*|ppt.*|mp3|txt|rar|wma|mov|avi|wmv|flv|wav)$/i,eventCallback:!1,eventTimeout:1e3,scrollDepth:!1,scrollStops:5,scrollFields:{}},m=t.window,v=t.$window,y=null,w=h.functions,b=h.events,C=!1,x="analytics-event",P="data-"+x,T={},k=null,M="Site",O=null;t.Ready(function(){y=t.$body})}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core"],e):e(jQuery,Formstone)}(function(e,t){"use strict";function n(){p={unit:r.unit};for(var e in g)if(g.hasOwnProperty(e))for(var t in h[e])if(h[e].hasOwnProperty(t)){var n="Infinity"===t?1/0:parseInt(t,10),i=e.indexOf("max")>-1;h[e][t].matches&&(i?(!p[e]||n<p[e])&&(p[e]=n):(!p[e]||n>p[e])&&(p[e]=n))}}function i(){n(),c.trigger(l.mqChange,[p])}function a(e){var t=o(e.media),n=f[t],i=e.matches,a=i?l.enter:l.leave;if(n&&(n.active||!n.active&&i)){for(var s in n[a])n[a].hasOwnProperty(s)&&n[a][s].apply(n.mq);n.active=!0}}function o(e){return e.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"").replace(/^\s+|\s+$/g,"")}var s=t.Plugin("mediaquery",{utilities:{_initialize:function(t){t=t||{};for(var n in g)g.hasOwnProperty(n)&&(r[n]=t[n]?e.merge(t[n],r[n]):r[n]);(r=e.extend(r,t)).minWidth.sort(u.sortDesc),r.maxWidth.sort(u.sortAsc),r.minHeight.sort(u.sortDesc),r.maxHeight.sort(u.sortAsc);for(var a in g)if(g.hasOwnProperty(a)){h[a]={};for(var o in r[a])if(r[a].hasOwnProperty(o)){var s=window.matchMedia("("+g[a]+": "+(r[a][o]===1/0?1e5:r[a][o])+r.unit+")");s.addListener(i),h[a][r[a][o]]=s}}i()},state:function(){return p},bind:function(e,t,n){var i=d.matchMedia(t),s=o(i.media);f[s]||(f[s]={mq:i,active:!0,enter:{},leave:{}},f[s].mq.addListener(a));for(var r in n)n.hasOwnProperty(r)&&f[s].hasOwnProperty(r)&&(f[s][r][e]=n[r]);var c=f[s],u=i.matches;u&&c[l.enter].hasOwnProperty(e)?(c[l.enter][e].apply(i),c.active=!0):!u&&c[l.leave].hasOwnProperty(e)&&(c[l.leave][e].apply(i),c.active=!1)},unbind:function(e,t){if(e)if(t){var n=o(t);f[n]&&(f[n].enter[e]&&delete f[n].enter[e],f[n].leave[e]&&delete f[n].leave[e])}else for(var i in f)f.hasOwnProperty(i)&&(f[i].enter[e]&&delete f[i].enter[e],f[i].leave[e]&&delete f[i].leave[e])}},events:{mqChange:"mqchange"}}),r={minWidth:[0],maxWidth:[1/0],minHeight:[0],maxHeight:[1/0],unit:"px"},l=e.extend(s.events,{enter:"enter",leave:"leave"}),c=t.$window,d=c[0],u=s.functions,p=null,f=[],h={},g={minWidth:"min-width",maxWidth:"max-width",minHeight:"min-height",maxHeight:"max-height"}}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./analytics"],e):e(jQuery,Formstone)}(function(e,t){"use strict";function n(){u&&!u.hasClass(b.base)&&u.on(w.click,f.selector,i).addClass(b.base)}function i(e){var t=e.currentTarget;e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||window.location.protocol!==t.protocol||window.location.host!==t.host||"_blank"===t.target||(!t.hash||t.href.replace(t.hash,"")!==window.location.href.replace(location.hash,"")&&t.href!==window.location.href+"#")&&(t.href.match(f.ignoreTypes)||(y.killEvent(e),e.stopImmediatePropagation(),t.href!==x&&o(t.href,!0)))}function a(e){p&&p.abort();var t=e.originalEvent.state;t&&(P=t.id,t.url!==x&&o(t.url,!1))}function o(t,n){p&&p.abort(),m.trigger(w.requested,[n]),f.transitionOutDeferred=f.transitionOut.apply(v,[!1]);var i=d(t),a=i.params,o=i.hash,r=i.clean,l="User error",c=null,u=e.Deferred();a[f.requestKey]=!0,p=e.ajax({url:r,data:a,dataType:"json",cache:f.cache,xhr:function(){var e=new v.XMLHttpRequest;return e.addEventListener("progress",function(e){if(e.lengthComputable){var t=e.loaded/e.total;m.trigger(w.progress,[t])}},!1),e},success:function(n,a,s){c="string"===e.type(n)?e.parseJSON(n):n,n.location&&(t=n.location,i=d(t),o=i.hash),u.resolve()},error:function(e,t,n){l=n,u.reject()}}),e.when(u,f.transitionOutDeferred).done(function(){s(i,c,n)}).fail(function(){m.trigger(w.failed,[l])})}function s(t,n,i){m.trigger(w.loaded,[n]),void 0!==e.fsAnalytics&&e.fsAnalytics("pageview"),f.render.call(this,n,t.hash),x=t.url,i&&l(++P,x),m.trigger(w.rendered,[n]);var a=!1;if(""!==t.hash){var o=e(t.hash);o.length&&(a=o.offset().top)}!1!==a&&m.scrollTop(a)}function r(t,n){if("undefined"!==e.type(t)){var i;for(var a in t)t.hasOwnProperty(a)&&(i=e(a)).length&&i.html(t[a])}}function l(e,t){history.pushState({id:e,url:t},C+e,t)}function c(e,t){history.replaceState({id:e,url:t},C+e,t)}function d(e){var t=e.indexOf("?"),n=e.indexOf("#"),i={},a="",o=e;return n>-1&&(a=e.slice(n),o=e.slice(0,n)),t>-1&&(i=y.parseQueryString(e.slice(t+1,n>-1?n:e.length)),o=e.slice(0,t)),{hash:a,params:i,url:e,clean:o}}var u,p,f,h=t.Plugin("asap",{utilities:{_initialize:function(i){!f&&t.support.history&&(u=t.$body,(f=e.extend(g,i)).render===e.noop&&(f.render=r),f.transitionOut===e.noop&&(f.transitionOut=function(){return e.Deferred().resolve()}),history.state?(P=history.state.id,x=history.state.url):(x=window.location.href,c(P,x)),m.on(w.popState,a),n())},load:function(e){f&&t.support.history?e&&o(e,!0):window.location.href=e},replace:function(e){var t=history.state;x=e,c(t.id,e)}},events:{failed:"failed",loaded:"loaded",popState:"popstate",progress:"progress",requested:"requested",rendered:"rendered"}}),g={cache:!0,ignoreTypes:/\.(jpg|sjpg|jpeg|png|gif|zip|exe|dmg|pdf|doc.*|xls.*|ppt.*|mp3|txt|rar|wma|mov|avi|wmv|flv|wav)$/i,render:e.noop,requestKey:"fs-asap",selector:"a",transitionOut:e.noop},m=t.$window,v=m[0],y=h.functions,w=h.events,b=h.classes.raw,C="asap-",x="",P=1}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./mediaquery"],e):e(jQuery,Formstone)}(function(e,t){"use strict";function n(t,n){if(t.enabled&&!t.active){t.group&&!n&&e(t.group).not(t.$el).not(t.linked)[r.namespaceClean]("deactivate",!0);var i=t.group?e(t.group).index(t.$el):null;t.$swaps.addClass(t.classes.raw.active),n||t.linked&&e(t.linked).not(t.$el)[r.namespaceClean]("activate",!0),this.trigger(d.activate,[i]),t.active=!0}}function i(t,n){t.enabled&&t.active&&(t.$swaps.removeClass(t.classes.raw.active),n||t.linked&&e(t.linked).not(t.$el)[r.namespaceClean]("deactivate",!0),this.trigger(d.deactivate),t.active=!1)}function a(t,a){t.enabled||(t.enabled=!0,t.$swaps.addClass(t.classes.raw.enabled),a||e(t.linked).not(t.$el)[r.namespaceClean]("enable"),this.trigger(d.enable),t.onEnable?(t.active=!1,n.call(this,t)):(t.active=!0,i.call(this,t)))}function o(t,n){t.enabled&&(t.enabled=!1,t.$swaps.removeClass([t.classes.raw.enabled,t.classes.raw.active].join(" ")),n||e(t.linked).not(t.$el)[r.namespaceClean]("disable"),this.trigger(d.disable))}function s(e){u.killEvent(e);var t=e.data;t.active&&t.collapse?i.call(t.$el,t):n.call(t.$el,t)}var r=t.Plugin("swap",{widget:!0,defaults:{collapse:!0,maxWidth:1/0},classes:["target","enabled","active"],events:{activate:"activate",deactivate:"deactivate",enable:"enable",disable:"disable"},methods:{_construct:function(t){t.enabled=!1,t.active=!1,t.classes=e.extend(!0,{},c,t.classes),t.target=this.data(l+"-target"),t.$target=e(t.target).addClass(t.classes.raw.target),t.mq="(max-width:"+(t.maxWidth===1/0?"100000px":t.maxWidth)+")";var n=this.data(l+"-linked");t.linked=!!n&&"[data-"+l+'-linked="'+n+'"]';var i=this.data(l+"-group");t.group=!!i&&"[data-"+l+'-group="'+i+'"]',t.$swaps=e().add(this).add(t.$target),this.on(d.click+t.dotGuid,t,s)},_postConstruct:function(t){t.collapse||!t.group||e(t.group).filter("[data-"+l+"-active]").length||e(t.group).eq(0).attr("data-"+l+"-active","true"),t.onEnable=this.data(l+"-active")||!1,e.fsMediaquery("bind",t.rawGuid,t.mq,{enter:function(){a.call(t.$el,t,!0)},leave:function(){o.call(t.$el,t,!0)}})},_destruct:function(t){e.fsMediaquery("unbind",t.rawGuid),t.$swaps.removeClass([t.classes.raw.enabled,t.classes.raw.active].join(" ")).off(d.namespace)},activate:n,deactivate:i,enable:a,disable:o}}),l=r.namespace,c=r.classes,d=r.events,u=r.functions}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./mediaquery","./touch"],e):e(jQuery,Formstone)}(function(e,t){"use strict";function n(){D=e(E.base)}function i(e){e.enabled&&(S.clearTimer(e.autoTimer),e.enabled=!1,e.$subordinate.off(Y.update),this.removeClass([X.enabled,X.animated].join(" ")).off(Y.namespace),e.$canister.fsTouch("destroy").off(Y.namespace).attr("style","").css(z,"none"),e.$items.css({width:"",height:""}).removeClass([X.visible,E.item_previous,E.item_next].join(" ")),e.$images.off(Y.namespace),e.$controlItems.off(Y.namespace),e.$pagination.html("").off(Y.namespace),m(e),e.$canister.css(W,""),e.index=0)}function a(e){e.enabled||(e.enabled=!0,this.addClass(X.enabled),e.$controlItems.on(Y.click,e,f),e.$pagination.on(Y.click,E.page,e,h),e.$items.on(Y.click,e,T),e.$subordinate.on(Y.update,e,M),M({data:e},0),e.$canister.fsTouch({axis:"x",pan:!0,swipe:!0}).on(Y.panStart,e,w).on(Y.pan,e,b).on(Y.panEnd,e,C).on(Y.swipe,e,x).on(Y.focusIn,e,k).css(z,""),s(e),e.$images.on(Y.load,e,u),e.autoAdvance&&(e.autoTimer=S.startTimer(e.autoTimer,e.autoTime,function(){p(e)},!0)),o.call(this,e))}function o(e){if(e.enabled){console.log("resize");var t,n,i,a,o,s,r;if(e.count=e.$items.length,e.count<1)return m(e),void e.$canister.css({height:""});for(this.removeClass(X.animated),e.$canister.find(E.clone).remove(),e.containerWidth=e.$container.outerWidth(!1),e.visible=y(e),e.perPage=e.paged?1:e.visible,e.itemMarginLeft=parseInt(e.$items.eq(0).css("marginLeft")),e.itemMarginRight=parseInt(e.$items.eq(0).css("marginRight")),e.itemMargin=e.itemMarginLeft+e.itemMarginRight,isNaN(e.itemMargin)&&(e.itemMargin=0),e.itemWidth=(e.containerWidth-e.itemMargin*(e.visible-1))/e.visible,e.itemHeight=0,e.pageWidth=e.paged?e.itemWidth:e.containerWidth,e.pageCount=Math.ceil(e.count/e.perPage),e.$items.css({width:e.matchWidth?e.itemWidth:"",height:""}).removeClass([X.visible,X.item_previous,X.item_next].join(" ")),e.pages=[],n=0,0;n<e.count;n+=e.perPage){for(o=0,s=0,(a=e.$items.slice(n,n+e.perPage)).length<e.perPage&&(a=0===n?e.$items:e.$items.slice(e.$items.length-e.perPage)),i=0;i<a.length;i++)o+=a.eq(i).outerWidth(!0),(t=a.eq(i).outerHeight())>s&&(s=t);e.pages.push({height:s,width:o,$items:a}),s>e.itemHeight&&(e.itemHeight=s)}if(e.indexOffset=0,!e.single&&e.infinite){e.indexOffset=2;var l,c=e.pages.length-1,d=[],u=[];for(n=0;n<e.indexOffset;n++)l={height:e.pages[n].height,width:e.pages[n].width,$items:e.pages[n].$items.clone().addClass(X.clone)},u.push(l),l.width,e.$canister.append(l.$items);for(n=c;n>c-2;n--)l={height:e.pages[n].height,width:e.pages[n].width,$items:e.pages[n].$items.clone().addClass("carousel-clone")},d.push(l),l.width,e.$canister.prepend(l.$items);e.pages=d.concat(e.pages),e.pages=e.pages.concat(u),e.canisterWidth=e.single?e.containerWidth:(e.pageWidth+e.itemMargin)*(e.pageCount+2*e.indexOffset),e.$canister.css({width:e.matchWidth?e.canisterWidth:1e6,height:""})}for(n=0;n<e.pages.length;n++)r=(e.rtl?e.pages[n].$items.eq(e.pages[n].$items.length-1):e.pages[n].$items.eq(0)).position().left,e.pages[n].left=r;e.paged&&(e.pageCount=e.count-e.visible+1),e.pageCount<=0&&(e.pageCount=1),e.minClone=-e.pages[e.indexOffset].left,e.maxClone=-e.pages[e.pageCount+e.indexOffset-1].left,e.maxMove=-e.pages[e.pageCount+2*e.indexOffset-1].left,e.autoHeight?e.$canister.css({height:e.pages[0].height}):e.matchHeight&&e.$items.css({height:e.itemHeight});var p="";for(n=0;n<e.pageCount;n++)p+='<button type="button" class="'+X.page+'">'+(n+1)+"</button>";e.$pagination.html(p),e.pageCount<=1?m(e):v(e),e.$paginationItems=e.$pagination.find(E.page),g(e,e.index,!1),setTimeout(function(){e.$el.addClass(X.animated)},5)}}function s(e){e.$items=e.$canister.children().not(":hidden").addClass(X.item),e.$images=e.$canister.find("img"),e.totalImages=e.$images.length}function r(e,t){e.$images.off(Y.namespace),!1!==t&&e.$canister.html(t),e.index=0,s(e),o.call(this,e)}function l(e,t,n,i,a){e.enabled&&(S.clearTimer(e.autoTimer),void 0===a&&(a=!0),g(e,t-1,a,n,i))}function c(e){var t=e.index-1;e.infinite&&t<0&&(t=e.pageCount-1),g(e,t)}function d(e){var t=e.index+1;e.infinite&&t>=e.pageCount&&(t=0),g(e,t)}function u(e){var t=e.data;t.resizeTimer=S.startTimer(t.resizeTimer,1,function(){o.call(t.$el,t)})}function p(e){var t=e.index+1;t>=e.pageCount&&(t=0),g(e,t)}function f(t){S.killEvent(t);var n=t.data,i=n.index+(e(t.currentTarget).hasClass(X.control_next)?1:-1);S.clearTimer(n.autoTimer),g(n,i)}function h(t){S.killEvent(t);var n=t.data,i=n.$paginationItems.index(e(t.currentTarget));S.clearTimer(n.autoTimer),g(n,i)}function g(t,n,i,a,o){var s=!1;if(n<0&&(n=t.infinite?t.pageCount-1:0,t.infinite)&&(r=t.$canister.css(W).split(","),t.leftPosition=parseInt(r[4]),s=t.leftPosition-t.pages[t.pageCount].left),n>=t.pageCount&&(n=t.infinite?0:t.pageCount-1,t.infinite)){var r=t.$canister.css(W).split(",");t.leftPosition=parseInt(r[4]),s=t.leftPosition+t.pages[t.pageCount].left}if(t.$canister.css(z,"0s"),console.log(s),s&&(t.leftPosition=s,t.useMargin?t.$canister.css({marginLeft:t.leftPosition}):t.$canister.css(W,"translateX("+t.leftPosition+"px)")),!(t.count<1)){n+=t.indexOffset,t.pages[n]&&(t.leftPosition=-t.pages[n].left),t.leftPosition=O(t,t.leftPosition),t.animationTimeout&&(clearTimeout(t.animationTimeout),t.animationTimeout=null),t.animationTimeout=setTimeout(function(){!1!==i&&t.$canister.css(z,"0.25s"),t.$canister.css(W,"translateX("+t.leftPosition+"px)")},50),t.$items.removeClass([X.visible,X.item_previous,X.item_next].join(" "));for(var l=0,c=t.pages.length;l<c;l++)l===n?t.pages[l].$items.addClass(X.visible).attr("aria-hidden","false"):t.pages[l].$items.not(t.pages[n].$items).addClass(l<n?X.item_previous:X.item_next).attr("aria-hidden","true");t.autoHeight&&t.$canister.css({height:t.pages[n].height}),!1!==i&&!0!==a&&n!==t.index&&(t.infinite||n>-1&&n<t.pageCount)&&t.$el.trigger(Y.update,[n]),t.index=n-t.indexOffset,t.linked&&!0!==o&&e(t.linked).not(t.$el)[q]("jumpPage",t.index+1,!0,!0),$(t)}}function m(e){e.$controls.removeClass(X.visible),e.$controlItems.removeClass(X.visible),e.$pagination.removeClass(X.visible)}function v(e){e.$controls.addClass(X.visible),e.$controlItems.addClass(X.visible),e.$pagination.addClass(X.visible)}function $(e){e.$paginationItems.removeClass(X.active).eq(e.index).addClass(X.active),e.infinite?e.$controlItems.addClass(X.visible):e.pageCount<1?e.$controlItems.removeClass(X.visible):(e.$controlItems.addClass(X.visible),e.index<=0?e.$controlPrevious.removeClass(X.visible):(e.index>=e.pageCount-1||!e.single&&e.leftPosition===e.maxMove)&&e.$controlNext.removeClass(X.visible))}function y(n){var i=1;if(n.single)return i;if("array"===e.type(n.show))for(var a in n.show)n.show.hasOwnProperty(a)&&(t.support.matchMedia?n.show[a].mq.matches&&(i=n.show[a].count):n.show[a].width<t.fallbackWidth&&(i=n.show[a].count));else i=n.show;return n.fill&&n.count<i?n.count:i}function w(t,n){var i=t.data;if(S.clearTimer(i.autoTimer),!i.single){var a=i.$canister.css(W).split(",");if(i.leftPosition=parseInt(a[4]),i.$canister.css(z,"").css("will-change","transform"),b(t),i.linked&&!0!==n){var o=t.deltaX/i.pageWidth;i.rtl&&(o*=-1),e(i.linked).not(i.$el)[q]("panStart",o)}}
i.isTouching=!0}function b(t,n){var i=t.data;if(!i.single&&(i.touchLeft=O(i,i.leftPosition+t.deltaX),i.infinite&&(t.deltaX>0&&i.touchLeft>i.minClone&&(i.touchLeft-=i.pages[i.pageCount].left),t.deltaX<0&&i.touchLeft<i.maxClone&&(i.touchLeft+=i.pages[i.pageCount].left)),i.$canister.css(W,"translateX("+i.touchLeft+"px)"),i.linked&&!0!==n)){var a=t.deltaX/i.pageWidth;i.rtl&&(a*=-1),e(i.linked).not(i.$el)[q]("pan",a)}}function C(t,n){var i=t.data,a=Math.abs(t.deltaX),o=j(i,t),s=!1;if(i.didPan=!1,!i.single){var r,l,c=Math.abs(i.touchLeft),d=!1,u=i.rtl?"right":"left";if(t.directionX===u)for(r=0,l=i.pages.length;r<l;r++)d=i.pages[r],c>Math.abs(d.left)+20&&(s=r+1);else for(r=i.pages.length-1,l=0;r>=l;r--)d=i.pages[r],c<Math.abs(d.left)&&(s=r-1)}!1===s&&(s=a<50?i.index:i.index+o),s!==i.index&&(i.didPan=!0),s-=i.indexOffset,i.linked&&!0!==n&&e(i.linked).not(i.$el)[q]("panEnd",s),P(i,s)}function x(t,n){var i=t.data,a=j(i,t),o=i.index+a;i.linked&&!0!==n&&e(i.linked).not(i.$el)[q]("swipe",t.directionX),P(i,o)}function P(e,t){e.$canister.css(z,"").css("will-change",""),g(e,t),e.isTouching=!1}function T(t){var n=t.data,i=e(t.currentTarget);if(!n.didPan&&(i.trigger(Y.itemClick),n.controller)){var a=n.$items.index(i);M(t,a),n.$subordinate[q]("jumpPage",a+1,!0)}}function k(t){var n=t.data;if(n.enabled&&!n.isTouching){S.clearTimer(n.autoTimer),n.$container.scrollLeft(0);var i,a=e(t.target);a.hasClass(X.item)?i=a:a.parents(E.item).length&&(i=a.parents(E.item).eq(0));for(var o=0;o<n.pageCount;o++)if(n.pages[o].$items.is(i)){g(n,o);break}}}function M(e,t){var n=e.data;if(n.controller){var i=n.$items.eq(t);n.$items.removeClass(X.active),i.addClass(X.active);for(var a=0;a<n.pageCount;a++)if(n.pages[a].$items.is(i)){g(n,a,!0,!0);break}}}function O(e,t){return isNaN(t)?t=0:e.rtl?(t>e.maxMove&&(t=e.maxMove),t<0&&(t=0)):(t<e.maxMove&&(t=e.maxMove),t>0&&(t=0)),t}function j(e,t){return e.rtl?"right"===t.directionX?1:-1:"left"===t.directionX?1:-1}var _=t.Plugin("carousel",{widget:!0,defaults:{autoAdvance:!1,autoHeight:!1,autoTime:8e3,contained:!0,controls:!0,customClass:"",fill:!1,infinite:!0,labels:{next:"Next",previous:"Previous",controls:"Carousel {guid} Controls",pagination:"Carousel {guid} Pagination"},matchHeight:!1,matchWidth:!0,maxWidth:1/0,minWidth:"0px",paged:!1,pagination:!0,rtl:!1,show:1,single:!1,theme:"fs-light"},classes:["ltr","rtl","viewport","wrapper","container","canister","item","item_previous","item_next","clone","controls","controls_custom","control","control_previous","control_next","pagination","page","animated","enabled","visible","active","auto_height","contained","single"],events:{itemClick:"itemClick",update:"update"},methods:{_construct:function(t){var o;t.didPan=!1,t.carouselClasses=[X.base,t.theme,t.customClass,t.rtl?X.rtl:X.ltr],t.maxWidth=t.maxWidth===1/0?"100000px":t.maxWidth,t.mq="(min-width:"+t.minWidth+") and (max-width:"+t.maxWidth+")",t.customControls="object"===e.type(t.controls)&&t.controls.previous&&t.controls.next,t.customPagination="string"===e.type(t.pagination),t.id=this.attr("id"),t.id?t.ariaId=t.id:(t.ariaId=t.rawGuid,this.attr("id",t.ariaId));var r="",l="",c=[X.control,X.control_previous].join(" "),d=[X.control,X.control_next].join(" ");t.controls&&!t.customControls&&(t.labels.controls=t.labels.controls.replace("{guid}",t.numGuid),r+='<div class="'+X.controls+'" aria-label="'+t.labels.controls+'" aria-controls="'+t.ariaId+'">',r+='<button type="button" class="'+c+'" aria-label="'+t.labels.previous+'">'+t.labels.previous+"</button>",r+='<button type="button" class="'+d+'" aria-label="'+t.labels.next+'">'+t.labels.next+"</button>",r+="</div>"),t.pagination&&!t.customPagination&&(t.labels.pagination=t.labels.pagination.replace("{guid}",t.numGuid),l+='<div class="'+X.pagination+'" aria-label="'+t.labels.pagination+'" aria-controls="'+t.ariaId+'" role="navigation">',l+="</div>"),t.autoHeight&&t.carouselClasses.push(X.auto_height),t.contained&&t.carouselClasses.push(X.contained),t.single&&t.carouselClasses.push(X.single),this.addClass(t.carouselClasses.join(" ")).wrapInner('<div class="'+X.wrapper+'" aria-live="polite"><div class="'+X.container+'"><div class="'+X.canister+'"></div></div></div>').append(r).wrapInner('<div class="'+X.viewport+'"></div>').append(l),t.$viewport=this.find(E.viewport).eq(0),t.$container=this.find(E.container).eq(0),t.$canister=this.find(E.canister).eq(0),t.$pagination=this.find(E.pagination).eq(0),t.$controlPrevious=t.$controlNext=e(""),t.customControls?(t.$controls=e(t.controls.container).addClass([X.controls,X.controls_custom].join(" ")),t.$controlPrevious=e(t.controls.previous).addClass(c),t.$controlNext=e(t.controls.next).addClass(d)):(t.$controls=this.find(E.controls).eq(0),t.$controlPrevious=t.$controls.find(E.control_previous),t.$controlNext=t.$controls.find(E.control_next)),t.$controlItems=t.$controlPrevious.add(t.$controlNext),t.customPagination&&(t.$pagination=e(t.pagination).addClass([X.pagination])),t.$paginationItems=t.$pagination.find(E.page),t.index=0,t.enabled=!1,t.leftPosition=0,t.autoTimer=null,t.resizeTimer=null;var u=this.data(I+"-linked");t.linked=!!u&&"[data-"+I+'-linked="'+u+'"]',t.linked&&(t.paged=!0);var p=this.data(I+"-controller-for")||"";if(t.$subordinate=e(p),t.$subordinate.length&&(t.controller=!0),"object"===e.type(t.show)){var f=t.show,h=[],g=[];for(o in f)f.hasOwnProperty(o)&&g.push(o);g.sort(S.sortAsc);for(o in g)g.hasOwnProperty(o)&&h.push({width:parseInt(g[o]),count:f[g[o]],mq:window.matchMedia("(min-width: "+parseInt(g[o])+"px)")});t.show=h}s(t),e.fsMediaquery("bind",t.rawGuid,t.mq,{enter:function(){a.call(t.$el,t)},leave:function(){i.call(t.$el,t)}}),n(),t.carouselClasses.push(X.enabled),t.carouselClasses.push(X.animated)},_destruct:function(t){S.clearTimer(t.autoTimer),S.clearTimer(t.resizeTimer),i.call(this,t),e.fsMediaquery("unbind",t.rawGuid),t.id!==t.ariaId&&this.removeAttr("id"),t.$controlItems.removeClass([E.control,X.control_previous,E.control_next,E.visible].join(" ")).off(Y.namespace),t.$images.off(Y.namespace),t.$canister.fsTouch("destroy"),t.$items.removeClass([X.item,X.visible,E.item_previous,E.item_next].join(" ")).unwrap().unwrap().unwrap().unwrap(),t.controls&&!t.customControls&&t.$controls.remove(),t.customControls&&t.$controls.removeClass([X.controls,X.controls_custom,X.visible].join(" ")),t.pagination&&!t.customPagination&&t.$pagination.remove(),t.customPagination&&t.$pagination.html("").removeClass([X.pagination,X.visible].join(" ")),this.removeClass(t.carouselClasses.join(" ")),n()},_resize:function(e){S.iterate.call(D,o)},disable:i,enable:a,jump:l,previous:c,next:d,jumpPage:l,previousPage:c,nextPage:d,jumpItem:function(e,t,n,i,a){if(e.enabled){S.clearTimer(e.autoTimer);var o=e.$items.eq(t-1);void 0===a&&(a=!0);for(var s=0;s<e.pageCount;s++)if(e.pages[s].$items.is(o)){g(e,s,a,n,i);break}}},reset:function(e){e.enabled&&r.call(this,e,!1)},resize:o,update:r,panStart:function(e,t){if(S.clearTimer(e.autoTimer),!e.single){e.rtl&&(t*=-1);var n=e.$canister.css(W).split(",");e.leftPosition=parseInt(n[4]),e.$canister.css(z,"none"),b({data:e,deltaX:e.pageWidth*t},!0)}e.isTouching=!0},pan:function(e,t){if(!e.single){e.rtl&&(t*=-1);var n=e.pageWidth*t;e.touchLeft=O(e,e.leftPosition+n),e.$canister.css(W,"translateX("+e.touchLeft+"px)")}},panEnd:function(e,t){P(e,t)},swipe:function(e,t){x({data:e,directionX:t},!0)}}}),I=_.namespace,q=_.namespaceClean,E=_.classes,X=E.raw,Y=_.events,S=_.functions,D=[],W=t.transform,z=t.transition}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./transition"],e):e(jQuery,Formstone)}(function(e,t){"use strict";function n(){(T=P.scrollTop()+t.windowHeight)<0&&(T=0),x.iterate.call(M,m)}function i(){k=e(w.base),M=e(w.lazy),x.iterate.call(M,g)}function a(e){if(e.visible){var t=e.source;e.source=null,o(e,t,!0)}}function o(t,n,i){if(n!==t.source&&t.visible){if(t.source=n,t.responsive=!1,t.isYouTube=!1,"object"===e.type(n)&&"string"===e.type(n.video)){var a=n.video.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i);a&&a.length>=1&&(t.isYouTube=!0,t.videoId=a[1])}var o=!t.isYouTube&&"object"===e.type(n)&&(n.hasOwnProperty("mp4")||n.hasOwnProperty("ogg")||n.hasOwnProperty("webm"));if(t.video=t.isYouTube||o,t.playing=!1,t.isYouTube)t.playerReady=!1,t.posterLoaded=!1,c(t,n,i);else if("object"===e.type(n)&&n.hasOwnProperty("poster"))l(t,n,i);else{var d=n;if("object"===e.type(n)){var u,p=[],f=[];for(u in n)n.hasOwnProperty(u)&&f.push(u);f.sort(x.sortAsc);for(u in f)f.hasOwnProperty(u)&&p.push({width:parseInt(f[u]),url:n[f[u]],mq:$.matchMedia("(min-width: "+parseInt(f[u])+"px)")});t.responsive=!0,t.sources=p,d=s(t)}r(t,d,!1,i)}}else t.$el.trigger(C.loaded)}function s(e){var n=e.source;if(e.responsive){n=e.sources[0].url;for(var i in e.sources)e.sources.hasOwnProperty(i)&&(t.support.matchMedia?e.sources[i].mq.matches&&(n=e.sources[i].url):e.sources[i].width<t.fallbackWidth&&(n=e.sources[i].url))}return n}function r(t,n,i,a){var o=[b.media,b.image,!0!==a?b.animated:""].join(" "),s=e('<div class="'+o+'" aria-hidden="true"><img alt="'+t.alt+'"></div>'),r=s.find("img"),l=n;r.one(C.load,function(){O&&s.addClass(b.native).css({backgroundImage:"url('"+l+"')"}),s.fsTransition({property:"opacity"},function(){i||d(t)}).css({opacity:1}),h(t),i&&!a||t.$el.trigger(C.loaded)}).one(C.error,t,u).attr("src",l),t.responsive&&s.addClass(b.responsive),t.$container.append(s),(r[0].complete||4===r[0].readyState)&&r.trigger(C.load),t.currentSource=l}function l(n,i,a){if(n.source&&n.source.poster&&(r(n,n.source.poster,!0,!0),a=!1),!t.isMobile){var o='<div class="'+[b.media,b.video,!0!==a?b.animated:""].join(" ")+'" aria-hidden="true">';o+="<video",n.loop&&(o+=" loop"),n.mute&&(o+=" muted"),o+=">",n.source.webm&&(o+='<source src="'+n.source.webm+'" type="video/webm" />'),n.source.mp4&&(o+='<source src="'+n.source.mp4+'" type="video/mp4" />'),n.source.ogg&&(o+='<source src="'+n.source.ogg+'" type="video/ogg" />'),o+="</video>";var s=e(o+="</div>");s.find("video").one(C.loadedMetaData,function(e){s.fsTransition({property:"opacity"},function(){d(n)}).css({opacity:1}),h(n),n.$el.trigger(C.loaded),n.autoPlay&&p(n)}),n.$container.append(s)}}function c(n,i,a){if(!n.videoId){var o=i.match(/^.*(?:youtu.be\/|v\/|e\/|u\/\w+\/|embed\/|v=)([^#\&\?]*).*/);n.videoId=o[1]}if(n.posterLoaded||(n.source.poster||(n.source.poster="//img.youtube.com/vi/"+n.videoId+"/0.jpg"),n.posterLoaded=!0,r(n,n.source.poster,!0,a),a=!1),!t.isMobile)if(e("script[src*='youtube.com/iframe_api']").length||e("head").append('<script src="//www.youtube.com/iframe_api"></script>'),j){var s=n.guid+"_"+n.youTubeGuid++,l='<div class="'+[b.media,b.embed,!0!==a?b.animated:""].join(" ")+'" aria-hidden="true">';l+='<div id="'+s+'"></div>';var c=e(l+="</div>"),p=e.extend(!0,{},{controls:0,rel:0,showinfo:0,wmode:"transparent",enablejsapi:1,version:3,playerapiid:s,loop:n.loop?1:0,autoplay:1,origin:$.location.protocol+"//"+$.location.host},n.youtubeOptions);p.autoplay=1,n.$container.append(c),n.player&&(n.oldPlayer=n.player,n.player=null),n.player=new $.YT.Player(s,{videoId:n.videoId,playerVars:p,events:{onReady:function(e){n.playerReady=!0,n.mute&&n.player.mute(),n.autoPlay||n.player.pauseVideo()},onStateChange:function(e){n.playing||e.data!==$.YT.PlayerState.PLAYING?n.loop&&n.playing&&e.data===$.YT.PlayerState.ENDED&&n.player.playVideo():(n.playing=!0,c.fsTransition({property:"opacity"},function(){d(n)}).css({opacity:1}),h(n),n.$el.trigger(C.loaded)),n.$el.find(w.embed).addClass(b.ready)},onPlaybackQualityChange:function(e){},onPlaybackRateChange:function(e){},onError:function(e){u({data:n})},onApiChange:function(e){}}}),h(n)}else _.push({data:n,source:i})}function d(e){var t=e.$container.find(w.media);t.length>=1&&(t.not(":last").remove(),e.oldPlayer=null)}function u(e){e.data.$el.trigger(C.error)}function p(e){if(e.video&&!e.playing)if(e.isYouTube)e.playerReady?e.player.playVideo():e.autoPlay=!0;else{var t=e.$container.find("video");t.length&&t[0].play(),e.playing=!0}}function f(e){if(e.visible)if(e.responsive){var t=s(e);t!==e.currentSource?r(e,t,!1,!0):h(e)}else h(e)}function h(e){for(var t=e.$container.find(w.media),n=0,i=t.length;n<i;n++){var a=t.eq(n),o=e.isYouTube?"iframe":a.find("video").length?"video":"img",s=a.find(o);if(s.length&&("img"!==o||!O)){var r=e.$el.outerWidth(),l=e.$el.outerHeight(),c=v(e,s);e.width=c.width,e.height=c.height,e.left=0,e.top=0;var d=e.isYouTube?e.embedRatio:e.width/e.height;e.height=l,e.width=e.height*d,e.width<r&&(e.width=r,e.height=e.width/d),e.left=-(e.width-r)/2,e.top=-(e.height-l)/2,a.css({height:e.height,width:e.width,left:e.left,top:e.top})}}}function g(e){e.scrollTop=e.$el.offset().top}function m(e){!e.visible&&e.scrollTop<T+e.lazyEdge&&(e.visible=!0,a(e))}function v(t,n){if(t.isYouTube)return{height:500,width:500/t.embedRatio};if(n.is("img")){var i=n[0];if("undefined"!==e.type(i.naturalHeight))return{height:i.naturalHeight,width:i.naturalWidth};var a=new Image;return a.src=i.src,{height:a.height,width:a.width}}return{height:n[0].videoHeight,width:n[0].videoWidth}}var y=t.Plugin("background",{widget:!0,defaults:{alt:"",autoPlay:!0,customClass:"",embedRatio:1.777777,lazy:!1,lazyEdge:100,loop:!0,mute:!0,source:null,youtubeOptions:{}},classes:["container","media","animated","responsive","native","fixed","ready","lazy"],events:{loaded:"loaded",ready:"ready",loadedMetaData:"loadedmetadata"},methods:{_construct:function(t){t.youTubeGuid=0,t.$container=e('<div class="'+b.container+'"></div>').appendTo(this),t.thisClasses=[b.base,t.customClass],t.visible=!0,t.lazy&&(t.visible=!1,t.thisClasses.push(b.lazy)),this.addClass(t.thisClasses.join(" ")),i(),t.lazy?(g(t),m(t)):a(t)},_destruct:function(e){e.$container.remove(),this.removeClass(e.thisClasses.join(" ")).off(C.namespace),i()},_resize:function(){x.iterate.call(k,f),x.iterate.call(M,g),x.iterate.call(M,m)},play:p,pause:function(e){if(e.video&&e.playing){if(e.isYouTube)e.playerReady?e.player.pauseVideo():e.autoPlay=!1;else{var t=e.$container.find("video");t.length&&t[0].pause()}e.playing=!1}},mute:function(e){if(e.video)if(e.isYouTube&&e.playerReady)e.player.mute();else{var t=e.$container.find("video");t.length&&(t[0].muted=!0)}e.mute=!0},unmute:function(e){if(e.video){if(e.isYouTube&&e.playerReady)e.player.unMute();else{var t=e.$container.find("video");t.length&&(t[0].muted=!1)}e.playing=!0}e.mute=!1},resize:h,load:o,unload:function(e){var t=e.$container.find(w.media);t.length>=1&&t.fsTransition({property:"opacity"},function(){t.remove(),delete e.source}).css({opacity:0})}}}),w=y.classes,b=w.raw,C=y.events,x=y.functions,$=t.window,P=t.$window,T=0,k=[],M=[],O="backgroundSize"in t.document.documentElement.style,j=!1,_=[];t.Ready(function(){n(),P.on("scroll",n)}),$.onYouTubeIframeAPIReady=function(){j=!0;for(var e in _)_.hasOwnProperty(e)&&c(_[e].data,_[e].source);_=[]}});